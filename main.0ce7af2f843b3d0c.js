"use strict";(self.webpackChunktask_apps=self.webpackChunktask_apps||[]).push([[179],{2011:(ht,Ie,P)=>{P.d(Ie,{Dh:()=>ae,GT:()=>te,cc:()=>Ee,hO:()=>Ue,on:()=>j,pX:()=>ee,xv:()=>se});var g=P(4650),K=P(9260),O=P(2122);ht=P.hmd(ht);const X=["ngOnDestroy"],ee=(be,De,ke,we={})=>new Proxy(be,{get:(ve,Te)=>ke.runOutsideAngular(()=>{var Ne;if(be[Te])return!(null===(Ne=we?.spy)||void 0===Ne)&&Ne.get&&we.spy.get(Te,be[Te]),be[Te];if(X.indexOf(Te)>-1)return()=>{};const Re=De.toPromise().then(V=>{const ye=V&&V[Te];return"function"==typeof ye?ye.bind(V):ye&&ye.then?ye.then(Ve=>ke.run(()=>Ve)):ke.run(()=>ye)});return new Proxy(()=>{},{get:(V,ye)=>Re[ye],apply:(V,ye,Ve)=>Re.then(ze=>{var ft;const Je=ze&&ze(...Ve);return!(null===(ft=we?.spy)||void 0===ft)&&ft.apply&&we.spy.apply(Te,Ve,Je),Je})})})}),te=(be,De)=>{De.forEach(ke=>{Object.getOwnPropertyNames(ke.prototype||ke).forEach(we=>{Object.defineProperty(be.prototype,we,Object.getOwnPropertyDescriptor(ke.prototype||ke,we))})})};class de{constructor(De){return De}}const ae=new g.OlP("angularfire2.app.options"),se=new g.OlP("angularfire2.app.name");function j(be,De,ke){const ve="object"==typeof ke&&ke||{};ve.name=ve.name||"string"==typeof ke&&ke||"[DEFAULT]";const Ne=K.Z.apps.filter(Re=>Re&&Re.name===ve.name)[0]||De.runOutsideAngular(()=>K.Z.initializeApp(be,ve));try{JSON.stringify(be)!==JSON.stringify(Ne.options)&&B("error",`${Ne.name} Firebase App already initialized with different options${ht.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new de(Ne)}const B=(be,...De)=>{(0,g.X6Q)()&&typeof console<"u"&&console[be](...De)},Z={provide:de,useFactory:j,deps:[ae,g.R0b,[new g.FiY,se]]};let Ue=(()=>{class be{constructor(ke){K.Z.registerVersion("angularfire",O.q4.full,"core"),K.Z.registerVersion("angularfire",O.q4.full,"app-compat"),K.Z.registerVersion("angular",g.q4F.full,ke.toString())}static initializeApp(ke,we){return{ngModule:be,providers:[{provide:ae,useValue:ke},{provide:se,useValue:we}]}}}return be.\u0275fac=function(ke){return new(ke||be)(g.LFG(g.Lbi))},be.\u0275mod=g.oAB({type:be}),be.\u0275inj=g.cJS({providers:[Z]}),be})();function Ee(be,De,ke,we,ve){const[,Te,Ne]=globalThis.\u0275AngularfireInstanceCache.find(Re=>Re[0]===be)||[];if(Te)return function He(be,De){try{return be.toString()===De.toString()}catch{return be===De}}(ve,Ne)||(le("error",`${De} was already initialized on the ${ke} Firebase App with different settings.${st?" You may need to reload as Firebase is not HMR aware.":""}`),le("warn",{is:ve,was:Ne})),Te;{const Re=we();return globalThis.\u0275AngularfireInstanceCache.push([be,Re,ve]),Re}}const st=!!ht.hot,le=(be,...De)=>{(0,g.X6Q)()&&typeof console<"u"&&console[be](...De)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(ht,Ie,P)=>{P.d(Ie,{q4:()=>bu,iC:()=>Is,HU:()=>ln,vb:()=>Su,JM:()=>Rr});var g=P(4650),K=P(259),O=P(5861),X=P(9681),ee=P(2090),te=P(4859),de=P(1877),ae=P(8766);const se="@firebase/installations",j="0.6.3",B=1e4,Z=`w:${j}`,Ue="FIS_v2",Ee="https://firebaseinstallations.googleapis.com/v1",He=36e5,De=new ee.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ke(D){return D instanceof ee.ZR&&D.code.includes("request-failed")}function we({projectId:D}){return`${Ee}/projects/${D}/installations`}function ve(D){return{token:D.token,requestStatus:2,expiresIn:ze(D.expiresIn),creationTime:Date.now()}}function Te(D,C){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,O.Z)(function*(D,C){const F=(yield C.json()).error;return De.create("request-failed",{requestName:D,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function Re({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function ye(D){return Ve.apply(this,arguments)}function Ve(){return(Ve=(0,O.Z)(function*(D){const C=yield D();return C.status>=500&&C.status<600?D():C})).apply(this,arguments)}function ze(D){return Number(D.replace("s","000"))}function re(){return(re=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},{fid:M}){const F=we(D),W=Re(D),H=C.getImmediate({optional:!0});if(H){const ot=yield H.getHeartbeatsHeader();ot&&W.append("x-firebase-client",ot)}const nt={method:"POST",headers:W,body:JSON.stringify({fid:M,authVersion:Ue,appId:D.appId,sdkVersion:Z})},ct=yield ye(()=>fetch(F,nt));if(ct.ok){const ot=yield ct.json();return{fid:ot.fid||M,registrationStatus:2,refreshToken:ot.refreshToken,authToken:ve(ot.authToken)}}throw yield Te("Create Installation",ct)})).apply(this,arguments)}function ue(D){return new Promise(C=>{setTimeout(C,D)})}const Se=/^[cdef][\w-]{21}$/,Fe="";function Be(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function Ke(D){return function ge(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Se.test(M)?M:Fe}catch{return Fe}}function Ge(D){return`${D.appName}!${D.appId}`}const rn=new Map;function _t(D,C){const M=Ge(D);xt(M,C),function mn(D,C){const M=function yn(){return!_n&&"BroadcastChannel"in self&&(_n=new BroadcastChannel("[Firebase] FID Change"),_n.onmessage=D=>{xt(D.data.key,D.data.fid)}),_n}();M&&M.postMessage({key:D,fid:C}),function wn(){0===rn.size&&_n&&(_n.close(),_n=null)}()}(M,C)}function xt(D,C){const M=rn.get(D);if(M)for(const F of M)F(C)}let _n=null;const Xr="firebase-installations-database",fs=1,di="firebase-installations-store";let Cr=null;function Fs(){return Cr||(Cr=(0,ae.X3)(Xr,fs,{upgrade:(D,C)=>{0===C&&D.createObjectStore(di)}})),Cr}function cn(D,C){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,O.Z)(function*(D,C){const M=Ge(D),W=(yield Fs()).transaction(di,"readwrite"),H=W.objectStore(di),Ce=yield H.get(M);return yield H.put(C,M),yield W.done,(!Ce||Ce.fid!==C.fid)&&_t(D,C.fid),C})).apply(this,arguments)}function gt(D){return $i.apply(this,arguments)}function $i(){return($i=(0,O.Z)(function*(D){const C=Ge(D),F=(yield Fs()).transaction(di,"readwrite");yield F.objectStore(di).delete(C),yield F.done})).apply(this,arguments)}function hi(D,C){return En.apply(this,arguments)}function En(){return(En=(0,O.Z)(function*(D,C){const M=Ge(D),W=(yield Fs()).transaction(di,"readwrite"),H=W.objectStore(di),Ce=yield H.get(M),nt=C(Ce);return void 0===nt?yield H.delete(M):yield H.put(nt,M),yield W.done,nt&&(!Ce||Ce.fid!==nt.fid)&&_t(D,nt.fid),nt})).apply(this,arguments)}function Tr(D){return ps.apply(this,arguments)}function ps(){return ps=(0,O.Z)(function*(D){let C;const M=yield hi(D.appConfig,F=>{const W=function Mt(D){return lr(D||{fid:Be(),registrationStatus:0})}(F),H=function mt(D,C){if(0===C.registrationStatus){if(!navigator.onLine)return{installationEntry:C,registrationPromise:Promise.reject(De.create("app-offline"))};const M={fid:C.fid,registrationStatus:1,registrationTime:Date.now()},F=function wt(D,C){return Hi.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:F}}return 1===C.registrationStatus?{installationEntry:C,registrationPromise:xn(D)}:{installationEntry:C}}(D,W);return C=H.registrationPromise,H.installationEntry});return M.fid===Fe?{installationEntry:yield C}:{installationEntry:M,registrationPromise:C}}),ps.apply(this,arguments)}function Hi(){return Hi=(0,O.Z)(function*(D,C){try{const M=yield function Je(D,C){return re.apply(this,arguments)}(D,C);return cn(D.appConfig,M)}catch(M){throw ke(M)&&409===M.customData.serverCode?yield gt(D.appConfig):yield cn(D.appConfig,{fid:C.fid,registrationStatus:0}),M}}),Hi.apply(this,arguments)}function xn(D){return In.apply(this,arguments)}function In(){return(In=(0,O.Z)(function*(D){let C=yield fi(D.appConfig);for(;1===C.registrationStatus;)yield ue(100),C=yield fi(D.appConfig);if(0===C.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield Tr(D);return F||M}return C})).apply(this,arguments)}function fi(D){return hi(D,C=>{if(!C)throw De.create("installation-not-found");return lr(C)})}function lr(D){return function Qo(D){return 1===D.registrationStatus&&D.registrationTime+B<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Gi(){return(Gi=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:C},M){const F=function Zt(D,{fid:C}){return`${we(D)}/${C}/authTokens:generate`}(D,M),W=function V(D,{refreshToken:C}){const M=Re(D);return M.append("Authorization",function ft(D){return`${Ue} ${D}`}(C)),M}(D,M),H=C.getImmediate({optional:!0});if(H){const ot=yield H.getHeartbeatsHeader();ot&&W.append("x-firebase-client",ot)}const nt={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:Z,appId:D.appId}})},ct=yield ye(()=>fetch(F,nt));if(ct.ok)return ve(yield ct.json());throw yield Te("Generate Auth Token",ct)})).apply(this,arguments)}function dr(D){return Ti.apply(this,arguments)}function Ti(){return Ti=(0,O.Z)(function*(D,C=!1){let M;const F=yield hi(D.appConfig,H=>{if(!kt(H))throw De.create("not-registered");const Ce=H.authToken;if(!C&&function U(D){return 2===D.requestStatus&&!function L(D){const C=Date.now();return C<D.creationTime||D.creationTime+D.expiresIn<C+He}(D)}(Ce))return H;if(1===Ce.requestStatus)return M=function je(D,C){return _e.apply(this,arguments)}(D,C),H;{if(!navigator.onLine)throw De.create("app-offline");const nt=function z(D){const C={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:C})}(H);return M=function Dt(D,C){return Ct.apply(this,arguments)}(D,nt),nt}});return M?yield M:F.authToken}),Ti.apply(this,arguments)}function _e(){return(_e=(0,O.Z)(function*(D,C){let M=yield tt(D.appConfig);for(;1===M.authToken.requestStatus;)yield ue(100),M=yield tt(D.appConfig);const F=M.authToken;return 0===F.requestStatus?dr(D,C):F})).apply(this,arguments)}function tt(D){return hi(D,C=>{if(!kt(C))throw De.create("not-registered");return function fe(D){return 1===D.requestStatus&&D.requestTime+B<Date.now()}(C.authToken)?Object.assign(Object.assign({},C),{authToken:{requestStatus:0}}):C})}function Ct(){return Ct=(0,O.Z)(function*(D,C){try{const M=yield function sn(D,C){return Gi.apply(this,arguments)}(D,C),F=Object.assign(Object.assign({},C),{authToken:M});return yield cn(D.appConfig,F),M}catch(M){if(!ke(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},C),{authToken:{requestStatus:0}});yield cn(D.appConfig,F)}else yield gt(D.appConfig);throw M}}),Ct.apply(this,arguments)}function kt(D){return void 0!==D&&2===D.registrationStatus}function it(){return(it=(0,O.Z)(function*(D){const C=D,{installationEntry:M,registrationPromise:F}=yield Tr(C);return F?F.catch(console.error):dr(C).catch(console.error),M.fid})).apply(this,arguments)}function zt(){return zt=(0,O.Z)(function*(D,C=!1){const M=D;return yield function Dn(D){return yt.apply(this,arguments)}(M),(yield dr(M,C)).token}),zt.apply(this,arguments)}function yt(){return(yt=(0,O.Z)(function*(D){const{registrationPromise:C}=yield Tr(D);C&&(yield C)})).apply(this,arguments)}function Ja(D){return De.create("missing-app-config-values",{valueName:D})}const cc="installations",bn=D=>{const C=D.getProvider("app").getImmediate(),M=function Xo(D){if(!D||!D.options)throw Ja("App Configuration");if(!D.name)throw Ja("App Name");const C=["projectId","apiKey","appId"];for(const M of C)if(!D.options[M])throw Ja(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(C);return{app:C,appConfig:M,heartbeatServiceProvider:(0,X._getProvider)(C,"heartbeat"),_delete:()=>Promise.resolve()}},Ll=D=>{const C=D.getProvider("app").getImmediate(),M=(0,X._getProvider)(C,cc).getImmediate();return{getId:()=>function Q(D){return it.apply(this,arguments)}(M),getToken:W=>function Ft(D){return zt.apply(this,arguments)}(M,W)}};(function lc(){(0,X._registerComponent)(new te.wA(cc,bn,"PUBLIC")),(0,X._registerComponent)(new te.wA("installations-internal",Ll,"PRIVATE"))})(),(0,X.registerVersion)(se,j),(0,X.registerVersion)(se,j,"esm2017");const ea="@firebase/remote-config",Un=new ee.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Vs{constructor(C,M,F,W){this.client=C,this.storage=M,this.storageCache=F,this.logger=W}isCachedDataFresh(C,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,W=F<=C;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${C}. Is cache hit: ${W}.`),W}fetch(C){var M=this;return(0,O.Z)(function*(){const[F,W]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(W&&M.isCachedDataFresh(C.cacheMaxAgeMillis,F))return W;C.eTag=W&&W.eTag;const H=yield M.client.fetch(C),Ce=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===H.status&&Ce.push(M.storage.setLastSuccessfulFetchResponse(H)),yield Promise.all(Ce),H})()}}function mi(D=navigator){return D.languages&&D.languages[0]||D.language}class ms{constructor(C,M,F,W,H,Ce){this.firebaseInstallations=C,this.sdkVersion=M,this.namespace=F,this.projectId=W,this.apiKey=H,this.appId=Ce}fetch(C){var M=this;return(0,O.Z)(function*(){const[F,W]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Ce=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,nt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":C.eTag||"*"},ct={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:W,app_id:M.appId,language_code:mi()},ot={method:"POST",headers:nt,body:JSON.stringify(ct)},lt=fetch(Ce,ot),St=new Promise((Wr,ri)=>{C.signal.addEventListener(()=>{const Ds=new Error("The operation was aborted.");Ds.name="AbortError",ri(Ds)})});let Or;try{yield Promise.race([lt,St]),Or=yield lt}catch(Wr){let ri="fetch-client-network";throw"AbortError"===Wr?.name&&(ri="fetch-timeout"),Un.create(ri,{originalErrorMessage:Wr?.message})}let Zn=Or.status;const Po=Or.headers.get("ETag")||void 0;let Xs,ko;if(200===Or.status){let Wr;try{Wr=yield Or.json()}catch(ri){throw Un.create("fetch-client-parse",{originalErrorMessage:ri?.message})}Xs=Wr.entries,ko=Wr.state}if("INSTANCE_STATE_UNSPECIFIED"===ko?Zn=500:"NO_CHANGE"===ko?Zn=304:("NO_TEMPLATE"===ko||"EMPTY_CONFIG"===ko)&&(Xs={}),304!==Zn&&200!==Zn)throw Un.create("fetch-status",{httpStatus:Zn});return{status:Zn,eTag:Po,config:Xs}})()}}class Si{constructor(C,M){this.client=C,this.storage=M}fetch(C){var M=this;return(0,O.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(C,F)})()}attemptFetch(C,{throttleEndTimeMillis:M,backoffCount:F}){var W=this;return(0,O.Z)(function*(){yield function qi(D,C){return new Promise((M,F)=>{const W=Math.max(C-Date.now(),0),H=setTimeout(M,W);D.addEventListener(()=>{clearTimeout(H),F(Un.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(C.signal,M);try{const H=yield W.client.fetch(C);return yield W.storage.deleteThrottleMetadata(),H}catch(H){if(!function un(D){if(!(D instanceof ee.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(H))throw H;const Ce={throttleEndTimeMillis:Date.now()+(0,ee.$s)(F),backoffCount:F+1};return yield W.storage.setThrottleMetadata(Ce),W.attemptFetch(C,Ce)}})()}}class go{constructor(C,M,F,W,H){this.app=C,this._client=M,this._storageCache=F,this._storage=W,this._logger=H,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Us(D,C){const M=D.target.error||void 0;return Un.create(C,{originalErrorMessage:M&&M?.message})}const Ar="app_namespace_store";class yi{constructor(C,M,F,W=function Br(){return new Promise((D,C)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{C(Us(F,"storage-open"))},M.onsuccess=F=>{D(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(Ar,{keyPath:"compositeKey"})}}catch(M){C(Un.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=C,this.appName=M,this.namespace=F,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(C){return this.set("last_fetch_status",C)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(C){return this.set("last_successful_fetch_timestamp_millis",C)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(C){return this.set("last_successful_fetch_response",C)}getActiveConfig(){return this.get("active_config")}setActiveConfig(C){return this.set("active_config",C)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(C){return this.set("active_config_etag",C)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(C){return this.set("throttle_metadata",C)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(C){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((W,H)=>{const nt=F.transaction([Ar],"readonly").objectStore(Ar),ct=M.createCompositeKey(C);try{const ot=nt.get(ct);ot.onerror=lt=>{H(Us(lt,"storage-get"))},ot.onsuccess=lt=>{const St=lt.target.result;W(St?St.value:void 0)}}catch(ot){H(Un.create("storage-get",{originalErrorMessage:ot?.message}))}})})()}set(C,M){var F=this;return(0,O.Z)(function*(){const W=yield F.openDbPromise;return new Promise((H,Ce)=>{const ct=W.transaction([Ar],"readwrite").objectStore(Ar),ot=F.createCompositeKey(C);try{const lt=ct.put({compositeKey:ot,value:M});lt.onerror=St=>{Ce(Us(St,"storage-set"))},lt.onsuccess=()=>{H()}}catch(lt){Ce(Un.create("storage-set",{originalErrorMessage:lt?.message}))}})})()}delete(C){var M=this;return(0,O.Z)(function*(){const F=yield M.openDbPromise;return new Promise((W,H)=>{const nt=F.transaction([Ar],"readwrite").objectStore(Ar),ct=M.createCompositeKey(C);try{const ot=nt.delete(ct);ot.onerror=lt=>{H(Us(lt,"storage-delete"))},ot.onsuccess=()=>{W()}}catch(ot){H(Un.create("storage-delete",{originalErrorMessage:ot?.message}))}})})()}createCompositeKey(C){return[this.appId,this.appName,this.namespace,C].join()}}class na{constructor(C){this.storage=C}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var C=this;return(0,O.Z)(function*(){const M=C.storage.getLastFetchStatus(),F=C.storage.getLastSuccessfulFetchTimestampMillis(),W=C.storage.getActiveConfig(),H=yield M;H&&(C.lastFetchStatus=H);const Ce=yield F;Ce&&(C.lastSuccessfulFetchTimestampMillis=Ce);const nt=yield W;nt&&(C.activeConfig=nt)})()}setLastFetchStatus(C){return this.lastFetchStatus=C,this.storage.setLastFetchStatus(C)}setLastSuccessfulFetchTimestampMillis(C){return this.lastSuccessfulFetchTimestampMillis=C,this.storage.setLastSuccessfulFetchTimestampMillis(C)}setActiveConfig(C){return this.activeConfig=C,this.storage.setActiveConfig(C)}}function ra(){return Th.apply(this,arguments)}function Th(){return(Th=(0,O.Z)(function*(){if(!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch{return!1}})).apply(this,arguments)}!function vi(){(0,X._registerComponent)(new te.wA("remote-config",function D(C,{instanceIdentifier:M}){const F=C.getProvider("app").getImmediate(),W=C.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Un.create("registration-window");if(!(0,ee.hl)())throw Un.create("indexed-db-unavailable");const{projectId:H,apiKey:Ce,appId:nt}=F.options;if(!H)throw Un.create("registration-project-id");if(!Ce)throw Un.create("registration-api-key");if(!nt)throw Un.create("registration-app-id");const ct=new yi(nt,F.name,M=M||"firebase"),ot=new na(ct),lt=new de.Yd(ea);lt.logLevel=de.in.ERROR;const St=new ms(W,X.SDK_VERSION,M,H,Ce,nt),Or=new Si(St,ct),Zn=new Vs(Or,ct,ot,lt),Po=new go(F,Zn,ot,ct,lt);return function Cn(D){const C=(0,ee.m9)(D);C._initializePromise||(C._initializePromise=C._storageCache.loadFromStorage().then(()=>{C._isInitializationComplete=!0}))}(Po),Po},"PUBLIC").setMultipleInstances(!0)),(0,X.registerVersion)(ea,"0.4.3"),(0,X.registerVersion)(ea,"0.4.3","esm2017")}();const pc="/firebase-messaging-sw.js",Wi="/firebase-cloud-messaging-push-scope",mo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ia="https://fcmregistrations.googleapis.com/v1",gc="google.c.a.c_id",Sh="google.c.a.c_l",Ah="google.c.a.ts",Sp="google.c.a.e";var Bs=(()=>{return(D=Bs||(Bs={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",Bs;var D})();function Ai(D){const C=new Uint8Array(D);return btoa(String.fromCharCode(...C)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ap(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),W=new Uint8Array(F.length);for(let H=0;H<F.length;++H)W[H]=F.charCodeAt(H);return W}const Xa="fcm_token_details_db",mc=5,Mr="fcm_token_object_Store";function Bl(){return Bl=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(H=>H.name).includes(Xa))return null;let C=null;return(yield(0,ae.X3)(Xa,mc,{upgrade:(F=(0,O.Z)(function*(W,H,Ce,nt){var ct;if(H<2||!W.objectStoreNames.contains(Mr))return;const ot=nt.objectStore(Mr),lt=yield ot.index("fcmSenderId").get(D);if(yield ot.clear(),lt)if(2===H){const St=lt;if(!St.auth||!St.p256dh||!St.endpoint)return;C={token:St.fcmToken,createTime:null!==(ct=St.createTime)&&void 0!==ct?ct:Date.now(),subscriptionOptions:{auth:St.auth,p256dh:St.p256dh,endpoint:St.endpoint,swScope:St.swScope,vapidKey:"string"==typeof St.vapidKey?St.vapidKey:Ai(St.vapidKey)}}}else if(3===H){const St=lt;C={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:Ai(St.auth),p256dh:Ai(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:Ai(St.vapidKey)}}}else if(4===H){const St=lt;C={token:St.fcmToken,createTime:St.createTime,subscriptionOptions:{auth:Ai(St.auth),p256dh:Ai(St.p256dh),endpoint:St.endpoint,swScope:St.swScope,vapidKey:Ai(St.vapidKey)}}}}),function(H,Ce,nt,ct){return F.apply(this,arguments)})})).close(),yield(0,ae.Lj)(Xa),yield(0,ae.Lj)("fcm_vapid_details_db"),yield(0,ae.Lj)("undefined"),function Mh(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:C}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof C.auth&&C.auth.length>0&&"string"==typeof C.p256dh&&C.p256dh.length>0&&"string"==typeof C.endpoint&&C.endpoint.length>0&&"string"==typeof C.swScope&&C.swScope.length>0&&"string"==typeof C.vapidKey&&C.vapidKey.length>0}(C)?C:null;var F}),Bl.apply(this,arguments)}const eu="firebase-messaging-database",js=1,$s="firebase-messaging-store";let tu=null;function vo(){return tu||(tu=(0,ae.X3)(eu,js,{upgrade:(D,C)=>{0===C&&D.createObjectStore($s)}})),tu}function nu(D){return _o.apply(this,arguments)}function _o(){return _o=(0,O.Z)(function*(D){const C=Eo(D),F=yield(yield vo()).transaction($s).objectStore($s).get(C);if(F)return F;{const W=yield function yc(D){return Bl.apply(this,arguments)}(D.appConfig.senderId);if(W)return yield Hs(D,W),W}}),_o.apply(this,arguments)}function Hs(D,C){return sa.apply(this,arguments)}function sa(){return(sa=(0,O.Z)(function*(D,C){const M=Eo(D),W=(yield vo()).transaction($s,"readwrite");return yield W.objectStore($s).put(C,M),yield W.done,C})).apply(this,arguments)}function wo(){return(wo=(0,O.Z)(function*(D){const C=Eo(D),F=(yield vo()).transaction($s,"readwrite");yield F.objectStore($s).delete(C),yield F.done})).apply(this,arguments)}function Eo({appConfig:D}){return D.appId}const Rn=new ee.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ru(D,C){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,O.Z)(function*(D,C){const M=yield zs(D),F=oa(C),W={method:"POST",headers:M,body:JSON.stringify(F)};let H;try{H=yield(yield fetch(Do(D.appConfig),W)).json()}catch(Ce){throw Rn.create("token-subscribe-failed",{errorInfo:Ce?.toString()})}if(H.error)throw Rn.create("token-subscribe-failed",{errorInfo:H.error.message});if(!H.token)throw Rn.create("token-subscribe-no-token");return H.token})).apply(this,arguments)}function Gs(){return(Gs=(0,O.Z)(function*(D,C){const M=yield zs(D),F=oa(C.subscriptionOptions),W={method:"PATCH",headers:M,body:JSON.stringify(F)};let H;try{H=yield(yield fetch(`${Do(D.appConfig)}/${C.token}`,W)).json()}catch(Ce){throw Rn.create("token-update-failed",{errorInfo:Ce?.toString()})}if(H.error)throw Rn.create("token-update-failed",{errorInfo:H.error.message});if(!H.token)throw Rn.create("token-update-no-token");return H.token})).apply(this,arguments)}function jn(D,C){return vc.apply(this,arguments)}function vc(){return(vc=(0,O.Z)(function*(D,C){const F={method:"DELETE",headers:yield zs(D)};try{const H=yield(yield fetch(`${Do(D.appConfig)}/${C}`,F)).json();if(H.error)throw Rn.create("token-unsubscribe-failed",{errorInfo:H.error.message})}catch(W){throw Rn.create("token-unsubscribe-failed",{errorInfo:W?.toString()})}})).apply(this,arguments)}function Do({projectId:D}){return`${ia}/projects/${D}/registrations`}function zs(D){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,O.Z)(function*({appConfig:D,installations:C}){const M=yield C.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function oa({p256dh:D,auth:C,endpoint:M,vapidKey:F}){const W={web:{endpoint:M,auth:C,p256dh:D}};return F!==mo&&(W.web.applicationPubKey=F),W}const bo=6048e5;function Zi(){return Zi=(0,O.Z)(function*(D){const C=yield function _c(D,C){return wc.apply(this,arguments)}(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:C.endpoint,auth:Ai(C.getKey("auth")),p256dh:Ai(C.getKey("p256dh"))},F=yield nu(D.firebaseDependencies);if(F){if(function au(D,C){return C.vapidKey===D.vapidKey&&C.endpoint===D.endpoint&&C.auth===D.auth&&C.p256dh===D.p256dh}(F.subscriptionOptions,M))return Date.now()>=F.createTime+bo?function Tt(D,C){return su.apply(this,arguments)}(D,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield jn(D.firebaseDependencies,F.token)}catch(W){console.warn(W)}return $l(D.firebaseDependencies,M)}return $l(D.firebaseDependencies,M)}),Zi.apply(this,arguments)}function ua(){return ua=(0,O.Z)(function*(D){const C=yield nu(D.firebaseDependencies);C&&(yield jn(D.firebaseDependencies,C.token),yield function jl(D){return wo.apply(this,arguments)}(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()}),ua.apply(this,arguments)}function su(){return su=(0,O.Z)(function*(D,C){try{const M=yield function Io(D,C){return Gs.apply(this,arguments)}(D.firebaseDependencies,C),F=Object.assign(Object.assign({},C),{token:M,createTime:Date.now()});return yield Hs(D.firebaseDependencies,F),M}catch(M){throw yield function aa(D){return ua.apply(this,arguments)}(D),M}}),su.apply(this,arguments)}function $l(D,C){return ou.apply(this,arguments)}function ou(){return(ou=(0,O.Z)(function*(D,C){const F={token:yield ru(D,C),createTime:Date.now(),subscriptionOptions:C};return yield Hs(D,F),F.token})).apply(this,arguments)}function wc(){return(wc=(0,O.Z)(function*(D,C){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ap(C)})})).apply(this,arguments)}function xh(D){const C={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function Ec(D,C){if(!C.notification)return;D.notification={};const M=C.notification.title;M&&(D.notification.title=M);const F=C.notification.body;F&&(D.notification.body=F);const W=C.notification.image;W&&(D.notification.image=W);const H=C.notification.icon;H&&(D.notification.icon=H)}(C,D),function he(D,C){C.data&&(D.data=C.data)}(C,D),function Yt(D,C){var M,F,W,H,Ce;if(!(C.fcmOptions||null!==(M=C.notification)&&void 0!==M&&M.click_action))return;D.fcmOptions={};const nt=null!==(W=null===(F=C.fcmOptions)||void 0===F?void 0:F.link)&&void 0!==W?W:null===(H=C.notification)||void 0===H?void 0:H.click_action;nt&&(D.fcmOptions.link=nt);const ct=null===(Ce=C.fcmOptions)||void 0===Ce?void 0:Ce.analytics_label;ct&&(D.fcmOptions.analyticsLabel=ct)}(C,D),C}function Hl(D,C){const M=[];for(let F=0;F<D.length;F++)M.push(D.charAt(F)),F<C.length&&M.push(C.charAt(F));return M.join("")}function ca(D){return Rn.create("missing-app-config-values",{valueName:D})}Hl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Hl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class uu{constructor(C,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function ir(D){if(!D||!D.options)throw ca("App Configuration Object");if(!D.name)throw ca("App Name");const C=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const F of C)if(!M[F])throw ca(F);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(C);this.firebaseDependencies={app:C,appConfig:W,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function Hr(D){return cu.apply(this,arguments)}function cu(){return(cu=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(pc,{scope:Wi}),D.swRegistration.update().catch(()=>{})}catch(C){throw Rn.create("failed-service-worker-registration",{browserErrorMessage:C?.message})}})).apply(this,arguments)}function Gl(){return(Gl=(0,O.Z)(function*(D,C){if(!C&&!D.swRegistration&&(yield Hr(D)),C||!D.swRegistration){if(!(C instanceof ServiceWorkerRegistration))throw Rn.create("invalid-sw-registration");D.swRegistration=C}})).apply(this,arguments)}function du(){return(du=(0,O.Z)(function*(D,C){C?D.vapidKey=C:D.vapidKey||(D.vapidKey=mo)})).apply(this,arguments)}function Gr(){return Gr=(0,O.Z)(function*(D,C){if(!navigator)throw Rn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Rn.create("permission-blocked");return yield function Dc(D,C){return du.apply(this,arguments)}(D,C?.vapidKey),yield function lu(D,C){return Gl.apply(this,arguments)}(D,C?.serviceWorkerRegistration),function iu(D){return Zi.apply(this,arguments)}(D)}),Gr.apply(this,arguments)}function qs(){return(qs=(0,O.Z)(function*(D,C,M){const F=function Mi(D){switch(D){case Bs.NOTIFICATION_CLICKED:return"notification_open";case Bs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(C);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[gc],message_name:M[Sh],message_time:M[Ah],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function la(){return la=(0,O.Z)(function*(D,C){const M=C.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===Bs.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(xh(M)):D.onMessageHandler.next(xh(M)));const F=M.data;(function Ic(D){return"object"==typeof D&&!!D&&gc in D})(F)&&"1"===F[Sp]&&(yield function ys(D,C,M){return qs.apply(this,arguments)}(D,M.messageType,F))}),la.apply(this,arguments)}const ql="@firebase/messaging",Cc=D=>{const C=new uu(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function zl(D,C){return la.apply(this,arguments)}(C,M)),C},Ki=D=>{const C=D.getProvider("messaging").getImmediate();return{getToken:F=>function Wn(D,C){return Gr.apply(this,arguments)}(C,F)}};function Tc(){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,O.Z)(function*(){try{yield(0,ee.eu)()}catch{return!1}return typeof window<"u"&&(0,ee.hl)()&&(0,ee.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Wl(){(0,X._registerComponent)(new te.wA("messaging",Cc,"PUBLIC")),(0,X._registerComponent)(new te.wA("messaging-internal",Ki,"PRIVATE")),(0,X.registerVersion)(ql,"0.12.3"),(0,X.registerVersion)(ql,"0.12.3","esm2017")}();const Kl="analytics",xr="firebase_id",Co="origin",fn=6e4,To="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Ac="https://www.googletagmanager.com/gtag/js",sr=new de.Yd("@firebase/analytics");function Oh(D){return Promise.all(D.map(C=>C.catch(M=>M)))}function Ws(){return(Ws=(0,O.Z)(function*(D,C,M,F,W,H){const Ce=F[W];try{if(Ce)yield C[Ce];else{const ct=(yield Oh(M)).find(ot=>ot.measurementId===W);ct&&(yield C[ct.appId])}}catch(nt){sr.error(nt)}D("config",W,H)})).apply(this,arguments)}function vs(){return(vs=(0,O.Z)(function*(D,C,M,F,W){try{let H=[];if(W&&W.send_to){let Ce=W.send_to;Array.isArray(Ce)||(Ce=[Ce]);const nt=yield Oh(M);for(const ct of Ce){const ot=nt.find(St=>St.measurementId===ct),lt=ot&&C[ot.appId];if(!lt){H=[];break}H.push(lt)}}0===H.length&&(H=Object.values(C)),yield Promise.all(H),D("event",F,W||{})}catch(H){sr.error(H)}})).apply(this,arguments)}const ni=new ee.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),fu=30,Ql=new class Zs{constructor(C={},M=1e3){this.throttleMetadata=C,this.intervalMillis=M}getThrottleMetadata(C){return this.throttleMetadata[C]}setThrottleMetadata(C,M){this.throttleMetadata[C]=M}deleteThrottleMetadata(C){delete this.throttleMetadata[C]}};function Ph(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function pa(){return(pa=(0,O.Z)(function*(D){var C;const{appId:M,apiKey:F}=D,W={method:"GET",headers:Ph(F)},H=To.replace("{app-id}",M),Ce=yield fetch(H,W);if(200!==Ce.status&&304!==Ce.status){let nt="";try{const ct=yield Ce.json();null!==(C=ct.error)&&void 0!==C&&C.message&&(nt=ct.error.message)}catch{}throw ni.create("config-fetch-failed",{httpStatus:Ce.status,responseMessage:nt})}return Ce.json()})).apply(this,arguments)}function ga(){return(ga=(0,O.Z)(function*(D,C=Ql,M){const{appId:F,apiKey:W,measurementId:H}=D.options;if(!F)throw ni.create("no-app-id");if(!W){if(H)return{measurementId:H,appId:F};throw ni.create("no-api-key")}const Ce=C.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},nt=new ma;return setTimeout((0,O.Z)(function*(){nt.abort()}),void 0!==M?M:fn),Yi({appId:F,apiKey:W,measurementId:H},Ce,nt,C)})).apply(this,arguments)}function Yi(D,C,M){return Qi.apply(this,arguments)}function Qi(){return Qi=(0,O.Z)(function*(D,{throttleEndTimeMillis:C,backoffCount:M},F,W=Ql){var H;const{appId:Ce,measurementId:nt}=D;try{yield function Ao(D,C){return new Promise((M,F)=>{const W=Math.max(C-Date.now(),0),H=setTimeout(M,W);D.addEventListener(()=>{clearTimeout(H),F(ni.create("fetch-throttle",{throttleEndTimeMillis:C}))})})}(F,C)}catch(ct){if(nt)return sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nt} provided in the "measurementId" field in the local Firebase config. [${ct?.message}]`),{appId:Ce,measurementId:nt};throw ct}try{const ct=yield function Ks(D){return pa.apply(this,arguments)}(D);return W.deleteThrottleMetadata(Ce),ct}catch(ct){const ot=ct;if(!function xc(D){if(!(D instanceof ee.ZR&&D.customData))return!1;const C=Number(D.customData.httpStatus);return 429===C||500===C||503===C||504===C}(ot)){if(W.deleteThrottleMetadata(Ce),nt)return sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nt} provided in the "measurementId" field in the local Firebase config. [${ot?.message}]`),{appId:Ce,measurementId:nt};throw ct}const lt=503===Number(null===(H=ot?.customData)||void 0===H?void 0:H.httpStatus)?(0,ee.$s)(M,W.intervalMillis,fu):(0,ee.$s)(M,W.intervalMillis),St={throttleEndTimeMillis:Date.now()+lt,backoffCount:M+1};return W.setThrottleMetadata(Ce,St),sr.debug(`Calling attemptFetch again in ${lt} millis`),Yi(D,St,F,W)}}),Qi.apply(this,arguments)}class ma{constructor(){this.listeners=[]}addEventListener(C){this.listeners.push(C)}abort(){this.listeners.forEach(C=>C())}}let pu,Es;function ws(){return(ws=(0,O.Z)(function*(D,C,M,F,W){if(W&&W.global)D("event",M,F);else{const H=yield C;D("event",M,Object.assign(Object.assign({},F),{send_to:H}))}})).apply(this,arguments)}function Rc(){return(Rc=(0,O.Z)(function*(){if(!(0,ee.hl)())return sr.warn(ni.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ee.eu)()}catch(D){return sr.warn(ni.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function Ia(){return Ia=(0,O.Z)(function*(D,C,M,F,W,H,Ce){var nt;const ct=function Tn(D){return ga.apply(this,arguments)}(D);ct.then(Zn=>{M[Zn.measurementId]=Zn.appId,D.options.measurementId&&Zn.measurementId!==D.options.measurementId&&sr.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${Zn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Zn=>sr.error(Zn)),C.push(ct);const ot=function Ea(){return Rc.apply(this,arguments)}().then(Zn=>{if(Zn)return F.getId()}),[lt,St]=yield Promise.all([ct,ot]);(function So(D){const C=window.document.getElementsByTagName("script");for(const M of Object.values(C))if(M.src&&M.src.includes(Ac)&&M.src.includes(D))return M;return null})(H)||function Rp(D,C){const M=document.createElement("script");M.src=`${Ac}?l=${D}&id=${C}`,M.async=!0,document.head.appendChild(M)}(H,lt.measurementId),Es&&(W("consent","default",Es),function wa(D){Es=D}(void 0)),W("js",new Date);const Or=null!==(nt=Ce?.config)&&void 0!==nt?nt:{};return Or[Co]="firebase",Or.update=!0,null!=St&&(Or[xr]=St),W("config",lt.measurementId,Or),pu&&(W("set",pu),function yu(D){pu=D}(void 0)),lt.measurementId}),Ia.apply(this,arguments)}class Jl{constructor(C){this.app=C}_delete(){return delete xi[this.app.options.appId],Promise.resolve()}}let xi={},vu=[];const Qs={};let _u,Ji,Ri="dataLayer",Xl="gtag",_i=!1;function wu(D,C,M){!function ed(){const D=[];if((0,ee.ru)()&&D.push("This is a browser extension environment."),(0,ee.zI)()||D.push("Cookies are not available."),D.length>0){const C=D.map((F,W)=>`(${W+1}) ${F}`).join(" "),M=ni.create("invalid-analytics-context",{errorInfo:C});sr.warn(M.message)}}();const F=D.options.appId;if(!F)throw ni.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw ni.create("no-api-key");sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=xi[F])throw ni.create("already-exists",{id:F});if(!_i){!function Np(D){let C=[];Array.isArray(window[D])?C=window[D]:window[D]=C}(Ri);const{wrappedGtag:H,gtagCore:Ce}=function fa(D,C,M,F,W){let H=function(...Ce){window[F].push(arguments)};return window[W]&&"function"==typeof window[W]&&(H=window[W]),window[W]=function ha(D,C,M,F){function H(){return H=(0,O.Z)(function*(Ce,nt,ct){try{"event"===Ce?yield function Mc(D,C,M,F,W){return vs.apply(this,arguments)}(D,C,M,nt,ct):"config"===Ce?yield function da(D,C,M,F,W,H){return Ws.apply(this,arguments)}(D,C,M,F,nt,ct):"consent"===Ce?D("consent","update",ct):D("set",nt)}catch(ot){sr.error(ot)}}),H.apply(this,arguments)}return function W(Ce,nt,ct){return H.apply(this,arguments)}}(H,D,C,M),{gtagCore:H,wrappedGtag:window[W]}}(xi,vu,Qs,Ri,Xl);Ji=H,_u=Ce,_i=!0}return xi[F]=function Ys(D,C,M,F,W,H,Ce){return Ia.apply(this,arguments)}(D,vu,Qs,C,_u,Ri,M),new Jl(D)}function Eu(){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,O.Z)(function*(){if((0,ee.ru)()||!(0,ee.zI)()||!(0,ee.hl)())return!1;try{return yield(0,ee.eu)()}catch{return!1}})).apply(this,arguments)}const on="@firebase/analytics";!function Dy(){(0,X._registerComponent)(new te.wA(Kl,(C,{options:M})=>wu(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,X._registerComponent)(new te.wA("analytics-internal",function D(C){try{const M=C.getProvider(Kl).getImmediate();return{logEvent:(F,W,H)=>function Fh(D,C,M,F){D=(0,ee.m9)(D),function gu(D,C,M,F,W){return ws.apply(this,arguments)}(Ji,xi[D.app.options.appId],C,M,F).catch(W=>sr.error(W))}(M,F,W,H)}}catch(M){throw ni.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,X.registerVersion)(on,"0.9.3"),(0,X.registerVersion)(on,"0.9.3","esm2017")}();var Oc=P(4408),sd=P(7565);const Du=new class Pc extends sd.v{}(class Js extends Oc.o{constructor(C,M){super(C,M),this.scheduler=C,this.work=M}schedule(C,M=0){return M>0?super.schedule(C,M):(this.delay=M,this.state=C,this.scheduler.flush(this),this)}execute(C,M){return M>0||this.closed?super.execute(C,M):this._execute(C,M)}requestAsyncId(C,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(C,M,F):(C.flush(this),0)}});var Lh=P(4986),kc=P(8505),pn=P(9468),Ta=P(5363);const bu=new g.GfV("7.5.0"),od="__angularfire_symbol__analyticsIsSupportedValue",zr="__angularfire_symbol__analyticsIsSupported",Ni="__angularfire_symbol__remoteConfigIsSupportedValue",Cu="__angularfire_symbol__remoteConfigIsSupported",No="__angularfire_symbol__messagingIsSupportedValue",Oo="__angularfire_symbol__messagingIsSupported";function Rr(D,C,M){if(C){if(1===C.length)return C[0];const H=C.filter(Ce=>Ce.app===M);if(1===H.length)return H[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[zr]||(globalThis[zr]=Eu().then(D=>globalThis[od]=D).catch(()=>globalThis[od]=!1)),globalThis[Oo]||(globalThis[Oo]=Tc().then(D=>globalThis[No]=D).catch(()=>globalThis[No]=!1)),globalThis[Cu]||(globalThis[Cu]=ra().then(D=>globalThis[Ni]=D).catch(()=>globalThis[Ni]=!1));const Su=(D,C)=>{const M=C?[C]:(0,K.C6)(),F=[];return M.forEach(W=>{W.container.getProvider(D).instances.forEach(Ce=>{F.includes(Ce)||F.push(Ce)})}),F};function Oi(){}class Sa{constructor(C,M=Du){this.zone=C,this.delegate=M}now(){return this.delegate.now()}schedule(C,M,F){const W=this.zone;return this.delegate.schedule(function(Ce){W.runGuarded(()=>{C.apply(this,[Ce])})},M,F)}}class Uh{constructor(C){this.zone=C,this.task=null}call(C,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Oi,{},Oi,Oi)),M.pipe((0,kc.b)({next:F,complete:F,error:F})).subscribe(C).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ln=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Sa(Zone.current)),this.insideAngular=M.run(()=>new Sa(Zone.current,Lh.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(g.LFG(g.R0b))},D.\u0275prov=g.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function Nr(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Is(D){return Nr(),function qr(D){return function(M){return(M=M.lift(new Uh(D.ngZone))).pipe((0,pn.R)(D.outsideAngular),(0,Ta.Q)(D.insideAngular))}}(Nr())(D)}},2090:(ht,Ie,P)=>{P.d(Ie,{$s:()=>tt,BH:()=>ve,G6:()=>ge,L:()=>ae,LL:()=>rn,Pz:()=>we,Sg:()=>Te,UG:()=>V,US:()=>te,ZB:()=>B,ZR:()=>Ge,aH:()=>ke,b$:()=>ze,eu:()=>Fe,hl:()=>Se,jU:()=>ye,m9:()=>kt,ne:()=>ps,pd:()=>En,r3:()=>fs,ru:()=>Ve,tV:()=>se,uI:()=>Re,vZ:()=>cn,w1:()=>Je,xO:()=>$i,xb:()=>Cr,z$:()=>Ne,zI:()=>Be,zd:()=>hi});const X=function(U){const L=[];let z=0;for(let fe=0;fe<U.length;fe++){let Q=U.charCodeAt(fe);Q<128?L[z++]=Q:Q<2048?(L[z++]=Q>>6|192,L[z++]=63&Q|128):55296==(64512&Q)&&fe+1<U.length&&56320==(64512&U.charCodeAt(fe+1))?(Q=65536+((1023&Q)<<10)+(1023&U.charCodeAt(++fe)),L[z++]=Q>>18|240,L[z++]=Q>>12&63|128,L[z++]=Q>>6&63|128,L[z++]=63&Q|128):(L[z++]=Q>>12|224,L[z++]=Q>>6&63|128,L[z++]=63&Q|128)}return L},te={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,fe=[];for(let Q=0;Q<U.length;Q+=3){const it=U[Q],Ft=Q+1<U.length,zt=Ft?U[Q+1]:0,Dn=Q+2<U.length,yt=Dn?U[Q+2]:0;let zn=(15&zt)<<2|yt>>6,ho=63&yt;Dn||(ho=64,Ft||(zn=64)),fe.push(z[it>>2],z[(3&it)<<4|zt>>4],z[zn],z[ho])}return fe.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(X(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let z=0,fe=0;for(;z<U.length;){const Q=U[z++];if(Q<128)L[fe++]=String.fromCharCode(Q);else if(Q>191&&Q<224){const it=U[z++];L[fe++]=String.fromCharCode((31&Q)<<6|63&it)}else if(Q>239&&Q<365){const Dn=((7&Q)<<18|(63&U[z++])<<12|(63&U[z++])<<6|63&U[z++])-65536;L[fe++]=String.fromCharCode(55296+(Dn>>10)),L[fe++]=String.fromCharCode(56320+(1023&Dn))}else{const it=U[z++],Ft=U[z++];L[fe++]=String.fromCharCode((15&Q)<<12|(63&it)<<6|63&Ft)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const z=L?this.charToByteMapWebSafe_:this.charToByteMap_,fe=[];for(let Q=0;Q<U.length;){const it=z[U.charAt(Q++)],zt=Q<U.length?z[U.charAt(Q)]:0;++Q;const yt=Q<U.length?z[U.charAt(Q)]:64;++Q;const jt=Q<U.length?z[U.charAt(Q)]:64;if(++Q,null==it||null==zt||null==yt||null==jt)throw Error();fe.push(it<<2|zt>>4),64!==yt&&(fe.push(zt<<4&240|yt>>2),64!==jt&&fe.push(yt<<6&192|jt))}return fe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},ae=function(U){return function(U){const L=X(U);return te.encodeByteArray(L,!0)}(U).replace(/\./g,"")},se=function(U){try{return te.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function B(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const z in L)!L.hasOwnProperty(z)||!Z(z)||(U[z]=B(U[z],L[z]));return U}function Z(U){return"__proto__"!==U}const le=()=>{try{return function Ue(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const U=process.env.__FIREBASE_DEFAULTS__;return U?JSON.parse(U):void 0})()||(()=>{if(typeof document>"u")return;let U;try{U=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=U&&se(U[1]);return L&&JSON.parse(L)})()}catch(U){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${U}`)}},ke=()=>{var U;return null===(U=le())||void 0===U?void 0:U.config},we=U=>{var L;return null===(L=le())||void 0===L?void 0:L[`_${U}`]};class ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,z)=>{this.resolve=L,this.reject=z})}wrapCallback(L){return(z,fe)=>{z?this.reject(z):this.resolve(fe),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(z):L(z,fe))}}}function Te(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const fe=L||"demo-project",Q=U.iat||0,it=U.sub||U.user_id;if(!it)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ft=Object.assign({iss:`https://securetoken.google.com/${fe}`,aud:fe,iat:Q,exp:Q+3600,auth_time:Q,sub:it,user_id:it,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(Ft)),""].join(".")}function Ne(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Re(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function V(){var U;const L=null===(U=le())||void 0===U?void 0:U.forceEnvironment;if("node"===L)return!0;if("browser"===L)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ye(){return"object"==typeof self&&self.self===self}function Ve(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Je(){const U=Ne();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function ge(){return!V()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Se(){try{return"object"==typeof indexedDB}catch{return!1}}function Fe(){return new Promise((U,L)=>{try{let z=!0;const fe="validate-browser-context-for-indexeddb-analytics-module",Q=self.indexedDB.open(fe);Q.onsuccess=()=>{Q.result.close(),z||self.indexedDB.deleteDatabase(fe),U(!0)},Q.onupgradeneeded=()=>{z=!1},Q.onerror=()=>{var it;L((null===(it=Q.error)||void 0===it?void 0:it.message)||"")}}catch(z){L(z)}})}function Be(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Ge extends Error{constructor(L,z,fe){super(z),this.code=L,this.customData=fe,this.name="FirebaseError",Object.setPrototypeOf(this,Ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rn.prototype.create)}}class rn{constructor(L,z,fe){this.service=L,this.serviceName=z,this.errors=fe}create(L,...z){const fe=z[0]||{},Q=`${this.service}/${L}`,it=this.errors[L],Ft=it?function _t(U,L){return U.replace(Qt,(z,fe)=>{const Q=L[fe];return null!=Q?String(Q):`<${fe}?>`})}(it,fe):"Error";return new Ge(Q,`${this.serviceName}: ${Ft} (${Q}).`,fe)}}const Qt=/\{\$([^}]+)}/g;function fs(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function Cr(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function cn(U,L){if(U===L)return!0;const z=Object.keys(U),fe=Object.keys(L);for(const Q of z){if(!fe.includes(Q))return!1;const it=U[Q],Ft=L[Q];if(Ur(it)&&Ur(Ft)){if(!cn(it,Ft))return!1}else if(it!==Ft)return!1}for(const Q of fe)if(!z.includes(Q))return!1;return!0}function Ur(U){return null!==U&&"object"==typeof U}function $i(U){const L=[];for(const[z,fe]of Object.entries(U))Array.isArray(fe)?fe.forEach(Q=>{L.push(encodeURIComponent(z)+"="+encodeURIComponent(Q))}):L.push(encodeURIComponent(z)+"="+encodeURIComponent(fe));return L.length?"&"+L.join("&"):""}function hi(U){const L={};return U.replace(/^\?/,"").split("&").forEach(fe=>{if(fe){const[Q,it]=fe.split("=");L[decodeURIComponent(Q)]=decodeURIComponent(it)}}),L}function En(U){const L=U.indexOf("?");if(!L)return"";const z=U.indexOf("#",L);return U.substring(L,z>0?z:void 0)}function ps(U,L){const z=new Mt(U,L);return z.subscribe.bind(z)}class Mt{constructor(L,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{L(this)}).catch(fe=>{this.error(fe)})}next(L){this.forEachObserver(z=>{z.next(L)})}error(L){this.forEachObserver(z=>{z.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,z,fe){let Q;if(void 0===L&&void 0===z&&void 0===fe)throw new Error("Missing Observer.");Q=function wt(U,L){if("object"!=typeof U||null===U)return!1;for(const z of L)if(z in U&&"function"==typeof U[z])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:z,complete:fe},void 0===Q.next&&(Q.next=Hi),void 0===Q.error&&(Q.error=Hi),void 0===Q.complete&&(Q.complete=Hi);const it=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Q.error(this.finalError):Q.complete()}catch{}}),this.observers.push(Q),it}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,L)}sendOne(L,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{z(this.observers[L])}catch(fe){typeof console<"u"&&console.error&&console.error(fe)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Hi(){}const dr=1e3,Ti=2,je=144e5,_e=.5;function tt(U,L=dr,z=Ti){const fe=L*Math.pow(z,U),Q=Math.round(_e*fe*(Math.random()-.5)*2);return Math.min(je,fe+Q)}function kt(U){return U&&U._delegate?U._delegate:U}},4709:(ht,Ie,P)=>{var g=P(4650);let K=null;function O(){return K}class ee{}const te=new g.OlP("DocumentToken");let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return function ae(){return(0,g.LFG)(j)}()},providedIn:"platform"}),n})();const se=new g.OlP("Location Initialized");let j=(()=>{class n extends de{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){B()?this._history.pushState(t,r,o):this._location.hash=o}replaceState(t,r,o){B()?this._history.replaceState(t,r,o):this._location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(te))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function Z(){return new j((0,g.LFG)(te))}()},providedIn:"platform"}),n})();function B(){return!!window.history.pushState}function Ue(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ee(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function He(n){return n&&"?"!==n[0]?"?"+n:n}let st=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(be)},providedIn:"root"}),n})();const le=new g.OlP("appBaseHref");let be=(()=>{class n extends st{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,g.f3M)(te).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ue(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+He(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+He(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+He(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(le,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),De=(()=>{class n extends st{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ue(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+He(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+He(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(de),g.LFG(le,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),ke=(()=>{class n{constructor(t){this._subject=new g.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Ne(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Ee(Te(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+He(r))}normalize(t){return n.stripTrailingSlash(function ve(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Te(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=He,n.joinWithSlash=Ue,n.stripTrailingSlash=Ee,n.\u0275fac=function(t){return new(t||n)(g.LFG(st))},n.\u0275prov=g.Yz7({token:n,factory:function(){return function we(){return new ke((0,g.LFG)(st))}()},providedIn:"root"}),n})();function Te(n){return n.replace(/\/index.html$/,"")}class Bn{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let pi=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,l)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Bn(o.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,l),Cn(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Cn(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Cn(n,e){n.context.$implicit=e.item}let Ls=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Lt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){dc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){dc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.s_b),g.Y36(g.Rgc))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Lt{constructor(){this.$implicit=null,this.ngIf=null}}function dc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,g.AaK)(e)}'.`)}let Xa=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const Mr="server";function eu(n){return n===Mr}let vo=(()=>{class n{}return n.\u0275prov=(0,g.Yz7)({token:n,providedIn:"root",factory:()=>new nu((0,g.LFG)(te),window)}),n})();class nu{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Hs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=_o(this.window.history)||_o(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function _o(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class vs extends ee{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ha extends vs{static makeCurrent(){!function X(n){K||(K=n)}(new ha)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function So(){return fa=fa||document.querySelector("base"),fa?fa.getAttribute("href"):null}();return null==t?null:function ni(n){_s=_s||document.createElement("a"),_s.setAttribute("href",n);const e=_s.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){fa=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function fr(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let _s,fa=null;const fu=new g.OlP("TRANSITION_ID"),Zs=[{provide:g.ip1,useFactory:function Yl(n,e,t){return()=>{t.get(g.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[fu,te,g.zs3],multi:!0}];let Ph=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Ks=new g.OlP("EventManagerPlugins");let pa=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const l=o[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Ks),g.LFG(g.R0b))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class Tn{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let ga=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const o=this.usageCount;let u=o.get(t)??0;return u+=r,u>0?o.set(t,u):o.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),Yi=(()=>{class n extends ga{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(u=>u.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const o=this.doc.createElement("style");o.textContent=r,t.appendChild(o);const u=this.styleRef.get(r);u?u.push(o):this.styleRef.set(r,[o])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(te))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Qi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ao=/%COMP%/g,Mo=new g.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function va(n,e){return e.flat(100).map(t=>t.replace(Ao,n))}function mu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let mr=(()=>{class n{constructor(t,r,o,u){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new _a(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const o=this.getOrCreateRenderer(t,r);return o instanceof Rc?o.applyToHost(t):o instanceof Ea&&o.applyStyles(),o}getOrCreateRenderer(t,r){const o=this.rendererByCompId;let u=o.get(r.id);if(!u){const l=this.eventManager,m=this.sharedStylesHost,w=this.removeStylesOnCompDestory;switch(r.encapsulation){case g.ifc.Emulated:u=new Rc(l,m,r,this.appId,w);break;case g.ifc.ShadowDom:return new yu(l,m,t,r);default:u=new Ea(l,m,r,w)}u.onDestroy=()=>o.delete(r.id),o.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(pa),g.LFG(Yi),g.LFG(g.AFp),g.LFG(Mo))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();class _a{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Qi[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(wa(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(wa(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=Qi[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Qi[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(g.JOm.DashCase|g.JOm.Important)?e.style.setProperty(t,r,o&g.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&g.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,mu(r)):this.eventManager.addEventListener(e,t,mu(r))}}function wa(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class yu extends _a{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=va(o.id,o.styles);for(const l of u){const m=document.createElement("style");m.textContent=l,this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Ea extends _a{constructor(e,t,r,o,u=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=o,this.rendererUsageCount=0,this.styles=va(u,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Rc extends Ea{constructor(e,t,r,o,u){const l=o+"-"+r.id;super(e,t,r,u,l),this.contentAttr=function xo(n){return"_ngcontent-%COMP%".replace(Ao,n)}(l),this.hostAttr=function ya(n){return"_nghost-%COMP%".replace(Ao,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Ys=(()=>{class n extends Tn{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(te))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const Ia=["alt","control","meta","shift"],Jl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},xi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let vu=(()=>{class n extends Tn{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),l="code."),Ia.forEach(b=>{const A=r.indexOf(b);A>-1&&(r.splice(A,1),l+=b+".")}),l+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=o,w.fullKey=l,w}static matchEventFullKeyCode(t,r){let o=Jl[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Ia.forEach(l=>{l!==o&&(0,xi[l])(t)&&(u+=l+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(te))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();const td=(0,g.eFA)(g._c5,"browser",[{provide:g.Lbi,useValue:"browser"},{provide:g.g9A,useValue:function _i(){ha.makeCurrent()},multi:!0},{provide:te,useFactory:function ed(){return(0,g.RDi)(document),document},deps:[]}]),Nc=new g.OlP(""),Eu=[{provide:g.rWj,useClass:class Ql{addToWindow(e){g.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},g.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),g.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),g.dqk.frameworkStabilizers||(g.dqk.frameworkStabilizers=[]),g.dqk.frameworkStabilizers.push(r=>{const o=g.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const m=function(w){l=l||w,u--,0==u&&r(l)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:g.lri,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]},{provide:g.dDg,useClass:g.dDg,deps:[g.R0b,g.eoX,g.rWj]}],Xi=[{provide:g.zSh,useValue:"root"},{provide:g.qLn,useFactory:function Op(){return new g.qLn},deps:[]},{provide:Ks,useClass:Ys,multi:!0,deps:[te,g.R0b,g.Lbi]},{provide:Ks,useClass:vu,multi:!0,deps:[te]},{provide:mr,useClass:mr,deps:[pa,Yi,g.AFp,Mo]},{provide:g.FYo,useExisting:mr},{provide:ga,useExisting:Yi},{provide:Yi,useClass:Yi,deps:[te]},{provide:pa,useClass:pa,deps:[Ks,g.R0b]},{provide:class jl{},useClass:Ph,deps:[]},[]];let Da=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:g.AFp,useValue:t.appId},{provide:fu,useExisting:g.AFp},Zs]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Nc,12))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[...Xi,...Eu],imports:[Xa,g.hGG]}),n})(),Fh=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(te))},n.\u0275prov=g.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function ba(){return new Fh((0,g.LFG)(te))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var ln=P(8996),Nr=P(7669);function ut(...n){const e=(0,Nr.yG)(n);return(0,ln.D)(n,e)}var or=P(7579);class wi extends or.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Is=(0,P(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var qr=P(9751);const{isArray:Fc}=Array,{getPrototypeOf:Au,prototype:D,keys:C}=Object;function M(n){if(1===n.length){const e=n[0];if(Fc(e))return{args:e,keys:null};if(function F(n){return n&&"object"==typeof n&&Au(n)===D}(e)){const t=C(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var W=P(4671),H=P(4004);const{isArray:Ce}=Array;function ct(n){return(0,H.U)(e=>function nt(n,e){return Ce(e)?n(...e):n(e)}(n,e))}function ot(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var lt=P(5403),St=P(9672);function Or(...n){const e=(0,Nr.yG)(n),t=(0,Nr.jO)(n),{args:r,keys:o}=M(n);if(0===r.length)return(0,ln.D)([],e);const u=new qr.y(function Zn(n,e,t=W.y){return r=>{Po(e,()=>{const{length:o}=n,u=new Array(o);let l=o,m=o;for(let w=0;w<o;w++)Po(e,()=>{const b=(0,ln.D)(n[w],e);let A=!1;b.subscribe((0,lt.x)(r,N=>{u[w]=N,A||(A=!0,m--),m||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>ot(o,l):W.y));return t?u.pipe(ct(t)):u}function Po(n,e,t){n?(0,St.f)(t,n,e):e()}var Xs=P(8189);function Wr(...n){return function ko(){return(0,Xs.J)(1)}()((0,ln.D)(n,(0,Nr.yG)(n)))}var ri=P(8421);function Ds(n){return new qr.y(e=>{(0,ri.Xf)(n()).subscribe(e)})}var Pp=P(9635),Bh=P(576);function Mu(n,e){const t=(0,Bh.m)(n)?n:()=>n,r=o=>o.error(t());return new qr.y(e?o=>e.schedule(r,0,o):r)}var eo=P(515),jh=P(727),ii=P(4482);function ud(){return(0,ii.e)((n,e)=>{let t=null;n._refCount++;const r=(0,lt.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class kp extends qr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,ii.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new jh.w0;const t=this.getSubject();e.add(this.source.subscribe((0,lt.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=jh.w0.EMPTY)}return e}refCount(){return ud()(this)}}function Nn(n,e){return(0,ii.e)((t,r)=>{let o=null,u=0,l=!1;const m=()=>l&&!o&&r.complete();t.subscribe((0,lt.x)(r,w=>{o?.unsubscribe();let b=0;const A=u++;(0,ri.Xf)(n(w,A)).subscribe(o=(0,lt.x)(r,N=>r.next(e?e(w,N,A,b++):N),()=>{o=null,m()}))},()=>{l=!0,m()}))})}function cd(n){return n<=0?()=>eo.E:(0,ii.e)((e,t)=>{let r=0;e.subscribe((0,lt.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function $h(...n){const e=(0,Nr.yG)(n);return(0,ii.e)((t,r)=>{(e?Wr(n,t,e):Wr(n,t)).subscribe(r)})}function Ei(n,e){return(0,ii.e)((t,r)=>{let o=0;t.subscribe((0,lt.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var si=P(5577);function Hh(n){return(0,ii.e)((e,t)=>{let r=!1;e.subscribe((0,lt.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function by(n=$0){return(0,ii.e)((e,t)=>{let r=!1;e.subscribe((0,lt.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function $0(){return new Is}function Fo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ei((o,u)=>n(o,u,r)):W.y,cd(1),t?Hh(e):by(()=>new Is))}function to(n,e){return(0,Bh.m)(e)?(0,si.z)(n,e,1):(0,si.z)(n,1)}var yr=P(8505);function bs(n){return(0,ii.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,lt.x)(t,void 0,void 0,l=>{u=(0,ri.Xf)(n(l,bs(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function xu(n,e){return(0,ii.e)(function Fp(n,e,t,r,o){return(u,l)=>{let m=t,w=e,b=0;u.subscribe((0,lt.x)(l,A=>{const N=b++;w=m?n(w,A,N):(m=!0,A),r&&l.next(w)},o&&(()=>{m&&l.next(w),l.complete()})))}}(n,e,arguments.length>=2,!0))}function ld(n){return n<=0?()=>eo.E:(0,ii.e)((e,t)=>{let r=[];e.subscribe((0,lt.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Pi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ei((o,u)=>n(o,u,r)):W.y,ld(1),t?Hh(e):by(()=>new Is))}function Gh(n){return(0,ii.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Ot="primary",no=Symbol("RouteTitle");class Sy{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Lo(n){return new Sy(n)}function Ay(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],m=n[u];if(l.startsWith(":"))o[l.substring(1)]=m;else if(l!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Cs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!dd(n[o],e[o]))return!1;return!0}function dd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Zr(n){return Array.prototype.concat.apply([],n)}function Lc(n){return n.length>0?n[n.length-1]:null}function er(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function On(n){return(0,g.CqO)(n)?n:(0,g.QGY)(n)?(0,ln.D)(Promise.resolve(n)):ut(n)}const Vo=!1,Vp={exact:function My(n,e,t){if(!Ii(n.segments,e.segments)||!Ru(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!My(n.children[r],e.children[r],t))return!1;return!0},subset:Bp},qh={exact:function Up(n,e){return Cs(n,e)},subset:function Uo(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>dd(n[t],e[t]))},ignored:()=>!0};function Wh(n,e,t){return Vp[t.paths](n.root,e.root,t.matrixParams)&&qh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Bp(n,e,t){return Zh(n,e,e.segments,t)}function Zh(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Ii(o,t)||e.hasChildren()||!Ru(o,t,r))}if(n.segments.length===t.length){if(!Ii(n.segments,t)||!Ru(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Bp(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Ii(n.segments,o)&&Ru(n.segments,o,r)&&n.children[Ot])&&Zh(n.children[Ot],e,u,r)}}function Ru(n,e,t){return e.every((r,o)=>qh[t](n[o].parameters,r.parameters))}class Bo{constructor(e=new Vt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lo(this.queryParams)),this._queryParamMap}toString(){return Kh.serialize(this)}}class Vt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,er(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Uc(this)}}class Aa{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Lo(this.parameters)),this._parameterMap}toString(){return pd(this)}}function Ii(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Vc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return new Ma},providedIn:"root"}),n})();class Ma{parse(e){const t=new Py(e);return new Bo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ts(e.root,!0)}`,r=function Ny(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Bc(t)}=${Bc(o)}`).join("&"):`${Bc(t)}=${Bc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function jp(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Kh=new Ma;function Uc(n){return n.segments.map(e=>pd(e)).join("/")}function Ts(n,e){if(!n.hasChildren())return Uc(n);if(e){const t=n.children[Ot]?Ts(n.children[Ot],!1):"",r=[];return er(n.children,(o,u)=>{u!==Ot&&r.push(`${u}:${Ts(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ry(n,e){let t=[];return er(n.children,(r,o)=>{o===Ot&&(t=t.concat(e(r,o)))}),er(n.children,(r,o)=>{o!==Ot&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Ot?[Ts(n.children[Ot],!1)]:[`${o}:${Ts(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ot]?`${Uc(n)}/${t[0]}`:`${Uc(n)}/(${t.join("//")})`}}function hd(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Bc(n){return hd(n).replace(/%3B/gi,";")}function xa(n){return hd(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fd(n){return decodeURIComponent(n)}function $p(n){return fd(n.replace(/\+/g,"%20"))}function pd(n){return`${xa(n.path)}${function Yh(n){return Object.keys(n).map(e=>`;${xa(e)}=${xa(n[e])}`).join("")}(n.parameters)}`}const Oy=/^[^\/()?;=#]+/;function jo(n){const e=n.match(Oy);return e?e[0]:""}const Qh=/^[^=?&#]+/,Jh=/^[^&#]+/;class Py{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Vt([],{}):new Vt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ot]=new Vt(e,t)),r}parseSegment(){const e=jo(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new g.vHH(4009,Vo);return this.capture(e),new Aa(fd(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=jo(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=jo(this.remaining);o&&(r=o,this.capture(r))}e[fd(t)]=fd(r)}parseQueryParam(e){const t=function Hp(n){const e=n.match(Qh);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Gp(n){const e=n.match(Jh);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=$p(t),u=$p(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=jo(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new g.vHH(4010,Vo);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Ot);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Ot]:new Vt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new g.vHH(4011,Vo)}}function gd(n){return n.segments.length>0?new Vt([],{[Ot]:n}):n}function jc(n){const e={};for(const r of Object.keys(n.children)){const u=jc(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function Ra(n){if(1===n.numberOfChildren&&n.children[Ot]){const e=n.children[Ot];return new Vt(n.segments.concat(e.segments),e.children)}return n}(new Vt(n.segments,e))}function ki(n){return n instanceof Bo}const md=!1;function Ly(n,e,t,r,o){if(0===t.length)return ro(e.root,e.root,e.root,r,o);const u=function Hc(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new yd(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return er(u.outlets,(w,b)=>{m[b]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new yd(t,e,r)}(t);return u.toRoot()?ro(e.root,e.root,new Vt([],{}),r,o):function l(w){const b=function Kr(n,e,t,r){if(n.isAbsolute)return new es(e.root,!0,0);if(-1===r)return new es(t,t===e.root,0);return function $o(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new g.vHH(4005,md&&"Invalid number of '../'");o=r.segments.length}return new es(r,!1,o-u)}(t,r+(Nu(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),A=b.processChildren?Ho(b.segmentGroup,b.index,u.commands):Oa(b.segmentGroup,b.index,u.commands);return ro(e.root,b.segmentGroup,A,r,o)}(n.snapshot?._lastPathIndex)}function Nu(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Na(n){return"object"==typeof n&&null!=n&&n.outlets}function ro(n,e,t,r,o){let l,u={};r&&er(r,(w,b)=>{u[b]=Array.isArray(w)?w.map(A=>`${A}`):`${w}`}),l=n===e?t:Ou(n,e,t);const m=gd(jc(l));return new Bo(m,u,o)}function Ou(n,e,t){const r={};return er(n.children,(o,u)=>{r[u]=o===e?t:Ou(o,e,t)}),new Vt(n.segments,r)}class yd{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Nu(r[0]))throw new g.vHH(4003,md&&"Root segment cannot have matrix parameters");const o=r.find(Na);if(o&&o!==Lc(r))throw new g.vHH(4004,md&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class es{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Oa(n,e,t){if(n||(n=new Vt([],{})),0===n.segments.length&&n.hasChildren())return Ho(n,e,t);const r=function _d(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],m=t[r];if(Na(m))break;const w=`${m}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&b&&"object"==typeof b&&void 0===b.outlets){if(!Ss(w,b,l))return u;r+=2}else{if(!Ss(w,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Vt(n.segments.slice(0,r.pathIndex),{});return u.children[Ot]=new Vt(n.segments.slice(r.pathIndex),n.children),Ho(u,0,o)}return r.match&&0===o.length?new Vt(n.segments,{}):r.match&&!n.hasChildren()?Xh(n,e,t):r.match?Ho(n,0,o):Xh(n,e,t)}function Ho(n,e,t){if(0===t.length)return new Vt(n.segments,{});{const r=function vd(n){return Na(n[0])?n[0].outlets:{[Ot]:n}}(t),o={};return!r[Ot]&&n.children[Ot]&&1===n.numberOfChildren&&0===n.children[Ot].segments.length?Ho(n.children[Ot],e,t):(er(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[l]=Oa(n.children[l],e,u))}),er(n.children,(u,l)=>{void 0===r[l]&&(o[l]=u)}),new Vt(n.segments,o))}}function Xh(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Na(u)){const w=qp(u.outlets);return new Vt(r,w)}if(0===o&&Nu(t[0])){r.push(new Aa(n.segments[e].path,Wp(t[0]))),o++;continue}const l=Na(u)?u.outlets[Ot]:`${u}`,m=o<t.length-1?t[o+1]:null;l&&m&&Nu(m)?(r.push(new Aa(l,Wp(m))),o+=2):(r.push(new Aa(l,{})),o++)}return new Vt(r,{})}function qp(n){const e={};return er(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Xh(new Vt([],{}),0,t))}),e}function Wp(n){const e={};return er(n,(t,r)=>e[r]=`${t}`),e}function Ss(n,e,t){return n==t.path&&Cs(e,t.parameters)}const Pa="imperative";class Di{constructor(e,t){this.id=e,this.url=t}}class Gc extends Di{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Fi extends Di{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class zc extends Di{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vr extends Di{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=16}}class wd extends Di{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ef extends Di{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tf extends Di{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class io extends Di{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Pu extends Di{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qc extends Di{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ed{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Zp{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Id{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kp{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Yp{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vy{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Qp{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let p=(()=>{class n{createUrlTree(t,r,o,u,l,m){return Ly(t||r.root,o,u,l,m)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})(),S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(e){return p.\u0275fac(e)},providedIn:"root"}),n})();class R{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=q(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=q(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=oe(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return oe(e,this._root).map(t=>t.value)}}function q(n,e){if(n===e.value)return e;for(const t of e.children){const r=q(n,t);if(r)return r}return null}function oe(n,e){if(n===e.value)return[e];for(const t of e.children){const r=oe(n,t);if(r.length)return r.unshift(e),r}return[]}class Oe{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Xe(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Et extends R{constructor(e,t){super(e),this.snapshot=t,zo(this,e)}toString(){return this.snapshot.toString()}}function pt(n,e){const t=function tr(n,e){const l=new Go([],{},{},"",{},Ot,e,null,n.root,-1,{});return new ts("",new Oe(l,[]))}(n,e),r=new wi([new Aa("",{})]),o=new wi({}),u=new wi({}),l=new wi({}),m=new wi(""),w=new Pr(r,o,l,m,u,Ot,e,t.root);return w.snapshot=t.root,new Et(new Oe(w,[]),t)}class Pr{constructor(e,t,r,o,u,l,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this.title=this.data?.pipe((0,H.U)(b=>b[no]))??ut(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,H.U)(e=>Lo(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,H.U)(e=>Lo(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Wc(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function Jp(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Go{get title(){return this.data?.[no]}constructor(e,t,r,o,u,l,m,w,b,A,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=m,this.routeConfig=w,this._urlSegment=b,this._lastPathIndex=A,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Lo(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Lo(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ts extends R{constructor(e,t){super(t),this.url=e,zo(this,t)}toString(){return Zc(this._root)}}function zo(n,e){e.value._routerState=n,e.children.forEach(t=>zo(n,t))}function Zc(n){const e=n.children.length>0?` { ${n.children.map(Zc).join(", ")} } `:"";return`${n.value}${e}`}function Kc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Cs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Cs(e.params,t.params)||n.params.next(t.params),function zh(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Cs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Cs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Yc(n,e){const t=Cs(n.params,e.params)&&function xy(n,e){return Ii(n,e)&&n.every((t,r)=>Cs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Yc(n.parent,e.parent))}function Qc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function H0(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Qc(n,r,o);return Qc(n,r)})}(n,e,t);return new Oe(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(m=>Qc(n,m)),l}}const r=function Jc(n){return new Pr(new wi(n.url),new wi(n.params),new wi(n.queryParams),new wi(n.fragment),new wi(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Qc(n,u));return new Oe(r,o)}}const Xc="ngNavigationCancelingError";function PD(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=ki(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=kD(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function kD(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Xc]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Uy(n){return G0(n)&&ki(n.url)}function G0(n){return n&&n[Xc]}class FD{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new nf,this.attachRef=null}}let nf=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new FD,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const eg=!1;let tg=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ot,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.parentContexts=(0,g.f3M)(nf),this.location=(0,g.f3M)(g.s_b),this.changeDetector=(0,g.f3M)(g.sBO),this.environmentInjector=(0,g.f3M)(g.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new g.vHH(4012,eg);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new g.vHH(4012,eg);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new g.vHH(4012,eg);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new g.vHH(4013,eg);this._activatedRoute=t;const o=this.location,l=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,w=new ng(t,m,o.injector);if(r&&function LD(n){return!!n.resolveComponentFactory}(r)){const b=r.resolveComponentFactory(l);this.activated=o.createComponent(b,o.length,w)}else this.activated=o.createComponent(l,{index:o.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[g.TTD]}),n})();class ng{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Pr?this.route:e===nf?this.childContexts:this.parent.get(e,t)}}let rf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=g.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[g.jDz],decls:1,vars:0,template:function(t,r){1&t&&g._UZ(0,"router-outlet")},dependencies:[tg],encapsulation:2}),n})();function z0(n,e){return n.providers&&!n._injector&&(n._injector=(0,g.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function By(n){const e=n.children&&n.children.map(By),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ot&&(t.component=rf),t}function ns(n){return n.outlet||Ot}function $D(n,e){const t=n.filter(r=>ns(r)===e);return t.push(...n.filter(r=>ns(r)!==e)),t}function ig(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class jy{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Kc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Xe(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),er(o,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Xe(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Xe(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Xe(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Vy(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Kp(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Kc(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(m.contexts),l.attachRef=m.componentRef,l.route=m.route.value,l.outlet&&l.outlet.attach(m.componentRef,m.route.value),Kc(m.route.value),this.activateChildRoutes(e,null,l.children)}else{const m=ig(o.snapshot),w=m?.get(g._Vd)??null;l.attachRef=null,l.route=o,l.resolver=w,l.injector=m,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class $y{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class af{constructor(e,t){this.component=e,this.route=t}}function q0(n,e,t){const r=n._root;return bd(r,e?e._root:null,t,[r.value])}function Dd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,g.Z0I)(n)?e.get(n):n:r}function bd(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Xe(e);return n.children.forEach(l=>{(function W0(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const w=function Hy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ii(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ii(n.url,e.url)||!Cs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yc(n,e)||!Cs(n.queryParams,e.queryParams);default:return!Yc(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new $y(r)):(u.data=l.data,u._resolvedData=l._resolvedData),bd(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new af(m.outlet.component,l))}else l&&sg(e,m,o),o.canActivateChecks.push(new $y(r)),bd(n,null,u.component?m?m.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),er(u,(l,m)=>sg(l,t.getContext(m),o)),o}function sg(n,e,t){const r=Xe(n),o=n.value;er(r,(u,l)=>{sg(u,o.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new af(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function el(n){return"function"==typeof n}function zy(n){return n instanceof Is||"EmptyError"===n?.name}const Cd=Symbol("INITIAL_VALUE");function ka(){return Nn(n=>Or(n.map(e=>e.pipe(cd(1),$h(Cd)))).pipe((0,H.U)(e=>{for(const t of e)if(!0!==t){if(t===Cd)return Cd;if(!1===t||t instanceof Bo)return t}return!0}),Ei(e=>e!==Cd),cd(1)))}function X0(n){return(0,Pp.z)((0,yr.b)(e=>{if(ki(e))throw PD(0,e)}),(0,H.U)(e=>!0===e))}const Zy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ky(n,e,t,r,o){const u=Yy(n,e,t);return u.matched?function Wy(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?ut(o.map(l=>{const m=Dd(l,n);return On(function GD(n){return n&&el(n.canMatch)}(m)?m.canMatch(e,t):n.runInContext(()=>m(e,t)))})).pipe(ka(),X0()):ut(!0)}(r=z0(e,r),e,t).pipe((0,H.U)(l=>!0===l?u:{...Zy})):ut(u)}function Yy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Zy}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||Ay)(t,n,e);if(!o)return{...Zy};const u={};er(o.posParams,(m,w)=>{u[w]=m.path});const l=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function uf(n,e,t,r){if(t.length>0&&function cf(n,e,t){return t.some(r=>Fa(n,e,r)&&ns(r)!==Ot)}(n,t,r)){const u=new Vt(e,function KD(n,e,t,r){const o={};o[Ot]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ns(u)!==Ot){const l=new Vt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,o[ns(u)]=l}return o}(n,e,r,new Vt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function YD(n,e,t){return t.some(r=>Fa(n,e,r))}(n,t,r)){const u=new Vt(n.segments,function pA(n,e,t,r,o){const u={};for(const l of r)if(Fa(n,t,l)&&!o[ns(l)]){const m=new Vt([],{});m._sourceSegment=n,m._segmentIndexShift=e.length,u[ns(l)]=m}return{...o,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const o=new Vt(n.segments,n.children);return o._sourceSegment=n,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:t}}function Fa(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Sd(n,e,t,r){return!!(ns(n)===r||r!==Ot&&Fa(e,t,n))&&("**"===n.path||Yy(e,n,t).matched)}function ew(n,e,t){return 0===e.length&&!n.children[t]}const lf=!1;class ag{constructor(e){this.segmentGroup=e||null}}class tw{constructor(e){this.urlTree=e}}function df(n){return Mu(new ag(n))}function Qy(n){return Mu(new tw(n))}class QD{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=uf(this.urlTree.root,[],[],this.config).segmentGroup,t=new Vt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Ot).pipe((0,H.U)(u=>this.createUrlTree(jc(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(bs(u=>{if(u instanceof tw)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof ag?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Ot).pipe((0,H.U)(o=>this.createUrlTree(jc(o),e.queryParams,e.fragment))).pipe(bs(o=>{throw o instanceof ag?this.noMatchError(o):o}))}noMatchError(e){return new g.vHH(4002,lf)}createUrlTree(e,t,r){const o=gd(e);return new Bo(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,H.U)(u=>new Vt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,ln.D)(o).pipe(to(u=>{const l=r.children[u],m=$D(t,u);return this.expandSegmentGroup(e,m,l,u).pipe((0,H.U)(w=>({segment:w,outlet:u})))}),xu((u,l)=>(u[l.outlet]=l.segment,u),{}),Pi())}expandSegment(e,t,r,o,u,l){return(0,ln.D)(r).pipe(to(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,l).pipe(bs(b=>{if(b instanceof ag)return ut(null);throw b}))),Fo(m=>!!m),bs((m,w)=>{if(zy(m))return ew(t,o,u)?ut(new Vt([],{})):df(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,l,m){return Sd(o,t,u,l)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,l):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l):df(t):df(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Qy(u):this.lineralizeSegments(r,u).pipe((0,si.z)(l=>{const m=new Vt(l,{});return this.expandSegment(e,m,t,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:m,consumedSegments:w,remainingSegments:b,positionalParamSegments:A}=Yy(t,o,u);if(!m)return df(t);const N=this.applyRedirectCommands(w,o.redirectTo,A);return o.redirectTo.startsWith("/")?Qy(N):this.lineralizeSegments(o,N).pipe((0,si.z)($=>this.expandSegment(e,t,r,$.concat(b),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=z0(r,e),r.loadChildren?(r._loadedRoutes?ut({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,H.U)(m=>(r._loadedRoutes=m.routes,r._loadedInjector=m.injector,new Vt(o,{})))):ut(new Vt(o,{}))):Ky(t,r,o,e).pipe(Nn(({matched:l,consumedSegments:m,remainingSegments:w})=>l?this.getChildConfig(e=r._injector??e,r,o).pipe((0,si.z)(A=>{const N=A.injector??e,$=A.routes,{segmentGroup:J,slicedSegments:ce}=uf(t,m,w,$),Pe=new Vt(J.segments,J.children);if(0===ce.length&&Pe.hasChildren())return this.expandChildren(N,$,Pe).pipe((0,H.U)($t=>new Vt(m,$t)));if(0===$.length&&0===ce.length)return ut(new Vt(m,{}));const $e=ns(r)===u;return this.expandSegment(N,Pe,$,ce,$e?Ot:u,!0).pipe((0,H.U)(qt=>new Vt(m.concat(qt.segments),qt.children)))})):df(t)))}getChildConfig(e,t,r){return t.children?ut({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ut({routes:t._loadedRoutes,injector:t._loadedInjector}):function ZD(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?ut(!0):ut(o.map(l=>{const m=Dd(l,n);return On(function Gy(n){return n&&el(n.canLoad)}(m)?m.canLoad(e,t):n.runInContext(()=>m(e,t)))})).pipe(ka(),X0())}(e,t,r).pipe((0,si.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,yr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function Jy(n){return Mu(kD(lf,3))}())):ut({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return ut(r);if(o.numberOfChildren>1||!o.children[Ot])return e.redirectTo,Mu(new g.vHH(4e3,lf));o=o.children[Ot]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Bo(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return er(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return er(t.children,(m,w)=>{l[w]=this.createSegmentGroup(e,m,r,o)}),new Vt(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new g.vHH(4001,lf);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class JD{}class tb{constructor(e,t,r,o,u,l,m){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=m}recognize(){const e=uf(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ot).pipe((0,H.U)(t=>{if(null===t)return null;const r=new Go([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ot,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Oe(r,t),u=new ts(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=Wc(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,ln.D)(Object.keys(r.children)).pipe(to(o=>{const u=r.children[o],l=$D(t,o);return this.processSegmentGroup(e,l,u,o)}),xu((o,u)=>o&&u?(o.push(...u),o):null),function Cy(n,e=!1){return(0,ii.e)((t,r)=>{let o=0;t.subscribe((0,lt.x)(r,u=>{const l=n(u,o++);(l||e)&&r.next(u),!l&&r.complete()}))})}(o=>null!==o),Hh(null),Pi(),(0,H.U)(o=>{if(null===o)return null;const u=rl(o);return function nb(n){n.sort((e,t)=>e.value.outlet===Ot?-1:t.value.outlet===Ot?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,ln.D)(t).pipe(to(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,o,u)),Fo(l=>!!l),bs(l=>{if(zy(l))return ew(r,o,u)?ut([]):ut(null);throw l}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!Sd(t,r,o,u))return ut(null);let l;if("**"===t.path){const m=o.length>0?Lc(o).parameters:{},w=iw(r)+o.length;l=ut({snapshot:new Go(o,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,sb(t),ns(t),t.component??t._loadedComponent??null,t,rw(r),w,tv(t)),consumedSegments:[],remainingSegments:[]})}else l=Ky(r,t,o,e).pipe((0,H.U)(({matched:m,consumedSegments:w,remainingSegments:b,parameters:A})=>{if(!m)return null;const N=iw(r)+w.length;return{snapshot:new Go(w,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,sb(t),ns(t),t.component??t._loadedComponent??null,t,rw(r),N,tv(t)),consumedSegments:w,remainingSegments:b}}));return l.pipe(Nn(m=>{if(null===m)return ut(null);const{snapshot:w,consumedSegments:b,remainingSegments:A}=m;e=t._injector??e;const N=t._loadedInjector??e,$=function rb(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:J,slicedSegments:ce}=uf(r,b,A,$.filter($e=>void 0===$e.redirectTo));if(0===ce.length&&J.hasChildren())return this.processChildren(N,$,J).pipe((0,H.U)($e=>null===$e?null:[new Oe(w,$e)]));if(0===$.length&&0===ce.length)return ut([new Oe(w,[])]);const Pe=ns(t)===u;return this.processSegment(N,$,J,ce,Pe?Ot:u).pipe((0,H.U)($e=>null===$e?null:[new Oe(w,$e)]))}))}}function ib(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function rl(n){const e=[],t=new Set;for(const r of n){if(!ib(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=rl(r.children);e.push(new Oe(r.value,o))}return e.filter(r=>!t.has(r))}function rw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function iw(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function sb(n){return n.data||{}}function tv(n){return n.resolve||{}}function uw(n){return"string"==typeof n.title||null===n.title}function rs(n){return Nn(e=>{const t=n(e);return t?(0,ln.D)(t).pipe((0,H.U)(()=>e)):ut(e)})}const Md=new g.OlP("ROUTES");let rv=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ut(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=On(t.loadComponent()).pipe((0,H.U)(cw),(0,yr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Gh(()=>{this.componentLoaders.delete(t)})),o=new kp(r,()=>new or.x).pipe(ud());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ut({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,H.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,b,A=!1;Array.isArray(m)?b=m:(w=m.create(t).injector,b=Zr(w.get(Md,[],g.XFs.Self|g.XFs.Optional)));return{routes:b.map(By),injector:w}}),Gh(()=>{this.childrenLoaders.delete(r)})),l=new kp(u,()=>new or.x).pipe(ud());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return On(t()).pipe((0,H.U)(cw),(0,si.z)(o=>o instanceof g.YKP||Array.isArray(o)?ut(o):(0,ln.D)(this.compiler.compileModuleAsync(o))))}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(g.zs3),g.LFG(g.Sil))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function cw(n){return function cb(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let ug=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new or.x,this.configLoader=(0,g.f3M)(rv),this.environmentInjector=(0,g.f3M)(g.lqb),this.urlSerializer=(0,g.f3M)(Vc),this.rootContexts=(0,g.f3M)(nf),this.navigationId=0,this.afterPreactivation=()=>ut(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=o=>this.events.next(new Zp(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new Ed(o))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new wi({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Pa,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ei(r=>0!==r.id),(0,H.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Nn(r=>{let o=!1,u=!1;return ut(r).pipe((0,yr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Nn(l=>{const m=t.browserUrlTree.toString(),w=!t.navigated||l.extractedUrl.toString()!==m||m!==t.currentUrlTree.toString();if(!w&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const A="";return this.events.next(new vr(l.id,t.serializeUrl(r.rawUrl),A,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),eo.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return lw(l.source)&&(t.browserUrlTree=l.extractedUrl),ut(l).pipe(Nn(A=>{const N=this.transitions?.getValue();return this.events.next(new Gc(A.id,this.urlSerializer.serialize(A.extractedUrl),A.source,A.restoredState)),N!==this.transitions?.getValue()?eo.E:Promise.resolve(A)}),function ev(n,e,t,r){return Nn(o=>function Xy(n,e,t,r,o){return new QD(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,H.U)(u=>({...o,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,yr.b)(A=>{this.currentNavigation={...this.currentNavigation,finalUrl:A.urlAfterRedirects},r.urlAfterRedirects=A.urlAfterRedirects}),function gA(n,e,t,r,o){return(0,si.z)(u=>function eb(n,e,t,r,o,u,l="emptyOnly"){return new tb(n,e,t,r,o,l,u).recognize().pipe(Nn(m=>null===m?function XD(n){return new qr.y(e=>e.error(n))}(new JD):ut(m)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,o).pipe((0,H.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,yr.b)(A=>{if(r.targetSnapshot=A.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!A.extras.skipLocationChange){const $=t.urlHandlingStrategy.merge(A.urlAfterRedirects,A.rawUrl);t.setBrowserUrl($,A)}t.browserUrlTree=A.urlAfterRedirects}const N=new ef(A.id,this.urlSerializer.serialize(A.extractedUrl),this.urlSerializer.serialize(A.urlAfterRedirects),A.targetSnapshot);this.events.next(N)}));if(w&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:A,extractedUrl:N,source:$,restoredState:J,extras:ce}=l,Pe=new Gc(A,this.urlSerializer.serialize(N),$,J);this.events.next(Pe);const $e=pt(N,this.rootComponentType).snapshot;return ut(r={...l,targetSnapshot:$e,urlAfterRedirects:N,extras:{...ce,skipLocationChange:!1,replaceUrl:!1}})}{const A="";return this.events.next(new vr(l.id,t.serializeUrl(r.extractedUrl),A,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),eo.E}}),(0,yr.b)(l=>{const m=new tf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(m)}),(0,H.U)(l=>r={...l,guards:q0(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function nl(n,e){return(0,si.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?ut({...t,guardsResult:!0}):function Q0(n,e,t,r){return(0,ln.D)(n).pipe((0,si.z)(o=>function WD(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ut(u.map(m=>{const w=ig(e)??o,b=Dd(m,w);return On(function tl(n){return n&&el(n.canDeactivate)}(b)?b.canDeactivate(n,e,t,r):w.runInContext(()=>b(n,e,t,r))).pipe(Fo())})).pipe(ka()):ut(!0)}(o.component,o.route,t,e,r)),Fo(o=>!0!==o,!0))}(l,r,o,n).pipe((0,si.z)(m=>m&&function HD(n){return"boolean"==typeof n}(m)?function qy(n,e,t,r){return(0,ln.D)(e).pipe(to(o=>Wr(function qD(n,e){return null!==n&&e&&e(new Id(n)),ut(!0)}(o.route.parent,r),function zD(n,e){return null!==n&&e&&e(new Yp(n)),ut(!0)}(o.route,r),function Td(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function fA(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Ds(()=>ut(l.guards.map(w=>{const b=ig(l.node)??t,A=Dd(w,b);return On(function K0(n){return n&&el(n.canActivateChild)}(A)?A.canActivateChild(r,n):b.runInContext(()=>A(r,n))).pipe(Fo())})).pipe(ka())));return ut(u).pipe(ka())}(n,o.path,t),function J0(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ut(!0);const o=r.map(u=>Ds(()=>{const l=ig(e)??t,m=Dd(u,l);return On(function Z0(n){return n&&el(n.canActivate)}(m)?m.canActivate(e,n):l.runInContext(()=>m(e,n))).pipe(Fo())}));return ut(o).pipe(ka())}(n,o.route,t))),Fo(o=>!0!==o,!0))}(r,u,n,e):ut(m)),(0,H.U)(m=>({...t,guardsResult:m})))})}(this.environmentInjector,l=>this.events.next(l)),(0,yr.b)(l=>{if(r.guardsResult=l.guardsResult,ki(l.guardsResult))throw PD(0,l.guardsResult);const m=new io(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(m)}),Ei(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),rs(l=>{if(l.guards.canActivateChecks.length)return ut(l).pipe((0,yr.b)(m=>{const w=new Pu(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}),Nn(m=>{let w=!1;return ut(m).pipe(function sw(n,e){return(0,si.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return ut(t);let u=0;return(0,ln.D)(o).pipe(to(l=>function ow(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!uw(o)&&(u[no]=o.title),function ob(n,e,t,r){const o=function aw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return ut({});const u={};return(0,ln.D)(o).pipe((0,si.z)(l=>function ab(n,e,t,r){const o=ig(e)??r,u=Dd(n,o);return On(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(Fo(),(0,yr.b)(m=>{u[l]=m}))),ld(1),function Ty(n){return(0,H.U)(()=>n)}(u),bs(l=>zy(l)?eo.E:Mu(l)))}(u,n,e,r).pipe((0,H.U)(l=>(n._resolvedData=l,n.data=Wc(n,t).resolve,o&&uw(o)&&(n.data[no]=o.title),null)))}(l.route,r,n,e)),(0,yr.b)(()=>u++),ld(1),(0,si.z)(l=>u===o.length?ut(t):eo.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,yr.b)({next:()=>w=!0,complete:()=>{w||(t.restoreHistory(m),this.cancelNavigationTransition(m,"",2))}}))}),(0,yr.b)(m=>{const w=new qc(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(w)}))}),rs(l=>{const m=w=>{const b=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,yr.b)(A=>{w.component=A}),(0,H.U)(()=>{})));for(const A of w.children)b.push(...m(A));return b};return Or(m(l.targetSnapshot.root)).pipe(Hh(),cd(1))}),rs(()=>this.afterPreactivation()),(0,H.U)(l=>{const m=function Xp(n,e,t){const r=Qc(n,e._root,t?t._root:void 0);return new Et(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:m}}),(0,yr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,H.U)(r=>(new jy(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),(0,yr.b)({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new Fi(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Gh(()=>{o||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),bs(l=>{if(u=!0,G0(l)){Uy(l)||(t.navigated=!0,t.restoreHistory(r,!0));const m=new zc(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(m),Uy(l)){const w=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),b={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||lw(r.source)};t.scheduleNavigation(w,Pa,null,b,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const m=new wd(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(m);try{r.resolve(t.errorHandler(l))}catch(w){r.reject(w)}}return eo.E}))}))}cancelNavigationTransition(t,r,o){const u=new zc(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function lw(n){return n!==Pa}let dw=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Ot);return r}getResolvedTitleForRoute(t){return t.data[no]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(Ut)},providedIn:"root"}),n})(),Ut=(()=>{class n extends dw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Fh))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),hw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(pw)},providedIn:"root"}),n})();class fw{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let pw=(()=>{class n extends fw{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const cg=new g.OlP("",{providedIn:"root",factory:()=>({})});let gw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:function(){return(0,g.f3M)(db)},providedIn:"root"}),n})(),db=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function hb(n){throw n}function fb(n,e,t){return e.parse("/")}const mA={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mw={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Li=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,g.f3M)(g.c2e),this.isNgZoneEnabled=!1,this.options=(0,g.f3M)(cg,{optional:!0})||{},this.errorHandler=this.options.errorHandler||hb,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||fb,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,g.f3M)(gw),this.routeReuseStrategy=(0,g.f3M)(hw),this.urlCreationStrategy=(0,g.f3M)(S),this.titleStrategy=(0,g.f3M)(dw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=Zr((0,g.f3M)(Md,{optional:!0})??[]),this.navigationTransitions=(0,g.f3M)(ug),this.urlSerializer=(0,g.f3M)(Vc),this.location=(0,g.f3M)(ke),this.isNgZoneEnabled=(0,g.f3M)(g.R0b)instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Bo,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=pt(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Pa,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,o){const u={replaceUrl:!0},l=o?.navigationId?o:null;if(o){const w={...o};delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(By),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:m,preserveFragment:w}=r,b=w?this.currentUrlTree.fragment:l;let A=null;switch(m){case"merge":A={...this.currentUrlTree.queryParams,...u};break;case"preserve":A=this.currentUrlTree.queryParams;break;default:A=u||null}return null!==A&&(A=this.removeEmptyProps(A)),this.urlCreationStrategy.createUrlTree(o,this.routerState,this.currentUrlTree,t,A,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=ki(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,Pa,null,r)}navigate(t,r={skipLocationChange:!1}){return function il(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new g.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...mA}:!1===r?{...mw}:r,ki(t))return Wh(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Wh(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}scheduleNavigation(t,r,o,u,l){if(this.disposed)return Promise.resolve(!1);let m,w,b,A;return l?(m=l.resolve,w=l.reject,b=l.promise):b=new Promise((N,$)=>{m=N,w=$}),A="computed"===this.canceledNavigationResolution?o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:A,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:m,reject:w,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(N=>Promise.reject(N))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===o?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class yw{}let yA=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(Ei(t=>t instanceof Fi),to(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,g.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,m=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(m,u.children??u._loadedRoutes))}return(0,ln.D)(o).pipe((0,Xs.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ut(null);const u=o.pipe((0,si.z)(l=>null===l?ut(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,ln.D)([u,l]).pipe((0,Xs.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(Li),g.LFG(g.Sil),g.LFG(g.lqb),g.LFG(yw),g.LFG(rv))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const av=new g.OlP("");let uv=(()=>{class n{constructor(t,r,o,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Gc?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Fi&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Qp&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Qp(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){g.$Z()},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac}),n})();var As=(()=>((As=As||{})[As.COMPLETE=0]="COMPLETE",As[As.FAILED=1]="FAILED",As[As.REDIRECTING=2]="REDIRECTING",As))();const so=!1;function oo(n,e){return{\u0275kind:n,\u0275providers:e}}const lv=new g.OlP("",{providedIn:"root",factory:()=>!1});function _w(){const n=(0,g.f3M)(g.zs3);return e=>{const t=n.get(g.z2F);if(e!==t.components[0])return;const r=n.get(Li),o=n.get(ww);1===n.get(dv)&&r.initialNavigation(),n.get(hv,null,g.XFs.Optional)?.setUpPreloading(),n.get(av,null,g.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.unsubscribe())}}const ww=new g.OlP(so?"bootstrap done indicator":"",{factory:()=>new or.x}),dv=new g.OlP(so?"initial navigation":"",{providedIn:"root",factory:()=>1});function Iw(){let n=[];return n=so?[{provide:g.Xts,multi:!0,useFactory:()=>{const e=(0,g.f3M)(Li);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function y(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],oo(1,n)}const hv=new g.OlP(so?"router preloader":"");function fv(n){return oo(0,[{provide:hv,useExisting:yA},{provide:yw,useExisting:n}])}const dg=!1,pv=new g.OlP(dg?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),mb=[ke,{provide:Vc,useClass:Ma},Li,nf,{provide:Pr,useFactory:function cv(n){return n.routerState.root},deps:[Li]},rv,dg?{provide:lv,useValue:!0}:[]];function bw(){return new g.PXZ("Router",Li)}let gv=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[mb,dg&&r?.enableTracing?Iw().\u0275providers:[],{provide:Md,multi:!0,useValue:t},{provide:pv,useFactory:mv,deps:[[Li,new g.FiY,new g.tp0]]},{provide:cg,useValue:r||{}},r?.useHash?{provide:st,useClass:De}:{provide:st,useClass:be},{provide:av,useFactory:()=>{const n=(0,g.f3M)(vo),e=(0,g.f3M)(g.R0b),t=(0,g.f3M)(cg),r=(0,g.f3M)(ug),o=(0,g.f3M)(Vc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new uv(o,r,n,e,t)}},r?.preloadingStrategy?fv(r.preloadingStrategy).\u0275providers:[],{provide:g.PXZ,multi:!0,useFactory:bw},r?.initialNavigation?pf(r):[],[{provide:fg,useFactory:_w},{provide:g.tb,multi:!0,useExisting:fg}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Md,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(pv,8))},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[rf]}),n})();function mv(n){if(dg&&n)throw new g.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function pf(n){return["disabled"===n.initialNavigation?oo(3,[{provide:g.ip1,multi:!0,useFactory:()=>{const e=(0,g.f3M)(Li);return()=>{e.setUpLocationChangeListener()}}},{provide:dv,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?oo(2,[{provide:dv,useValue:0},{provide:g.ip1,multi:!0,deps:[g.zs3],useFactory:e=>{const t=e.get(se,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const o=e.get(Li),u=e.get(ww);(function pb(n,e){n.events.pipe(Ei(t=>t instanceof Fi||t instanceof zc||t instanceof wd||t instanceof vr),(0,H.U)(t=>t instanceof Fi||t instanceof vr?As.COMPLETE:t instanceof zc&&(0===t.code||1===t.code)?As.REDIRECTING:As.FAILED),Ei(t=>t!==As.REDIRECTING),cd(1)).subscribe(()=>{e()})})(o,()=>{r(!0)}),e.get(ug).afterPreactivation=()=>(r(!0),u.closed?ut(void 0):u),o.initialNavigation()}))}}]).\u0275providers:[]]}const fg=new g.OlP(dg?"Router Initializer":"");let gg=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq))},n.\u0275dir=g.lG2({type:n}),n})(),Va=(()=>{class n extends gg{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,features:[g.qOj]}),n})();const ao=new g.OlP("NgValueAccessor"),_b={provide:ao,useExisting:(0,g.Gpc)(()=>sl),multi:!0},wb=new g.OlP("CompositionEventMode");let sl=(()=>{class n extends gg{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Tw(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(wb,8))},n.\u0275dir=g.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&g.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[g._Bn([_b]),g.qOj]}),n})();const Sw=!1;function ku(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function Aw(n){return null!=n&&"number"==typeof n.length}const gn=new g.OlP("NgValidators"),Ua=new g.OlP("NgAsyncValidators"),Eb=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Mw{static min(e){return function mg(n){return e=>{if(ku(e.value)||ku(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function _v(n){return e=>{if(ku(e.value)||ku(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return xw(e)}static requiredTrue(e){return function Rw(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Nw(n){return ku(n.value)||Eb.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function wv(n){return e=>ku(e.value)||!Aw(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function Ow(n){return e=>Aw(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function Pw(n){if(!n)return Rd;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(ku(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return yg(e)}static composeAsync(e){return Uw(e)}}function xw(n){return ku(n.value)?{required:!0}:null}function Rd(n){return null}function kw(n){return null!=n}function Fw(n){const e=(0,g.QGY)(n)?(0,ln.D)(n):n;if(Sw&&!(0,g.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new g.vHH(-1101,t)}return e}function Lw(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Vw(n,e){return e.map(t=>t(n))}function uo(n){return n.map(e=>function Ib(n){return!n.validate}(e)?e:t=>e.validate(t))}function yg(n){if(!n)return null;const e=n.filter(kw);return 0==e.length?null:function(t){return Lw(Vw(t,e))}}function Ev(n){return null!=n?yg(uo(n)):null}function Uw(n){if(!n)return null;const e=n.filter(kw);return 0==e.length?null:function(t){return function yv(...n){const e=(0,Nr.jO)(n),{args:t,keys:r}=M(n),o=new qr.y(u=>{const{length:l}=t;if(!l)return void u.complete();const m=new Array(l);let w=l,b=l;for(let A=0;A<l;A++){let N=!1;(0,ri.Xf)(t[A]).subscribe((0,lt.x)(u,$=>{N||(N=!0,b--),m[A]=$},()=>w--,void 0,()=>{(!w||!N)&&(b||u.next(r?ot(r,m):m),u.complete())}))}});return e?o.pipe(ct(e)):o}(Vw(t,e).map(Fw)).pipe((0,H.U)(Lw))}}function vg(n){return null!=n?Uw(uo(n)):null}function Bw(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function jw(n){return n._rawValidators}function $w(n){return n._rawAsyncValidators}function gf(n){return n?Array.isArray(n)?n:[n]:[]}function _g(n,e){return Array.isArray(n)?n.includes(e):n===e}function Hw(n,e){const t=gf(e);return gf(n).forEach(o=>{_g(t,o)||t.push(o)}),t}function mf(n,e){return gf(e).filter(t=>!_g(n,t))}class wg{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ev(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class kr extends wg{get formDirective(){return null}get path(){return null}}class ol extends wg{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Eg{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let yf=(()=>{class n extends Eg{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(ol,2))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[g.qOj]}),n})(),vf=(()=>{class n extends Eg{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(kr,10))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&g.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[g.qOj]}),n})();function Sb(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const Iv=!1,_f="VALID",Tg="INVALID",Pd="PENDING",kd="DISABLED";function wf(n){return(Sg(n)?n.validators:n)||null}function Ef(n,e){return(Sg(e)?e.asyncValidators:n)||null}function Sg(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function Gw(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new g.vHH(1e3,Iv?function Ab(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new g.vHH(1001,Iv?function Mb(n,e){return`Cannot find form control ${Sb(n,e)}`}(e,t):"")}function zw(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new g.vHH(1002,Iv?function xb(n,e){return`Must supply a value for form control ${Sb(n,e)}`}(e,o):"")})}class Ag{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===_f}get invalid(){return this.status===Tg}get pending(){return this.status==Pd}get disabled(){return this.status===kd}get enabled(){return this.status!==kd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Hw(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Hw(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(mf(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(mf(e,this._rawAsyncValidators))}hasValidator(e){return _g(this._rawValidators,e)}hasAsyncValidator(e){return _g(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Pd,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=kd,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=_f,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_f||this.status===Pd)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?kd:_f}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Pd,this._hasOwnPendingAsyncValidator=!0;const t=Fw(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?kd:this.errors?Tg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Pd)?Pd:this._anyControlsHaveStatus(Tg)?Tg:_f}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Sg(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Rb(n){return Array.isArray(n)?Ev(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Nb(n){return Array.isArray(n)?vg(n):n||null}(this._rawAsyncValidators)}}class If extends Ag{constructor(e,t,r){super(wf(t),Ef(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){zw(this,!0,e),Object.keys(e).forEach(r=>{Gw(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class Dv extends If{}const Fd=new g.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Ld}),Ld="always";function bv(n,e){return[...e.path,n]}function Fu(n,e,t=Ld){Tv(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Df(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Lu(n,e)})}(n,e),function Rg(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function oi(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Lu(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Cv(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Mg(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),is(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function xg(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Tv(n,e){const t=jw(n);null!==e.validator?n.setValidators(Bw(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=$w(n);null!==e.asyncValidator?n.setAsyncValidators(Bw(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();xg(e._rawValidators,o),xg(e._rawAsyncValidators,o)}function is(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=jw(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(l=>l!==e.validator);u.length!==o.length&&(t=!0,n.setValidators(u))}}if(null!==e.asyncValidator){const o=$w(n);if(Array.isArray(o)&&o.length>0){const u=o.filter(l=>l!==e.asyncValidator);u.length!==o.length&&(t=!0,n.setAsyncValidators(u))}}}const r=()=>{};return xg(e._rawValidators,r),xg(e._rawAsyncValidators,r),t}function Lu(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ss(n,e){Tv(n,e)}function Uu(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function al(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Bu(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===sl?t=u:function Ud(n){return Object.getPrototypeOf(n.constructor)===Va}(u)?r=u:o=u}),o||r||t||null}const Ww={provide:kr,useExisting:(0,g.Gpc)(()=>Sf)},Bd=(()=>Promise.resolve())();let Sf=(()=>{class n extends kr{constructor(t,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._directives=new Set,this.ngSubmit=new g.vpe,this.form=new If({},Ev(t),vg(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Bd.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Fu(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Bd.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Bd.then(()=>{const r=this._findContainer(t.path),o=new If({});ss(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Bd.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Bd.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,al(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(gn,10),g.Y36(Ua,10),g.Y36(Fd,8))},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Ww]),g.qOj]}),n})();function Av(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Mv(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const jd=class extends Ag{constructor(e=null,t,r){super(wf(t),Ef(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Sg(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Mv(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Av(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Av(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Mv(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Ng={provide:ol,useExisting:(0,g.Gpc)(()=>Mf)},Af=(()=>Promise.resolve())();let Mf=(()=>{class n extends ol{constructor(t,r,o,u,l,m){super(),this._changeDetectorRef=l,this.callSetDisabledState=m,this.control=new jd,this._registered=!1,this.update=new g.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=Bu(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Uu(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Fu(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Af.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,g.D6c)(r);Af.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?bv(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(kr,9),g.Y36(gn,10),g.Y36(Ua,10),g.Y36(ao,10),g.Y36(g.sBO,8),g.Y36(Fd,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([Ng]),g.qOj,g.TTD]}),n})(),Og=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),kg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({}),n})();const kv=new g.OlP("NgModelWithFormControlWarning"),eE={provide:kr,useExisting:(0,g.Gpc)(()=>$d)};let $d=(()=>{class n extends kr{constructor(t,r,o){super(),this.callSetDisabledState=o,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(is(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Fu(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Mg(t.control||null,t,!1),function qw(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,al(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(Mg(r||null,t),(n=>n instanceof jd)(o)&&(Fu(o,t,this.callSetDisabledState),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);ss(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Sv(n,e){return is(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Tv(this.form,this),this._oldForm&&is(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(g.Y36(gn,10),g.Y36(Ua,10),g.Y36(Fd,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&g.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([eE]),g.qOj,g.TTD]}),n})();const tE={provide:ol,useExisting:(0,g.Gpc)(()=>xf)};let xf=(()=>{class n extends ol{set isDisabled(t){}constructor(t,r,o,u,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=Bu(0,u)}ngOnChanges(t){this._added||this._setUpControl(),Uu(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return bv(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(g.Y36(kr,13),g.Y36(gn,10),g.Y36(Ua,10),g.Y36(ao,10),g.Y36(kv,8))},n.\u0275dir=g.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([tE]),g.qOj,g.TTD]}),n})(),ul=(()=>{class n{constructor(){this._validator=Rd}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Rd,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=g.lG2({type:n,features:[g.TTD]}),n})();const $b={provide:gn,useExisting:(0,g.Gpc)(()=>Hd),multi:!0};let Hd=(()=>{class n extends ul{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=g.D6c,this.createValidator=t=>xw}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=g.n5z(n)))(r||n)}}(),n.\u0275dir=g.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&g.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[g._Bn([$b]),g.qOj]}),n})(),dE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[kg]}),n})();class Gv extends Ag{constructor(e,t,r){super(wf(t),Ef(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let o=this._adjustIndex(e);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),t&&(this.controls.splice(o,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){zw(this,!1,e),e.forEach((r,o)=>{Gw(this,!1,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function Bg(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Ms=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const o=this._reduceControls(t);let u={};return Bg(r)?u=r:null!==r&&(u.validators=r.validator,u.asyncValidators=r.asyncValidator),new If(o,u)}record(t,r=null){const o=this._reduceControls(t);return new Dv(o,r)}control(t,r,o){let u={};return this.useNonNullable?(Bg(r)?u=r:(u.validators=r,u.asyncValidators=o),new jd(t,{...u,nonNullable:!0})):new jd(t,r,o)}array(t,r,o){const u=t.map(l=>this._createControl(l));return new Gv(u,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return t instanceof jd||t instanceof Ag?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),co=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Fd,useValue:t.callSetDisabledState??Ld}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[dE]}),n})(),xs=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:kv,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Fd,useValue:t.callSetDisabledState??Ld}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({imports:[dE]}),n})();var hE=P(4986),Fr=P(2122);function zv(){return(0,ii.e)((n,e)=>{let t,r=!1;n.subscribe((0,lt.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function Zb(n,e){return n===e}var dt,lo=P(2011),Nf=(P(407),P(3942)),me=P(5861),Hu=P(9681),jg=P(4859),$a=P(1877),tn=P(2090),$g=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ha={},Hg=Hg||{},Rt=$g||self;function ll(){}function Of(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Gd(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Gg="closure_uid_"+(1e9*Math.random()>>>0),gE=0;function mE(n,e,t){return n.call.apply(n.bind,arguments)}function yE(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Yr(n,e,t){return(Yr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?mE:yE).apply(null,arguments)}function zg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Qr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var l=Array(arguments.length-2),m=2;m<arguments.length;m++)l[m-2]=arguments[m];return e.prototype[o].apply(r,l)}}function Gu(){this.s=this.s,this.o=this.o}Gu.prototype.s=!1,Gu.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function pE(n){Object.prototype.hasOwnProperty.call(n,Gg)&&n[Gg]||(n[Gg]=++gE)}(this)},Gu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const vE=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function qv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function _E(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Of(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let l=0;l<u;l++)n[o+l]=r[l]}else n.push(r)}}function ai(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ai.prototype.h=function(){this.defaultPrevented=!0};var Yb=function(){if(!Rt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rt.addEventListener("test",ll,e),Rt.removeEventListener("test",ll,e)}catch{}return n}();function qg(n){return/^[\s\xa0]*$/.test(n)}var wE=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Wv(n,e){return n<e?-1:n>e?1:0}function Wg(){var n=Rt.navigator;return n&&(n=n.userAgent)?n:""}function qo(n){return-1!=Wg().indexOf(n)}function Zv(n){return Zv[" "](n),n}Zv[" "]=ll;var Pf,n,Jb=qo("Opera"),zd=qo("Trident")||qo("MSIE"),Kv=qo("Edge"),Zg=Kv||zd,Yv=qo("Gecko")&&!(-1!=Wg().toLowerCase().indexOf("webkit")&&!qo("Edge"))&&!(qo("Trident")||qo("MSIE"))&&!qo("Edge"),EE=-1!=Wg().toLowerCase().indexOf("webkit")&&!qo("Edge");function Qv(){var n=Rt.document;return n?n.documentMode:void 0}e:{var Kg="",Yg=(n=Wg(),Yv?/rv:([^\);]+)(\)|;)/.exec(n):Kv?/Edge\/([\d\.]+)/.exec(n):zd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):EE?/WebKit\/(\S+)/.exec(n):Jb?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Yg&&(Kg=Yg?Yg[1]:""),zd){var Qg=Qv();if(null!=Qg&&Qg>parseFloat(Kg)){Pf=String(Qg);break e}}Pf=Kg}var IE={};var Xb=Rt.document&&zd&&(Qv()||parseInt(Pf,10))||void 0;function Wo(n,e){if(ai.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Yv){e:{try{Zv(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:kA[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Wo.X.h.call(this)}}Qr(Wo,ai);var kA={2:"touch",3:"pen",4:"mouse"};Wo.prototype.h=function(){Wo.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var dl="closure_listenable_"+(1e6*Math.random()|0),FA=0;function CE(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++FA,this.ba=this.ea=!1}function kf(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function TE(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function It(n){const e={};for(const t in n)e[t]=n[t];return e}const SE="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function AE(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<SE.length;u++)t=SE[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Jg(n){this.src=n,this.g={},this.h=0}function zu(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=vE(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(kf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Jv(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}Jg.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=Jv(n,e,r,o);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new CE(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var qd="closure_lm_"+(1e6*Math.random()|0),Wd={};function $n(n,e,t,r,o){if(r&&r.once)return Xv(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)$n(n,e[u],t,r,o);return null}return t=n_(t),n&&n[dl]?n.N(e,t,Gd(r)?!!r.capture:!!r,o):eC(n,e,t,!1,r,o)}function eC(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=Gd(o)?!!o.capture:!!o,m=em(n);if(m||(n[qd]=m=new Jg(n)),(t=m.add(e,t,r,l,u)).proxy)return t;if(r=function ME(){const e=RE;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Yb||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(e_(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Xv(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Xv(n,e[u],t,r,o);return null}return t=n_(t),n&&n[dl]?n.O(e,t,Gd(r)?!!r.capture:!!r,o):eC(n,e,t,!0,r,o)}function xE(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)xE(n,e[u],t,r,o);else r=Gd(r)?!!r.capture:!!r,t=n_(t),n&&n[dl]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Jv(u=n.g[e],t,r,o))&&(kf(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=em(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Jv(e,t,r,o)),(t=-1<n?e[n]:null)&&Xg(t))}function Xg(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[dl])zu(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(e_(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=em(e))?(zu(t,n),0==t.h&&(t.src=null,e[qd]=null)):kf(n)}}}function e_(n){return n in Wd?Wd[n]:Wd[n]="on"+n}function RE(n,e){if(n.ba)n=!0;else{e=new Wo(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Xg(n),n=t.call(r,e)}return n}function em(n){return(n=n[qd])instanceof Jg?n:null}var t_="__closure_events_fn_"+(1e9*Math.random()>>>0);function n_(n){return"function"==typeof n?n:(n[t_]||(n[t_]=function(e){return n.handleEvent(e)}),n[t_])}function Lr(){Gu.call(this),this.i=new Jg(this),this.P=this,this.I=null}function nr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ai(e,n);else if(e instanceof ai)e.target=e.target||n;else{var o=e;AE(e=new ai(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=tm(l,r,!0,e)&&o}if(o=tm(l=e.g=n,r,!0,e)&&o,o=tm(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=tm(l=e.g=t[u],r,!1,e)&&o}function tm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ba&&l.capture==t){var m=l.listener,w=l.ha||l.src;l.ea&&zu(n.i,l),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}Qr(Lr,Gu),Lr.prototype[dl]=!0,Lr.prototype.removeEventListener=function(n,e,t,r){xE(this,n,e,t,r)},Lr.prototype.M=function(){if(Lr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)kf(t[r]);delete n.g[e],n.h--}}this.I=null},Lr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Lr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var r_=Rt.JSON.stringify;function tC(){var n=kE;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var hl,i_=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new NE,n=>n.reset());class NE{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function OE(n){Rt.setTimeout(()=>{throw n},0)}function PE(n,e){hl||function Ff(){var n=Rt.Promise.resolve(void 0);hl=function(){n.then(nC)}}(),s_||(hl(),s_=!0),kE.add(n,e)}var s_=!1,kE=new class nm{constructor(){this.h=this.g=null}add(e,t){const r=i_.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function nC(){for(var n;n=tC();){try{n.h.call(n.g)}catch(t){OE(t)}var e=i_;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}s_=!1}function Lf(n,e){Lr.call(this),this.h=n||1,this.g=e||Rt,this.j=Yr(this.lb,this),this.l=Date.now()}function rm(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function im(n,e,t){if("function"==typeof n)t&&(n=Yr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Yr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rt.setTimeout(n,e||0)}function FE(n){n.g=im(()=>{n.g=null,n.i&&(n.i=!1,FE(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Qr(Lf,Lr),(dt=Lf.prototype).ca=!1,dt.R=null,dt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),nr(this,"tick"),this.ca&&(rm(this),this.start()))}},dt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},dt.M=function(){Lf.X.M.call(this),rm(this),delete this.g};class LE extends Gu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:FE(this)}M(){super.M(),this.g&&(Rt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vf(n){Gu.call(this),this.h=n,this.g={}}Qr(Vf,Gu);var VE=[];function rC(n,e,t,r){Array.isArray(t)||(t&&(VE[0]=t.toString()),t=VE);for(var o=0;o<t.length;o++){var u=$n(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function iC(n){TE(n.g,function(e,t){this.g.hasOwnProperty(t)&&Xg(e)},n),n.g={}}function o_(){this.g=!0}function za(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function oC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return r_(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Vf.prototype.M=function(){Vf.X.M.call(this),iC(this)},Vf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},o_.prototype.Aa=function(){this.g=!1},o_.prototype.info=function(){};var qu={},Zd=null;function sm(){return Zd=Zd||new Lr}function BE(n){ai.call(this,qu.Pa,n)}function Uf(n){const e=sm();nr(e,new BE(e))}function jE(n,e){ai.call(this,qu.STAT_EVENT,n),this.stat=e}function Vi(n){const e=sm();nr(e,new jE(e,n))}function $E(n,e){ai.call(this,qu.Qa,n),this.size=e}function Kd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rt.setTimeout(function(){n()},e)}qu.Pa="serverreachability",Qr(BE,ai),qu.STAT_EVENT="statevent",Qr(jE,ai),qu.Qa="timingevent",Qr($E,ai);var om={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},HE={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function fl(){}function a_(){}fl.prototype.h=null;var um,Bf={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function am(){ai.call(this,"d")}function u_(){ai.call(this,"c")}function cm(){}function pl(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Vf(this),this.O=qE,this.T=new Lf(n=Zg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new zE}function zE(){this.i=null,this.g="",this.h=!1}Qr(am,ai),Qr(u_,ai),Qr(cm,fl),cm.prototype.g=function(){return new XMLHttpRequest},cm.prototype.i=function(){return{}},um=new cm;var qE=45e3,lm={},dm={};function c_(n,e,t){n.K=1,n.v=Yd(Zo(e)),n.s=t,n.P=!0,WE(n,null)}function WE(n,e){n.F=Date.now(),jf(n),n.A=Zo(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),mm(t.i,"t",r),n.C=0,t=n.l.H,n.h=new zE,n.g=mI(n.l,t?e:null,!n.s),0<n.N&&(n.L=new LE(Yr(n.La,n,n.g),n.N)),rC(n.S,n.g,"readystatechange",n.ib),e=n.H?It(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Uf(),function LA(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",m=u.split("&"),w=0;w<m.length;w++){var b=m[w].split("=");if(1<b.length){var A=b[0];b=b[1];var N=A.split("_");l=2<=N.length&&"type"==N[1]?l+(A+"=")+b+"&":l+(A+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function hm(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function ZE(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=KE(n,t),o==dm){4==e&&(n.o=4,Vi(14),r=!1),za(n.j,n.m,null,"[Incomplete Response]");break}if(o==lm){n.o=4,Vi(15),za(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}za(n.j,n.m,o,null),l_(n,o)}hm(n)&&o!=dm&&o!=lm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Vi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),b_(e),e.K=!0,Vi(11))):(za(n.j,n.m,t,"[Invalid Chunked Response]"),gl(n),$f(n))}function KE(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?dm:(t=Number(e.substring(t,r)),isNaN(t)?lm:(r+=1)+t>e.length?dm:(e=e.substr(r,t),n.C=r+t,e))}function jf(n){n.V=Date.now()+n.O,YE(n,n.O)}function YE(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Kd(Yr(n.gb,n),e)}function fm(n){n.B&&(Rt.clearTimeout(n.B),n.B=null)}function $f(n){0==n.l.G||n.I||pI(n.l,n)}function gl(n){fm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,rm(n.T),iC(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function l_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||ym(t.h,n)))if(!n.J&&ym(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Ku(t),Em(t)}Rs(t),Vi(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=Kd(Yr(t.cb,t),6e3));if(1>=__(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else vl(t,11)}else if((n.J||t.g==n)&&Ku(t),!qg(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.T=b[0],b=b[1],2==t.G)if("c"==b[0]){t.I=b[1],t.ka=b[2];const A=b[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const N=b[4];null!=N&&(t.Ca=N,t.j.info("SVER="+t.Ca));const $=b[5];null!=$&&"number"==typeof $&&0<$&&(t.J=r=1.5*$,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const J=n.g;if(J){const ce=J.g?J.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ce){var u=r.h;u.g||-1==ce.indexOf("spdy")&&-1==ce.indexOf("quic")&&-1==ce.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(vm(u,u.h),u.h=null))}if(r.D){const Pe=J.g?J.g.getResponseHeader("X-HTTP-Session-Id"):null;Pe&&(r.za=Pe,Sn(r.F,r.D,Pe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=Kf(r,r.H?r.ka:null,r.V),l.J){eI(r.h,l);var m=l,w=r.J;w&&m.setTimeout(w),m.B&&(fm(m),jf(m)),r.g=l}else Dm(r);0<t.i.length&&Im(t)}else"stop"!=b[0]&&"close"!=b[0]||vl(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?vl(t,7):lI(t):"noop"!=b[0]&&t.l&&t.l.wa(b),t.A=0)}Uf()}catch{}}function d_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Of(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function uC(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Of(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function aC(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Of(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(dt=pl.prototype).setTimeout=function(n){this.O=n},dt.ib=function(n){n=n.target;const e=this.L;e&&3==Ko(n)?e.l():this.La(n)},dt.La=function(n){try{if(n==this.g)e:{const A=Ko(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>A)&&(3!=A||Zg||this.g&&(this.h.h||this.g.fa()||I_(this.g)))){this.I||4!=A||7==e||Uf(),fm(this);var t=this.g.aa();this.Y=t;t:if(hm(this)){var r=I_(this.g);n="";var o=r.length,u=4==Ko(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){gl(this),$f(this);var l="";break t}this.h.i=new Rt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function UE(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qg(m)){var b=m;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Vi(12),gl(this),$f(this);break e}za(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,l_(this,t)}this.P?(ZE(this,A,l),Zg&&this.i&&3==A&&(rC(this.S,this.T,"tick",this.hb),this.T.start())):(za(this.j,this.m,l,null),l_(this,l)),4==A&&gl(this),this.i&&!this.I&&(4==A?pI(this.l,this):(this.i=!1,jf(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Vi(12)):(this.o=0,Vi(13)),gl(this),$f(this)}}}catch{}},dt.hb=function(){if(this.g){var n=Ko(this.g),e=this.g.fa();this.C<e.length&&(fm(this),ZE(this,n,e),this.i&&4!=n&&jf(this))}},dt.cancel=function(){this.I=!0,gl(this)},dt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function sC(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Uf(),Vi(17)),gl(this),this.o=2,$f(this)):YE(this,this.V-n)};var h_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ml(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ml){this.h=void 0!==e?e:n.h,pm(this,n.j),this.s=n.s,this.g=n.g,gm(this,n.m),this.l=n.l,e=n.i;var t=new Xd;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),QE(this,t),this.o=n.o}else n&&(t=String(n).match(h_))?(this.h=!!e,pm(this,t[1]||"",!0),this.s=Qd(t[2]||""),this.g=Qd(t[3]||"",!0),gm(this,t[4]),this.l=Qd(t[5]||"",!0),QE(this,t[6]||"",!0),this.o=Qd(t[7]||"")):(this.h=!!e,this.i=new Xd(null,this.h))}function Zo(n){return new ml(n)}function pm(n,e,t){n.j=t?Qd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function gm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function QE(n,e,t){e instanceof Xd?(n.i=e,function g_(n,e){e&&!n.j&&(Wu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(hC(this,r),mm(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=yl(e,XE)),n.i=new Xd(e,n.h))}function Sn(n,e,t){n.i.set(e,t)}function Yd(n){return Sn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Qd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function yl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,lC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function lC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ml.prototype.toString=function(){var n=[],e=this.j;e&&n.push(yl(e,JE,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(yl(e,JE,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(yl(t,"/"==t.charAt(0)?dC:f_,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",yl(t,Jd)),n.join("")};var JE=/[#\/\?@]/g,f_=/[#\?:]/g,dC=/[#\?]/g,XE=/[#\?@]/g,Jd=/#/g;function Xd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Wu(n){n.g||(n.g=new Map,n.h=0,n.i&&function cC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function hC(n,e){Wu(n),e=eh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function p_(n,e){return Wu(n),e=eh(n,e),n.g.has(e)}function mm(n,e,t){hC(n,e),0<t.length&&(n.i=null,n.g.set(eh(n,e),qv(t)),n.h+=t.length)}function eh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function m_(n){this.l=n||y_,n=Rt.PerformanceNavigationTiming?0<(n=Rt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rt.g&&Rt.g.Ga&&Rt.g.Ga()&&Rt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(dt=Xd.prototype).add=function(n,e){Wu(this),this.i=null,n=eh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},dt.forEach=function(n,e){Wu(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},dt.oa=function(){Wu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},dt.W=function(n){Wu(this);let e=[];if("string"==typeof n)p_(this,n)&&(e=e.concat(this.g.get(eh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},dt.set=function(n,e){return Wu(this),this.i=null,p_(this,n=eh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},dt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},dt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var o=u;""!==l[r]&&(o+="="+encodeURIComponent(String(l[r]))),n.push(o)}}return this.i=n.join("&")};var y_=10;function v_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function __(n){return n.h?1:n.g?n.g.size:0}function ym(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function vm(n,e){n.g?n.g.add(e):n.h=e}function eI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function tI(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return qv(n.i)}function w_(){}function pC(){this.g=new w_}function nI(n,e,t){const r=t||"";try{d_(n,function(o,u){let l=o;Gd(o)&&(l=r_(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Hf(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Gf(n){this.l=n.ac||null,this.j=n.jb||!1}function _m(n,e){Lr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=rI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}m_.prototype.cancel=function(){if(this.i=tI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},w_.prototype.stringify=function(n){return Rt.JSON.stringify(n,void 0)},w_.prototype.parse=function(n){return Rt.JSON.parse(n,void 0)},Qr(Gf,fl),Gf.prototype.g=function(){return new _m(this.l,this.j)},Gf.prototype.i=function(n){return function(){return n}}({}),Qr(_m,Lr);var rI=0;function iI(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function zf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,qf(n)}function qf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(dt=_m.prototype).open=function(n,e){if(this.readyState!=rI)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,qf(this)},dt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Rt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},dt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zf(this)),this.readyState=rI},dt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,qf(this)),this.g&&(this.readyState=3,qf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Rt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;iI(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},dt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?zf(this):qf(this),3==this.readyState&&iI(this)}},dt.Va=function(n){this.g&&(this.response=this.responseText=n,zf(this))},dt.Ua=function(n){this.g&&(this.response=n,zf(this))},dt.ga=function(){this.g&&zf(this)},dt.setRequestHeader=function(n,e){this.v.append(n,e)},dt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},dt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(_m.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var gC=Rt.JSON.parse;function Kn(n){Lr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=sI,this.K=this.L=!1}Qr(Kn,Lr);var sI="",mC=/^https?$/i,yC=["POST","PUT"];function oI(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,aI(n),Zu(n)}function aI(n){n.D||(n.D=!0,nr(n,"complete"),nr(n,"error"))}function uI(n){if(n.h&&typeof Hg<"u"&&(!n.C[1]||4!=Ko(n)||2!=n.aa()))if(n.v&&4==Ko(n))im(n.Ha,0,n);else if(nr(n,"readystatechange"),4==Ko(n)){n.h=!1;try{const m=n.aa();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(h_)[1]||null;if(!o&&Rt.self&&Rt.self.location){var u=Rt.self.location.protocol;o=u.substr(0,u.length-1)}r=!mC.test(o?o.toLowerCase():"")}t=r}if(t)nr(n,"complete"),nr(n,"success");else{n.m=6;try{var l=2<Ko(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",aI(n)}}finally{Zu(n)}}}function Zu(n,e){if(n.g){E_(n);const t=n.g,r=n.C[0]?ll:null;n.g=null,n.C=null,e||nr(n,"ready");try{t.onreadystatechange=r}catch{}}}function E_(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Rt.clearTimeout(n.A),n.A=null)}function Ko(n){return n.g?n.g.readyState:0}function I_(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case sI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function D_(n){let e="";return TE(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function wm(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=D_(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Sn(n,e,t))}function Wf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function cI(n){this.Ca=0,this.i=[],this.j=new o_,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Wf("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Wf("baseRetryDelayMs",5e3,n),this.bb=Wf("retryDelaySeedMs",1e4,n),this.$a=Wf("forwardChannelMaxRetries",2,n),this.ta=Wf("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new m_(n&&n.concurrentRequestLimit),this.Fa=new pC,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function lI(n){if(dI(n),3==n.G){var e=n.U++,t=Zo(n.F);Sn(t,"SID",n.I),Sn(t,"RID",e),Sn(t,"TYPE","terminate"),qa(n,t),(e=new pl(n,n.j,e,void 0)).K=2,e.v=Yd(Zo(t)),t=!1,Rt.navigator&&Rt.navigator.sendBeacon&&(t=Rt.navigator.sendBeacon(e.v.toString(),"")),!t&&Rt.Image&&((new Image).src=e.v,t=!0),t||(e.g=mI(e.l,null),e.g.da(e.v)),e.F=Date.now(),jf(e)}Zf(n)}function Em(n){n.g&&(b_(n),n.g.cancel(),n.g=null)}function dI(n){Em(n),n.u&&(Rt.clearTimeout(n.u),n.u=null),Ku(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Rt.clearTimeout(n.m),n.m=null)}function Im(n){v_(n.h)||n.m||(n.m=!0,PE(n.Ja,n),n.C=0)}function hI(n,e){var t;t=e?e.m:n.U++;const r=Zo(n.F);Sn(r,"SID",n.I),Sn(r,"RID",t),Sn(r,"AID",n.T),qa(n,r),n.o&&n.s&&wm(r,n.o,n.s),t=new pl(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=fI(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),vm(n.h,t),c_(t,r,e)}function qa(n,e){n.ia&&TE(n.ia,function(t,r){Sn(e,r,t)}),n.l&&d_({},function(t,r){Sn(e,r,t)})}function fI(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Yr(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let b=o[w].h;const A=o[w].g;if(b-=u,0>b)u=Math.max(0,o[w].h-100),m=!1;else try{nI(A,l,"req"+b+"_")}catch{r&&r(A)}}if(m){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Dm(n){n.g||n.u||(n.Z=1,PE(n.Ia,n),n.A=0)}function Rs(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Kd(Yr(n.Ia,n),gI(n,n.A)),n.A++,0))}function b_(n){null!=n.B&&(Rt.clearTimeout(n.B),n.B=null)}function bm(n){n.g=new pl(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Zo(n.sa);Sn(e,"RID","rpc"),Sn(e,"SID",n.I),Sn(e,"CI",n.L?"0":"1"),Sn(e,"AID",n.T),Sn(e,"TYPE","xmlhttp"),qa(n,e),n.o&&n.s&&wm(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Yd(Zo(e)),t.s=null,t.P=!0,WE(t,n)}function Ku(n){null!=n.v&&(Rt.clearTimeout(n.v),n.v=null)}function pI(n,e){var t=null;if(n.g==e){Ku(n),b_(n),n.g=null;var r=2}else{if(!ym(n.h,e))return;t=e.D,eI(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;nr(r=sm(),new $E(r,t)),Im(n)}else Dm(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function _C(n,e){return!(__(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Kd(Yr(n.Ja,n,e),gI(n,n.C)),n.C++,0)))}(n,e)||2==r&&Rs(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:vl(n,5);break;case 4:vl(n,10);break;case 3:vl(n,6);break;default:vl(n,2)}}function gI(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function vl(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Yr(n.kb,n);t||(t=new ml("//www.google.com/images/cleardot.gif"),Rt.location&&"http"==Rt.location.protocol||pm(t,"https"),Yd(t)),function VA(n,e){const t=new o_;if(Rt.Image){const r=new Image;r.onload=zg(Hf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=zg(Hf,t,r,"TestLoadImage: error",!1,e),r.onabort=zg(Hf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=zg(Hf,t,r,"TestLoadImage: timeout",!1,e),Rt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Vi(2);n.G=0,n.l&&n.l.va(e),Zf(n),dI(n)}function Zf(n){if(n.G=0,n.la=[],n.l){const e=tI(n.h);(0!=e.length||0!=n.i.length)&&(_E(n.la,e),_E(n.la,n.i),n.h.i.length=0,qv(n.i),n.i.length=0),n.l.ua()}}function Kf(n,e,t){var r=t instanceof ml?Zo(t):new ml(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),gm(r,r.m);else{var o=Rt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new ml(null,void 0);r&&pm(u,r),e&&(u.g=e),o&&gm(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&Sn(r,t,e),Sn(r,"VER",n.ma),qa(n,r),r}function mI(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Kn(t&&n.Da&&!n.ra?new Gf({jb:!0}):n.ra)).Ka(n.H),e}function yI(){}function Yf(){if(zd&&!(10<=Number(Xb)))throw Error("Environmental error: no available transport.")}function Ui(n,e){Lr.call(this),this.g=new cI(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!qg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Yu(this)}function Cm(n){am.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function C_(){u_.call(this),this.status=1}function Yu(n){this.g=n}(dt=Kn.prototype).Ka=function(n){this.L=n},dt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():um.g(),this.C=function GE(n){return n.h||(n.h=n.i())}(this.u?this.u:um),this.g.onreadystatechange=Yr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void oI(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Rt.FormData&&n instanceof Rt.FormData,!(0<=vE(yC,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{E_(this),0<this.B&&((this.K=function vC(n){return zd&&function DE(){return function Qb(n){var e=IE;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=wE(String(Pf)).split("."),t=wE("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var o=e[l]||"",u=t[l]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Wv(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Wv(0==o[2].length,0==u[2].length)||Wv(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Yr(this.qa,this)):this.A=im(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){oI(this,u)}},dt.qa=function(){typeof Hg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,nr(this,"timeout"),this.abort(8))},dt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,nr(this,"complete"),nr(this,"abort"),Zu(this))},dt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Zu(this,!0)),Kn.X.M.call(this)},dt.Ha=function(){this.s||(this.F||this.v||this.l?uI(this):this.fb())},dt.fb=function(){uI(this)},dt.aa=function(){try{return 2<Ko(this)?this.g.status:-1}catch{return-1}},dt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},dt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),gC(e)}},dt.Ea=function(){return this.m},dt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(dt=cI.prototype).ma=8,dt.G=1,dt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new pl(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=It(u),AE(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=fI(this,o,e),Sn(t=Zo(this.F),"RID",n),Sn(t,"CVER",22),this.D&&Sn(t,"X-HTTP-Session-Id",this.D),qa(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(D_(u)))+"&"+e:this.o&&wm(t,this.o,u)),vm(this.h,o),this.Ya&&Sn(t,"TYPE","init"),this.O?(Sn(t,"$req",e),Sn(t,"SID","null"),o.Z=!0,c_(o,t,null)):c_(o,t,e),this.G=2}}else 3==this.G&&(n?hI(this,n):0==this.i.length||v_(this.h)||hI(this))},dt.Ia=function(){if(this.u=null,bm(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Kd(Yr(this.eb,this),n)}},dt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Vi(10),Em(this),bm(this))},dt.cb=function(){null!=this.v&&(this.v=null,Em(this),Rs(this),Vi(19))},dt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Vi(2)):(this.j.info("Failed to ping google.com"),Vi(1))},(dt=yI.prototype).xa=function(){},dt.wa=function(){},dt.va=function(){},dt.ua=function(){},dt.Ra=function(){},Yf.prototype.g=function(n,e){return new Ui(n,e)},Qr(Ui,Lr),Ui.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Vi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Kf(n,null,n.V),Im(n)},Ui.prototype.close=function(){lI(this.g)},Ui.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=r_(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Im(e)},Ui.prototype.M=function(){this.g.l=null,delete this.j,lI(this.g),delete this.g,Ui.X.M.call(this)},Qr(Cm,am),Qr(C_,u_),Qr(Yu,yI),Yu.prototype.xa=function(){nr(this.g,"a")},Yu.prototype.wa=function(n){nr(this.g,new Cm(n))},Yu.prototype.va=function(n){nr(this.g,new C_)},Yu.prototype.ua=function(){nr(this.g,"b")},Yf.prototype.createWebChannel=Yf.prototype.g,Ui.prototype.send=Ui.prototype.u,Ui.prototype.open=Ui.prototype.m,Ui.prototype.close=Ui.prototype.close,om.NO_ERROR=0,om.TIMEOUT=8,om.HTTP_ERROR=6,HE.COMPLETE="complete",a_.EventType=Bf,Bf.OPEN="a",Bf.CLOSE="b",Bf.ERROR="c",Bf.MESSAGE="d",Lr.prototype.listen=Lr.prototype.N,Kn.prototype.listenOnce=Kn.prototype.O,Kn.prototype.getLastError=Kn.prototype.Oa,Kn.prototype.getLastErrorCode=Kn.prototype.Ea,Kn.prototype.getStatus=Kn.prototype.aa,Kn.prototype.getResponseJson=Kn.prototype.Sa,Kn.prototype.getResponseText=Kn.prototype.fa,Kn.prototype.send=Kn.prototype.da,Kn.prototype.setWithCredentials=Kn.prototype.Ka;var T_=Ha.createWebChannelTransport=function(){return new Yf},vI=Ha.getStatEventTarget=function(){return sm()},Qf=Ha.ErrorCode=om,S_=Ha.EventType=HE,wC=Ha.Event=qu,_I=Ha.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},EC=Ha.FetchXmlHttpFactory=Gf,Tm=Ha.WebChannel=a_,wI=Ha.XhrIo=Kn;const Sm="@firebase/firestore";class wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wr.UNAUTHENTICATED=new wr(null),wr.GOOGLE_CREDENTIALS=new wr("google-credentials-uid"),wr.FIRST_PARTY=new wr("first-party-uid"),wr.MOCK_USER=new wr("mock-user");let th="9.17.1";const Wa=new $a.Yd("@firebase/firestore");function Am(){return Wa.logLevel}function xe(n,...e){if(Wa.logLevel<=$a.in.DEBUG){const t=e.map(Mm);Wa.debug(`Firestore (${th}): ${n}`,...t)}}function Yn(n,...e){if(Wa.logLevel<=$a.in.ERROR){const t=e.map(Mm);Wa.error(`Firestore (${th}): ${n}`,...t)}}function _l(n,...e){if(Wa.logLevel<=$a.in.WARN){const t=e.map(Mm);Wa.warn(`Firestore (${th}): ${n}`,...t)}}function Mm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function rt(n="Unexpected state"){const e=`FIRESTORE (${th}) INTERNAL ASSERTION FAILED: `+n;throw Yn(e),new Error(e)}function Qe(n,e){n||rt()}function We(n,e){return n}const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends tn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Vr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class A_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class M_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(wr.UNAUTHENTICATED))}shutdown(){}}class Jf{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class DC{constructor(e){this.t=e,this.currentUser=wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let l=new Vr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Vr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const b=l;e.enqueueRetryable((0,me.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},w=b=>{xe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(b=>w(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?w(b):(xe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Vr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(xe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe("string"==typeof r.accessToken),new A_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Qe(null===e||"string"==typeof e),new wr(e)}}class x_{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=wr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Qe(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class bC{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new x_(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class R_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class CC{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&xe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.A;return this.A=u.token,xe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{xe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):xe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Qe("string"==typeof t.token),this.A=t.token,new R_(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function TC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class xm{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=TC(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Pt(n,e){return n<e?-1:n>e?1:0}function wl(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function Xf(n){return n+"\0"}class An{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return An.fromMillis(Date.now())}static fromDate(e){return An.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new An(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pt(this.nanoseconds,e.nanoseconds):Pt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class vt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new vt(e)}static min(){return new vt(new An(0,0))}static max(){return new vt(new An(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class rh{constructor(e,t,r){void 0===t?t=0:t>e.length&&rt(),void 0===r?r=e.length-t:r>e.length-t&&rt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===rh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof rh?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Xt extends rh{construct(e,t,r){return new Xt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Xt(t)}static emptyPath(){return new Xt([])}}const EI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class vn extends rh{construct(e,t,r){return new vn(e,t,r)}static isValidIdentifier(e){return EI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),vn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new vn(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Ae(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Ae(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ae(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(l=!l,o++):"."!==m||l?(r+=m,o++):(u(),o++)}if(u(),l)throw new Ae(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new vn(t)}static emptyPath(){return new vn([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(Xt.fromString(e))}static fromName(e){return new qe(Xt.fromString(e).popFirst(5))}static empty(){return new qe(Xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Xt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Xt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new Xt(e.slice()))}}class ep{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function tp(n){return n.fields.find(e=>2===e.kind)}function ih(n){return n.fields.filter(e=>2!==e.kind)}ep.UNKNOWN_ID=-1;class N_{constructor(e,t){this.fieldPath=e,this.kind=t}}class np{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new np(0,Bi.min())}}function II(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=vt.fromTimestamp(1e9===r?new An(t+1,0):new An(t,r));return new Bi(o,qe.empty(),e)}function O_(n){return new Bi(n.readTime,n.key,-1)}class Bi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Bi(vt.min(),qe.empty(),-1)}static max(){return new Bi(vt.max(),qe.empty(),-1)}}function P_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:Pt(n.largestBatchId,e.largestBatchId))}const k_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class F_{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Qu(n){return L_.apply(this,arguments)}function L_(){return L_=(0,me.Z)(function*(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==k_)throw n;xe("LocalStore","Unexpectedly lost primary lease")}),L_.apply(this,arguments)}class ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&rt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ne((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ne?t:ne.resolve(t)}catch(t){return ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ne.reject(t)}static resolve(e){return new ne((t,r)=>{t(e)})}static reject(e){return new ne((t,r)=>{r(e)})}static waitFor(e){return new ne((t,r)=>{let o=0,u=0,l=!1;e.forEach(m=>{++o,m.next(()=>{++u,l&&u===o&&t()},w=>r(w))}),l=!0,u===o&&t()})}static or(e){let t=ne.resolve(!1);for(const r of e)t=t.next(o=>o?ne.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new ne((r,o)=>{const u=e.length,l=new Array(u);let m=0;for(let w=0;w<u;w++){const b=w;t(e[b]).next(A=>{l[b]=A,++m,m===u&&r(l)},A=>o(A))}})}static doWhile(e,t){return new ne((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Rm{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Vr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new sh(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=Nm(r.target.error);this.P.reject(new sh(e,o))}}static open(e,t,r,o){try{return new Rm(t,e.transaction(o,r))}catch(u){throw new sh(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(xe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new MC(t)}}class Ns{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Ns.D((0,tn.z$)())&&Yn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return xe("SimpleDb","Removing database:",e),El(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,tn.hl)())return!1;if(Ns.N())return!0;const e=(0,tn.z$)(),t=Ns.D(e),r=0<t&&t<10,o=Ns.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,me.Z)(function*(){return t.db||(xe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new sh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const m=l.target.error;o("VersionError"===m.name?new Ae(ie.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ae(ie.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new sh(e,m))},u.onupgradeneeded=l=>{xe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{xe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,me.Z)(function*(){const l="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.F(e);const w=Rm.open(u.db,e,l?"readonly":"readwrite",r),b=o(w).next(A=>(w.V(),A)).catch(A=>(w.abort(A),ne.reject(A))).toPromise();return b.catch(()=>{}),yield w.v,b}catch(w){const b=w,A="FirebaseError"!==b.name&&m<3;if(xe("SimpleDb","Transaction failed with error:",b.message,"Retrying:",A),u.close(),!A)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class DI{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return El(this.q.delete())}}class sh extends Ae{constructor(e,t){super(ie.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Za(n){return"IndexedDbTransactionError"===n.name}class MC{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(xe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(xe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),El(r)}add(e){return xe("SimpleDb","ADD",this.store.name,e,e),El(this.store.add(e))}get(e){return El(this.store.get(e)).next(t=>(void 0===t&&(t=null),xe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return xe("SimpleDb","DELETE",this.store.name,e),El(this.store.delete(e))}count(){return xe("SimpleDb","COUNT",this.store.name),El(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(l,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new ne((u,l)=>{o.onerror=m=>{l(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ne((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}Y(e,t){xe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,l,m)=>m.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new ne((r,o)=>{t.onerror=u=>{const l=Nm(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(m=>{m?l.continue():r()}):r()}})}H(e,t){const r=[];return new ne((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const m=l.target.result;if(!m)return void o();const w=new DI(m),b=t(m.primaryKey,m.value,w);if(b instanceof ne){const A=b.catch(N=>(w.done(),ne.reject(N)));r.push(A)}w.isDone?o():null===w.G?m.continue():m.continue(w.G)}}).next(()=>ne.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function El(n){return new ne((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Nm(r.target.error);t(o)}})}let xC=!1;function Nm(n){const e=Ns.D((0,tn.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return xC||(xC=!0,setTimeout(()=>{throw r},0)),r}}return n}class BA{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;xe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{xe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Za(r)?xe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Qu(r)}yield t.nt(6e4)}))}}class jA{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return ne.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return xe("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,o).next(m=>{o-=m,r.add(l)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(o,u)).next(m=>(xe("IndexBackiller",`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(e,t,m))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=O_(u);P_(l,r)>0&&(r=l)}),new Bi(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Os=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>r.writeSequenceNumber(o))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class $A{constructor(e,t,r,o,u,l,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class Il{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Il("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Il&&e.projectId===this.projectId&&e.database===this.database}}function RC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function oh(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function NC(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ju(n){return null==n}function Om(n){return 0===n&&1/n==-1/0}function V_(n){return"number"==typeof n&&Number.isInteger(n)&&!Om(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class ur{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ur(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new ur(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ur.EMPTY_BYTE_STRING=new ur("");const bI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dl(n){if(Qe(!!n),"string"==typeof n){let e=0;const t=bI.exec(n);if(Qe(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Vn(n.seconds),nanos:Vn(n.nanos)}}function Vn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Xu(n){return"string"==typeof n?ur.fromBase64String(n):ur.fromUint8Array(n)}function U_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function B_(n){const e=n.mapValue.fields.__previous_value__;return U_(e)?B_(e):e}function km(n){const e=Dl(n.mapValue.fields.__local_write_time__.timestampValue);return new An(e.seconds,e.nanos)}const bl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Fm={nullValue:"NULL_VALUE"};function Cl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?U_(n)?4:Ps(n)?9007199254740991:10:rt()}function os(n,e){if(n===e)return!0;const t=Cl(n);if(t!==Cl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return km(n).isEqual(km(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Dl(r.timestampValue),l=Dl(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Xu(n.bytesValue).isEqual(Xu(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Vn(r.geoPointValue.latitude)===Vn(o.geoPointValue.latitude)&&Vn(r.geoPointValue.longitude)===Vn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Vn(r.integerValue)===Vn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Vn(r.doubleValue),l=Vn(o.doubleValue);return u===l?Om(u)===Om(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return wl(n.arrayValue.values||[],e.arrayValue.values||[],os);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(RC(u)!==RC(l))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===l[m]||!os(u[m],l[m])))return!1;return!0}(n,e);default:return rt()}var o}function rp(n,e){return void 0!==(n.values||[]).find(t=>os(t,e))}function Tl(n,e){if(n===e)return 0;const t=Cl(n),r=Cl(e);if(t!==r)return Pt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=Vn(o.integerValue||o.doubleValue),m=Vn(u.integerValue||u.doubleValue);return l<m?-1:l>m?1:l===m?0:isNaN(l)?isNaN(m)?0:-1:1}(n,e);case 3:return OC(n.timestampValue,e.timestampValue);case 4:return OC(km(n),km(e));case 5:return Pt(n.stringValue,e.stringValue);case 6:return function(o,u){const l=Xu(o),m=Xu(u);return l.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),m=u.split("/");for(let w=0;w<l.length&&w<m.length;w++){const b=Pt(l[w],m[w]);if(0!==b)return b}return Pt(l.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=Pt(Vn(o.latitude),Vn(u.latitude));return 0!==l?l:Pt(Vn(o.longitude),Vn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],m=u.values||[];for(let w=0;w<l.length&&w<m.length;++w){const b=Tl(l[w],m[w]);if(b)return b}return Pt(l.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===bl.mapValue&&u===bl.mapValue)return 0;if(o===bl.mapValue)return 1;if(u===bl.mapValue)return-1;const l=o.fields||{},m=Object.keys(l),w=u.fields||{},b=Object.keys(w);m.sort(),b.sort();for(let A=0;A<m.length&&A<b.length;++A){const N=Pt(m[A],b[A]);if(0!==N)return N;const $=Tl(l[m[A]],w[b[A]]);if(0!==$)return $}return Pt(m.length,b.length)}(n.mapValue,e.mapValue);default:throw rt()}}function OC(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Pt(n,e);const t=Dl(n),r=Dl(e),o=Pt(t.seconds,r.seconds);return 0!==o?o:Pt(t.nanos,r.nanos)}function ip(n){return j_(n)}function j_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Dl(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Xu(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=j_(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const m of o)l?l=!1:u+=",",u+=`${m}:${j_(r.fields[m])}`;return u+"}"}(n.mapValue):rt();var e}function Sl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function $_(n){return!!n&&"integerValue"in n}function Lm(n){return!!n&&"arrayValue"in n}function CI(n){return!!n&&"nullValue"in n}function H_(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function sp(n){return!!n&&"mapValue"in n}function Vm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return oh(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Vm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Vm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Ps(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function PC(n){return"nullValue"in n?Fm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Sl(Il.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:rt()}function G_(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Sl(Il.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?bl:rt()}function TI(n,e){const t=Tl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function kC(n,e){const t=Tl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Er{constructor(e,t){this.position=e,this.inclusive=t}}function SI(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?qe.comparator(qe.fromName(l.referenceValue),t.key):Tl(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Um(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!os(n.position[t],e.position[t]))return!1;return!0}class AI{}class Jt extends AI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Z_(e,t,r):"array-contains"===t?new Ka(e,r):"in"===t?new NI(e,r):"not-in"===t?new HA(e,r):"array-contains-any"===t?new FC(e,r):new Jt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new ec(e,r):new RI(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Tl(t,this.value)):null!==t&&Cl(this.value)===Cl(t)&&this.matchesComparison(Tl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class an extends AI{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new an(e,t)}matches(e){return Al(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Al(n){return"and"===n.op}function Bm(n){return"or"===n.op}function z_(n){return q_(n)&&Al(n)}function q_(n){for(const e of n.filters)if(e instanceof an)return!1;return!0}function jm(n){if(n instanceof Jt)return n.field.canonicalString()+n.op.toString()+ip(n.value);if(z_(n))return n.filters.map(e=>jm(e)).join(",");{const e=n.filters.map(t=>jm(t)).join(",");return`${n.op}(${e})`}}function MI(n,e){return n instanceof Jt?(t=n,(r=e)instanceof Jt&&t.op===r.op&&t.field.isEqual(r.field)&&os(t.value,r.value)):n instanceof an?function(t,r){return r instanceof an&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,l)=>o&&MI(u,r.filters[l]),!0)}(n,e):void rt();var t,r}function W_(n,e){const t=n.filters.concat(e);return an.create(t,n.op)}function xI(n){return n instanceof Jt?`${(e=n).field.canonicalString()} ${e.op} ${ip(e.value)}`:n instanceof an?function(e){return e.op.toString()+" {"+e.getFilters().map(xI).join(" ,")+"}"}(n):"Filter";var e}class Z_ extends Jt{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class ec extends Jt{constructor(e,t){super(e,"in",t),this.keys=$m(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class RI extends Jt{constructor(e,t){super(e,"not-in",t),this.keys=$m(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $m(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class Ka extends Jt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Lm(t)&&rp(t.arrayValue,this.value)}}class NI extends Jt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&rp(this.value.arrayValue,t)}}class HA extends Jt{constructor(e,t){super(e,"not-in",t)}matches(e){if(rp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!rp(this.value.arrayValue,t)}}class FC extends Jt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Lm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>rp(this.value.arrayValue,r))}}class ah{constructor(e,t="asc"){this.field=e,this.dir=t}}function LC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Qn{constructor(e,t){this.comparator=e,this.root=t||ui.EMPTY}insert(e,t){return new Qn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ui.BLACK,null,null))}remove(e){return new Qn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ui.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new op(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new op(this.root,e,this.comparator,!1)}getReverseIterator(){return new op(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new op(this.root,e,this.comparator,!0)}}class op{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ui{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??ui.RED,this.left=o??ui.EMPTY,this.right=u??ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new ui(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ui.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rt();const e=this.left.check();if(e!==this.right.check())throw rt();return e+(this.isRed()?0:1)}}ui.EMPTY=null,ui.RED=!0,ui.BLACK=!1,ui.EMPTY=new class{constructor(){this.size=0}get key(){throw rt()}get value(){throw rt()}get color(){throw rt()}get left(){throw rt()}get right(){throw rt()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ui(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class dn{constructor(e){this.comparator=e,this.data=new Qn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new OI(this.data.getIterator())}getIteratorFrom(e){return new OI(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof dn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new dn(this.comparator);return t.data=e,t}}class OI{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ml(n){return n.hasNext()?n.getNext():void 0}class as{constructor(e){this.fields=e,e.sort(vn.comparator)}static empty(){return new as([])}unionWith(e){let t=new dn(vn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new as(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return wl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ir{constructor(e){this.value=e}static empty(){return new Ir({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!sp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Vm(t)}setAll(e){let t=vn.emptyPath(),r={},o=[];e.forEach((l,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}l?r[m.lastSegment()]=Vm(l):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());sp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return os(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];sp(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){oh(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Ir(Vm(this.value))}}function K_(n){const e=[];return oh(n.fields,(t,r)=>{const o=new vn([t]);if(sp(r)){const u=K_(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new as(e)}class Mn{constructor(e,t,r,o,u,l,m){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=l,this.documentState=m}static newInvalidDocument(e){return new Mn(e,0,vt.min(),vt.min(),vt.min(),Ir.empty(),0)}static newFoundDocument(e,t,r,o){return new Mn(e,1,t,vt.min(),r,o,0)}static newNoDocument(e,t){return new Mn(e,2,t,vt.min(),vt.min(),Ir.empty(),0)}static newUnknownDocument(e,t){return new Mn(e,3,t,vt.min(),vt.min(),Ir.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(vt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ir.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ir.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Mn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class PI{constructor(e,t=null,r=[],o=[],u=null,l=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=m,this.ft=null}}function Hm(n,e=null,t=[],r=[],o=null,u=null,l=null){return new PI(n,e,t,r,o,u,l)}function tc(n){const e=We(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>jm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Ju(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ip(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ip(r)).join(",")),e.ft=t}return e.ft}function nc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!LC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!MI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Um(n.startAt,e.startAt)&&Um(n.endAt,e.endAt)}function xl(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ap(n,e){return n.filters.filter(t=>t instanceof Jt&&t.field.isEqual(e))}function kI(n,e,t){let r=Fm,o=!0;for(const u of ap(n,e)){let l=Fm,m=!0;switch(u.op){case"<":case"<=":l=PC(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,m=!1;break;case"!=":case"not-in":l=Fm}TI({value:r,inclusive:o},{value:l,inclusive:m})<0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];TI({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function FI(n,e,t){let r=bl,o=!0;for(const u of ap(n,e)){let l=bl,m=!0;switch(u.op){case">=":case">":l=G_(u.value),m=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,m=!1;break;case"!=":case"not-in":l=bl}kC({value:r,inclusive:o},{value:l,inclusive:m})>0&&(r=l,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];kC({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class rc{constructor(e,t=null,r=[],o=[],u=null,l="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=m,this.endAt=w,this.dt=null,this._t=null}}function VC(n,e,t,r,o,u,l,m){return new rc(n,e,t,r,o,u,l,m)}function up(n){return new rc(n)}function Y_(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Q_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Gm(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function J_(n){return null!==n.collectionGroup}function uh(n){const e=We(n);if(null===e.dt){e.dt=[];const t=Gm(e),r=Q_(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new ah(t)),e.dt.push(new ah(vn.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.dt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new ah(vn.keyField(),u))}}}return e.dt}function ji(n){const e=We(n);if(!e._t)if("F"===e.limitType)e._t=Hm(e.path,e.collectionGroup,uh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of uh(e))t.push(new ah(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Er(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Er(e.startAt.position,e.startAt.inclusive):null;e._t=Hm(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e._t}function LI(n,e){e.getFirstInequalityField(),Gm(n);const t=n.filters.concat([e]);return new rc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function X_(n,e,t){return new rc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zm(n,e){return nc(ji(n),ji(e))&&n.limitType===e.limitType}function VI(n){return`${tc(ji(n))}|lt:${n.limitType}`}function ch(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>xI(r)).join(", ")}]`),Ju(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ip(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ip(r)).join(",")),`Target(${t})`}(ji(n))}; limitType=${n.limitType})`}function cp(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):qe.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of uh(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const m=SI(o,u,l);return o.inclusive?m<=0:m<0}(t.startAt,uh(t),r)||t.endAt&&!function(o,u,l){const m=SI(o,u,l);return o.inclusive?m>=0:m>0}(t.endAt,uh(t),r)));var t,r}function UI(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function e0(n){return(e,t)=>{let r=!1;for(const o of uh(n)){const u=Rl(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function Rl(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(o,u,l){const m=u.data.field(o),w=l.data.field(o);return null!==m&&null!==w?Tl(m,w):rt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return rt()}}function t0(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Om(e)?"-0":e}}function qm(n){return{integerValue:""+n}}function Wm(n,e){return V_(e)?qm(e):t0(n,e)}class Zm{constructor(){this._=void 0}}function n0(n,e,t){return n instanceof dp?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof lh?UC(n,e):n instanceof dh?s0(n,e):function(r,o){const u=lp(r,o),l=BI(u)+BI(r.gt);return $_(u)&&$_(r.gt)?qm(l):t0(r.yt,l)}(n,e)}function r0(n,e,t){return n instanceof lh?UC(n,e):n instanceof dh?s0(n,e):t}function lp(n,e){return n instanceof hh?$_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class dp extends Zm{}class lh extends Zm{constructor(e){super(),this.elements=e}}function UC(n,e){const t=jI(e);for(const r of n.elements)t.some(o=>os(o,r))||t.push(r);return{arrayValue:{values:t}}}class dh extends Zm{constructor(e){super(),this.elements=e}}function s0(n,e){let t=jI(e);for(const r of n.elements)t=t.filter(o=>!os(o,r));return{arrayValue:{values:t}}}class hh extends Zm{constructor(e,t){super(),this.yt=e,this.gt=t}}function BI(n){return Vn(n.integerValue||n.doubleValue)}function jI(n){return Lm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class hp{constructor(e,t){this.field=e,this.transform=t}}class HI{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Km(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Ym{}function o0(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ph(n.key,Pn.none()):new fh(n.key,n.data,Pn.none());{const t=n.data,r=Ir.empty();let o=new dn(vn.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new Ya(n.key,r,new as(o.toArray()),Pn.none())}}function a0(n,e,t){n instanceof fh?function(r,o,u){const l=r.value.clone(),m=jC(r.fieldTransforms,o,u.transformResults);l.setAll(m),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Ya?function(r,o,u){if(!Km(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=jC(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(BC(r)),m.setAll(l),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Qm(n,e,t,r){return n instanceof fh?function(o,u,l,m){if(!Km(o.precondition,u))return l;const w=o.value.clone(),b=zI(o.fieldTransforms,m,u);return w.setAll(b),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ya?function(o,u,l,m){if(!Km(o.precondition,u))return l;const w=zI(o.fieldTransforms,m,u),b=u.data;return b.setAll(BC(o)),b.setAll(w),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(l=t,Km(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function GI(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=lp(r.transform,o||null);null!=u&&(null===t&&(t=Ir.empty()),t.set(r.field,u))}return t||null}function Jm(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&wl(t,r,(o,u)=>function $I(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof lh&&r instanceof lh||t instanceof dh&&r instanceof dh?wl(t.elements,r.elements,os):t instanceof hh&&r instanceof hh?os(t.gt,r.gt):t instanceof dp&&r instanceof dp);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class fh extends Ym{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ya extends Ym{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function BC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function jC(n,e,t){const r=new Map;Qe(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,m=e.data.field(u.field);r.set(u.field,r0(l,m,t[o]))}return r}function zI(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,n0(u,l,e))}return r}class ph extends Ym{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class u0 extends Ym{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class GA{constructor(e){this.count=e}}var Dr,nn;function $C(n){switch(n){default:return rt();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0}}function HC(n){if(void 0===n)return Yn("GRPC error has no .code"),ie.UNKNOWN;switch(n){case Dr.OK:return ie.OK;case Dr.CANCELLED:return ie.CANCELLED;case Dr.UNKNOWN:return ie.UNKNOWN;case Dr.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Dr.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Dr.INTERNAL:return ie.INTERNAL;case Dr.UNAVAILABLE:return ie.UNAVAILABLE;case Dr.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Dr.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Dr.NOT_FOUND:return ie.NOT_FOUND;case Dr.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Dr.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Dr.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Dr.ABORTED:return ie.ABORTED;case Dr.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Dr.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Dr.DATA_LOSS:return ie.DATA_LOSS;default:return rt()}}(nn=Dr||(Dr={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class ic{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){oh(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return NC(this.inner)}size(){return this.innerSize}}const zA=new Qn(qe.comparator);function us(){return zA}const GC=new Qn(qe.comparator);function Xm(...n){let e=GC;for(const t of n)e=e.insert(t.key,t);return e}function zC(n){let e=GC;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Qa(){return s()}function i(){return s()}function s(){return new ic(n=>n.toString(),(n,e)=>n.isEqual(e))}const a=new Qn(qe.comparator),c=new dn(qe.comparator);function d(...n){let e=c;for(const t of n)e=e.add(t);return e}const f=new dn(Pt);function v(){return f}class E{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,I.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new E(vt.min(),o,v(),us(),d())}}class I{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new I(r,t,d(),d(),d())}}class T{constructor(e,t,r,o){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=o}}class x{constructor(e,t){this.targetId=e,this.Et=t}}class k{constructor(e,t,r=ur.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class G{constructor(){this.At=0,this.Rt=Le(),this.bt=ur.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=d(),t=d(),r=d();return this.Rt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:rt()}}),new I(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=Le()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Y{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=us(),this.qt=pe(),this.Ut=new dn(Pt)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:rt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,o)=>{this.zt(o)&&t(o)})}Jt(e){const t=e.targetId,r=e.Et.count,o=this.Yt(t);if(o){const u=o.target;if(xl(u))if(0===r){const l=new qe(u.path);this.Qt(t,l,Mn.newNoDocument(l,vt.min()))}else Qe(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((u,l)=>{const m=this.Yt(l);if(m){if(u.current&&xl(m.target)){const w=new qe(m.target.path);null!==this.Lt.get(w)||this.te(l,w)||this.Qt(l,w,Mn.newNoDocument(w,e))}u.St&&(t.set(l,u.Ct()),u.xt())}});let r=d();this.qt.forEach((u,l)=>{let m=!0;l.forEachWhile(w=>{const b=this.Yt(w);return!b||2===b.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.Lt.forEach((u,l)=>l.setReadTime(e));const o=new E(e,t,this.Ut,this.Lt,r);return this.Lt=us(),this.qt=pe(),this.Ut=new dn(Pt),o}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const o=this.Wt(e);this.te(e,t)?o.Nt(t,1):o.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new G,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new dn(Pt),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||xe("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new G),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function pe(){return new Qn(qe.comparator)}function Le(){return new Qn(qe.comparator)}const Ze={asc:"ASCENDING",desc:"DESCENDING"},at={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bt={and:"AND",or:"OR"};class Me{constructor(e,t){this.databaseId=e,this.wt=t}}function At(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kn(n,e){return n.wt?e.toBase64():e.toUint8Array()}function rr(n,e){return At(n,e.toTimestamp())}function cr(n){return Qe(!!n),vt.fromTimestamp(function(e){const t=Dl(e);return new An(t.seconds,t.nanos)}(n))}function qC(n,e){return(t=n,new Xt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function qA(n){const e=Xt.fromString(n);return Qe(tM(e)),e}function c0(n,e){return qC(n.databaseId,e.path)}function sc(n,e){const t=qA(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(ZA(t))}function WC(n,e){return qC(n.databaseId,e)}function WA(n){const e=qA(n);return 4===e.length?Xt.emptyPath():ZA(e)}function l0(n){return new Xt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ZA(n){return Qe(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function KA(n,e,t){return{name:c0(n,e),fields:t.value.mapValue.fields}}function YA(n,e,t){const r=sc(n,e.name),o=cr(e.updateTime),u=e.createTime?cr(e.createTime):vt.min(),l=new Ir({mapValue:{fields:e.fields}}),m=Mn.newFoundDocument(r,o,u,l);return t&&m.setHasCommittedMutations(),t?m.setHasCommittedMutations():m}function d0(n,e){let t;if(e instanceof fh)t={update:KA(n,e.key,e.value)};else if(e instanceof ph)t={delete:c0(n,e.key)};else if(e instanceof Ya)t={update:KA(n,e.key,e.data),updateMask:uN(e.fieldMask)};else{if(!(e instanceof u0))return rt();t={verify:c0(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof dp)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof lh)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof dh)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof hh)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw rt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:rr(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:rt()),t;var o}function ZC(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Pn.updateTime(cr(o.updateTime)):void 0!==o.exists?Pn.exists(o.exists):Pn.none():Pn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let m=null;"setToServerValue"in l?(Qe("REQUEST_TIME"===l.setToServerValue),m=new dp):"appendMissingElements"in l?m=new lh(l.appendMissingElements.values||[]):"removeAllFromArray"in l?m=new dh(l.removeAllFromArray.values||[]):"increment"in l?m=new hh(u,l.increment):rt();const w=vn.fromServerFormat(l.fieldPath);return new hp(w,m)}(n,o)):[];var o;if(e.update){const o=sc(n,e.update.name),u=new Ir({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new as((e.updateMask.fieldPaths||[]).map(b=>vn.fromServerFormat(b)));return new Ya(o,u,l,t,r)}return new fh(o,u,t,r)}if(e.delete){const o=sc(n,e.delete);return new ph(o,t)}if(e.verify){const o=sc(n,e.verify);return new u0(o,t)}return rt()}function QA(n,e){return{documents:[WC(n,e.path)]}}function KC(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=WC(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=WC(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0!==w.length)return eM(an.create(w,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(b=>{return{field:ey((A=b).field),direction:sN(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(b=e.limit,n.wt||Ju(b)?b:{value:b});var b,m,w;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function JA(n){let e=WA(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Qe(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=function(A){const N=XA(A);return N instanceof an&&z_(N)?N.getFilters():[N]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(A=>{return new ah(ty((N=A).field),function($){switch($){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let m=null;t.limit&&(m=function(A){let N;return N="object"==typeof A?A.value:A,Ju(N)?null:N}(t.limit));let w=null;var A;t.startAt&&(w=new Er((A=t.startAt).values||[],!!A.before));let b=null;return t.endAt&&(b=function(A){return new Er(A.values||[],!A.before)}(t.endAt)),VC(e,o,l,u,m,"F",w,b)}function XA(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ty(e.unaryFilter.field);return Jt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=ty(e.unaryFilter.field);return Jt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ty(e.unaryFilter.field);return Jt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=ty(e.unaryFilter.field);return Jt.create(u,"!=",{nullValue:"NULL_VALUE"});default:return rt()}}(n):void 0!==n.fieldFilter?Jt.create(ty((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return an.create(e.compositeFilter.filters.map(t=>XA(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return rt()}}(e.compositeFilter.op))}(n):rt();var e}function sN(n){return Ze[n]}function oN(n){return at[n]}function aN(n){return bt[n]}function ey(n){return{fieldPath:n.canonicalString()}}function ty(n){return vn.fromServerFormat(n.fieldPath)}function eM(n){return n instanceof Jt?function(e){if("=="===e.op){if(H_(e.value))return{unaryFilter:{field:ey(e.field),op:"IS_NAN"}};if(CI(e.value))return{unaryFilter:{field:ey(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(H_(e.value))return{unaryFilter:{field:ey(e.field),op:"IS_NOT_NAN"}};if(CI(e.value))return{unaryFilter:{field:ey(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ey(e.field),op:oN(e.op),value:e.value}}}(n):n instanceof an?function(e){const t=e.getFilters().map(r=>eM(r));return 1===t.length?t[0]:{compositeFilter:{op:aN(e.op),filters:t}}}(n):rt()}function uN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function tM(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function cs(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=nM(e)),e=cN(n.get(t),e);return nM(e)}function cN(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function nM(n){return n+"\x01\x01"}function oc(n){const e=n.length;if(Qe(e>=2),2===e)return Qe("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Xt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&rt(),n.charAt(l+1)){case"\x01":const m=n.substring(u,l);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:rt()}u=l+2}return new Xt(r)}const rM=["userId","batchId"];function qI(n,e){return[n,cs(e)]}function iM(n,e,t){return[n,cs(e),t]}const lN={},dN=["prefixPath","collectionGroup","readTime","documentId"],hN=["prefixPath","collectionGroup","documentId"],fN=["collectionGroup","readTime","prefixPath","documentId"],pN=["canonicalId","targetId"],gN=["targetId","path"],mN=["path","targetId"],yN=["collectionId","parent"],vN=["indexId","uid"],_N=["uid","sequenceNumber"],wN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],EN=["indexId","uid","orderedDocumentKey"],IN=["userId","collectionPath","documentId"],DN=["userId","collectionPath","largestBatchId"],bN=["userId","collectionGroup","largestBatchId"],sM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],CN=[...sM,"documentOverlays"],oM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],aM=oM,TN=[...aM,"indexConfiguration","indexState","indexEntries"];class YC extends F_{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function ci(n,e){const t=We(n);return Ns.M(t.se,e)}class QC{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&a0(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Qm(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Qm(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=i();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let m=this.applyToLocalView(l,u.mutatedFields);m=t.has(o.key)?null:m;const w=o0(l,m);null!==w&&r.set(o.key,w),l.isValidDocument()||l.convertToNoDocument(vt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),d())}isEqual(e){return this.batchId===e.batchId&&wl(this.mutations,e.mutations,(t,r)=>Jm(t,r))&&wl(this.baseMutations,e.baseMutations,(t,r)=>Jm(t,r))}}class JC{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Qe(e.mutations.length===r.length);let o=a;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new JC(e,t,r,o)}}class XC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class gh{constructor(e,t,r,o,u=vt.min(),l=vt.min(),m=ur.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=m}withSequenceNumber(e){return new gh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new gh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new gh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class uM{constructor(e){this.ie=e}}function cM(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:WI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:c0(o=n.ie,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:At(o,u.version.toTimestamp()),createTime:At(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:fp(e.version)};else{if(!e.isUnknownDocument())return rt();r.unknownDocument={path:t.path.toArray(),version:fp(e.version)}}var o,u;return r}function WI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function fp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pp(n){const e=new An(n.seconds,n.nanoseconds);return vt.fromTimestamp(e)}function gp(n,e){const t=(e.baseMutations||[]).map(u=>ZC(n.ie,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>ZC(n.ie,u)),o=An.fromMillis(e.localWriteTimeMs);return new QC(e.batchId,o,t,r)}function h0(n){const e=pp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?pp(n.lastLimboFreeSnapshotVersion):vt.min();let r;var o;return void 0!==n.query.documents?(Qe(1===(o=n.query).documents.length),r=ji(up(WA(o.documents[0])))):r=ji(JA(n.query)),new gh(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ur.fromBase64String(n.resumeToken))}function lM(n,e){const t=fp(e.snapshotVersion),r=fp(e.lastLimboFreeSnapshotVersion);let o;o=xl(e.target)?QA(n.ie,e.target):KC(n.ie,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:tc(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function eT(n){const e=JA({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?X_(e,e.limit,"L"):e}function tT(n,e){return new XC(e.largestBatchId,ZC(n.ie,e.overlayMutation))}function dM(n,e){const t=e.path.lastSegment();return[n,cs(e.path.popLast()),t]}function hM(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:fp(r.readTime),documentKey:cs(r.documentKey.path),largestBatchId:r.largestBatchId}}class AN{getBundleMetadata(e,t){return fM(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:pp(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return fM(e).put({bundleId:(r=t).id,createTime:fp(cr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return pM(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:eT(o.bundledQuery),readTime:pp(o.readTime)};var o})}saveNamedQuery(e,t){return pM(e).put({name:(r=t).name,readTime:fp(cr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function fM(n){return ci(n,"bundles")}function pM(n){return ci(n,"namedQueries")}class ZI{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new ZI(e,t.uid||"")}getOverlay(e,t){return f0(e).get(dM(this.userId,t)).next(r=>r?tT(this.yt,r):null)}getOverlays(e,t){const r=Qa();return ne.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const m=new XC(t,l);o.push(this.oe(e,m))}),ne.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(cs(l.getCollectionPath())));const u=[];return o.forEach(l=>{const m=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(f0(e).Y("collectionPathOverlayIndex",m))}),ne.waitFor(u)}getOverlaysForCollection(e,t,r){const o=Qa(),u=cs(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return f0(e).W("collectionPathOverlayIndex",l).next(m=>{for(const w of m){const b=tT(this.yt,w);o.set(b.getKey(),b)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=Qa();let l;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return f0(e).Z({index:"collectionGroupOverlayIndex",range:m},(w,b,A)=>{const N=tT(this.yt,b);u.size()<o||N.largestBatchId===l?(u.set(N.getKey(),N),l=N.largestBatchId):A.done()}).next(()=>u)}oe(e,t){return f0(e).put(function(r,o,u){const[l,m,w]=dM(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:d0(r.ie,u.mutation)}}(this.yt,this.userId,t))}}function f0(n){return ci(n,"documentOverlays")}class mp{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(Vn(e.integerValue));else if("doubleValue"in e){const r=Vn(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),Om(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(Xu(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?Ps(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):rt()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const o of Object.keys(r))this.de(o,t),this.ce(r[o],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const o of r)this.ce(o,t)}me(e,t){this.he(t,37),qe.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function MN(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function gM(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=MN(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}mp.Ie=new mp;class xN{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const o=t.codePointAt(0);this.Ee(240|o>>>18),this.Ee(128|63&o>>>12),this.Ee(128|63&o>>>6),this.Ee(128|63&o)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const o=t.codePointAt(0);this.be(240|o>>>18),this.be(128|63&o>>>12),this.be(128|63&o>>>6),this.be(128|63&o)}}this.Pe()}Se(e){const t=this.De(e),r=gM(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}xe(e){const t=this.De(e),r=gM(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class RN{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class NN{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class p0{constructor(){this.$e=new xN,this.Be=new RN(this.$e),this.Le=new NN(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class yp{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new yp(this.indexId,this.documentKey,this.arrayValue,r)}}function mh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=mM(n.arrayValue,e.arrayValue),0!==t?t:(t=mM(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function mM(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class ON{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){Qe(e.collectionGroup===this.collectionId);const t=tp(e);if(void 0!==t&&!this.We(t))return!1;const r=ih(e);let o=0,u=0;for(;o<r.length&&this.We(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Qe){const l=r[o];if(!this.ze(this.Qe,l)||!this.He(this.Ke[u++],l))return!1;++o}for(;o<r.length;++o)if(u>=this.Ke.length||!this.He(this.Ke[u++],r[o]))return!1;return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function yM(n){var e,t;if(Qe(n instanceof Jt||n instanceof an),n instanceof Jt){if(n instanceof NI){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>Jt.create(n.field,"==",u)))||[];return an.create(o,"or")}return n}const r=n.filters.map(o=>yM(o));return an.create(r,n.op)}function PN(n){if(0===n.getFilters().length)return[];const e=iT(yM(n));return Qe(vM(e)),nT(e)||rT(e)?[e]:e.getFilters()}function nT(n){return n instanceof Jt}function rT(n){return n instanceof an&&z_(n)}function vM(n){return nT(n)||rT(n)||function(e){if(e instanceof an&&Bm(e)){for(const t of e.getFilters())if(!nT(t)&&!rT(t))return!1;return!0}return!1}(n)}function iT(n){if(Qe(n instanceof Jt||n instanceof an),n instanceof Jt)return n;if(1===n.filters.length)return iT(n.filters[0]);const e=n.filters.map(r=>iT(r));let t=an.create(e,n.op);return t=KI(t),vM(t)?t:(Qe(t instanceof an),Qe(Al(t)),Qe(t.filters.length>1),t.filters.reduce((r,o)=>sT(r,o)))}function sT(n,e){let t;return Qe(n instanceof Jt||n instanceof an),Qe(e instanceof Jt||e instanceof an),t=n instanceof Jt?e instanceof Jt?an.create([n,e],"and"):_M(n,e):e instanceof Jt?_M(e,n):function(r,o){if(Qe(r.filters.length>0&&o.filters.length>0),Al(r)&&Al(o))return W_(r,o.getFilters());const u=Bm(r)?r:o,l=Bm(r)?o:r,m=u.filters.map(w=>sT(w,l));return an.create(m,"or")}(n,e),KI(t)}function _M(n,e){if(Al(e))return W_(e,n.getFilters());{const t=e.filters.map(r=>sT(n,r));return an.create(t,"or")}}function KI(n){if(Qe(n instanceof Jt||n instanceof an),n instanceof Jt)return n;const e=n.getFilters();if(1===e.length)return KI(e[0]);if(q_(n))return n;const t=e.map(o=>KI(o)),r=[];return t.forEach(o=>{o instanceof Jt?r.push(o):o instanceof an&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:an.create(r,n.op)}class kN{constructor(){this.Je=new oT}addToCollectionParentIndex(e,t){return this.Je.add(t),ne.resolve()}getCollectionParents(e,t){return ne.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return ne.resolve()}deleteFieldIndex(e,t){return ne.resolve()}getDocumentsMatchingTarget(e,t){return ne.resolve(null)}getIndexType(e,t){return ne.resolve(0)}getFieldIndexes(e,t){return ne.resolve([])}getNextCollectionGroupToUpdate(e){return ne.resolve(null)}getMinOffset(e,t){return ne.resolve(Bi.min())}getMinOffsetFromCollectionGroup(e,t){return ne.resolve(Bi.min())}updateCollectionGroup(e,t,r){return ne.resolve()}updateIndexEntries(e,t){return ne.resolve()}}class oT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new dn(Xt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new dn(Xt.comparator)).toArray()}}const YI=new Uint8Array(0);class FN{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new oT,this.Xe=new ic(r=>tc(r),(r,o)=>nc(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const u={collectionId:r,parent:cs(o)};return wM(e).put(u)}return ne.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[Xf(t),""],!1,!0);return wM(e).W(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(oc(l.parent))}return r})}addFieldIndex(e,t){const r=QI(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(m=>[m.fieldPath.canonicalString(),m.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=m0(e);return u.next(m=>{l.put(hM(m,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=QI(e),o=m0(e),u=g0(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=g0(e);let o=!0;const u=new Map;return ne.forEach(this.Ze(t),l=>this.tn(e,l).next(m=>{o&&(o=!!m),u.set(l,m)})).next(()=>{if(o){let l=d();const m=[];return ne.forEach(u,(w,b)=>{var A;xe("IndexedDbIndexManager",`Using index ${A=w,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map($t=>`${$t.fieldPath}:${$t.kind}`).join(",")}`} to execute ${tc(t)}`);const N=function($t,Ht){const Bt=tp(Ht);if(void 0===Bt)return null;for(const Wt of ap($t,Bt.fieldPath))switch(Wt.op){case"array-contains-any":return Wt.value.arrayValue.values||[];case"array-contains":return[Wt.value]}return null}(b,w),$=function($t,Ht){const Bt=new Map;for(const Wt of ih(Ht))for(const Jr of ap($t,Wt.fieldPath))switch(Jr.op){case"==":case"in":Bt.set(Wt.fieldPath.canonicalString(),Jr.value);break;case"not-in":case"!=":return Bt.set(Wt.fieldPath.canonicalString(),Jr.value),Array.from(Bt.values())}return null}(b,w),J=function($t,Ht){const Bt=[];let Wt=!0;for(const Jr of ih(Ht)){const U0=0===Jr.kind?kI($t,Jr.fieldPath,$t.startAt):FI($t,Jr.fieldPath,$t.startAt);Bt.push(U0.value),Wt&&(Wt=U0.inclusive)}return new Er(Bt,Wt)}(b,w),ce=function($t,Ht){const Bt=[];let Wt=!0;for(const Jr of ih(Ht)){const U0=0===Jr.kind?FI($t,Jr.fieldPath,$t.endAt):kI($t,Jr.fieldPath,$t.endAt);Bt.push(U0.value),Wt&&(Wt=U0.inclusive)}return new Er(Bt,Wt)}(b,w),Pe=this.en(w,b,J),$e=this.en(w,b,ce),Gt=this.nn(w,b,$),qt=this.sn(w.indexId,N,Pe,J.inclusive,$e,ce.inclusive,Gt);return ne.forEach(qt,$t=>r.J($t,t.limit).next(Ht=>{Ht.forEach(Bt=>{const Wt=qe.fromSegments(Bt.documentKey);l.has(Wt)||(l=l.add(Wt),m.push(Wt))})}))}).next(()=>m)}return ne.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:PN(an.create(e.filters,"and")).map(r=>Hm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,o,u,l,m){const w=(null!=t?t.length:1)*Math.max(r.length,u.length),b=w/(null!=t?t.length:1),A=[];for(let N=0;N<w;++N){const $=t?this.rn(t[N/b]):YI,J=this.on(e,$,r[N%b],o),ce=this.un(e,$,u[N%b],l),Pe=m.map($e=>this.on(e,$,$e,!0));A.push(...this.createRange(J,ce,Pe))}return A}on(e,t,r,o){const u=new yp(e,qe.empty(),t,r);return o?u:u.Ue()}un(e,t,r,o){const u=new yp(e,qe.empty(),t,r);return o?u.Ue():u}tn(e,t){const r=new ON(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const m of u)r.je(m)&&(!l||m.fields.length>l.fields.length)&&(l=m);return l})}getIndexType(e,t){let r=2;const o=this.Ze(t);return ne.forEach(o,u=>this.tn(e,u).next(l=>{l?0!==r&&l.fields.length<function(m){let w=new dn(vn.comparator),b=!1;for(const A of m.filters)for(const N of A.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?b=!0:w=w.add(N.field));for(const A of m.orderBy)A.field.isKeyField()||(w=w.add(A.field));return w.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}cn(e,t){const r=new p0;for(const o of ih(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.qe(o.kind);mp.Ie.ue(u,l)}return r.Fe()}rn(e){const t=new p0;return mp.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new p0;return mp.Ie.ue(Sl(this.databaseId,t),r.qe(function(o){const u=ih(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let o=[];o.push(new p0);let u=0;for(const l of ih(e)){const m=r[u++];for(const w of o)if(this.hn(t,l.fieldPath)&&Lm(m))o=this.ln(o,l,m);else{const b=w.qe(l.kind);mp.Ie.ue(m,b)}}return this.fn(o)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const m of o){const w=new p0;w.seed(m.Fe()),mp.Ie.ue(l,w.qe(t.kind)),u.push(w)}return u}hn(e,t){return!!e.filters.find(r=>r instanceof Jt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=QI(e),o=m0(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const l=[];return ne.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{l.push(function(b,A){const N=A?new np(A.sequenceNumber,new Bi(pp(A.readTime),new qe(oc(A.documentKey)),A.largestBatchId)):np.empty(),$=b.fields.map(([J,ce])=>new N_(vn.fromServerFormat(J),ce));return new ep(b.indexId,b.collectionGroup,$,N)}(m,w))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Pt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=QI(e),u=m0(e);return this.dn(e).next(l=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>ne.forEach(m,w=>u.put(hM(w.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ne.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?ne.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),ne.forEach(m,w=>this._n(e,o,w).next(b=>{const A=this.wn(u,w);return b.isEqual(A)?ne.resolve():this.mn(e,u,w,b,A)}))))})}gn(e,t,r,o){return g0(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,o){return g0(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const o=g0(e);let u=new dn(mh);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(l,m)=>{u=u.add(new yp(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}wn(e,t){let r=new dn(mh);const o=this.cn(t,e);if(null==o)return r;const u=tp(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Lm(l))for(const m of l.arrayValue.values||[])r=r.add(new yp(t.indexId,e.key,this.rn(m),o))}else r=r.add(new yp(t.indexId,e.key,YI,o));return r}mn(e,t,r,o,u){xe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(m,w,b,A,N){const $=m.getIterator(),J=w.getIterator();let ce=Ml($),Pe=Ml(J);for(;ce||Pe;){let $e=!1,Gt=!1;if(ce&&Pe){const qt=b(ce,Pe);qt<0?Gt=!0:qt>0&&($e=!0)}else null!=ce?Gt=!0:$e=!0;$e?(A(Pe),Pe=Ml(J)):Gt?(N(ce),ce=Ml($)):(ce=Ml($),Pe=Ml(J))}}(o,u,mh,m=>{l.push(this.gn(e,t,r,m))},m=>{l.push(this.yn(e,t,r,m))}),ne.waitFor(l)}dn(e){let t=1;return m0(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,m)=>mh(l,m)).filter((l,m,w)=>!m||0!==mh(l,w[m-1]));const o=[];o.push(e);for(const l of r){const m=mh(l,e),w=mh(l,t);if(0===m)o[0]=e.Ue();else if(m>0&&w<0)o.push(l),o.push(l.Ue());else if(w>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2){if(this.pn(o[l],o[l+1]))return[];u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,YI,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,YI,[]]))}return u}pn(e,t){return mh(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(EM)}getMinOffset(e,t){return ne.mapArray(this.Ze(t),r=>this.tn(e,r).next(o=>o||rt())).next(EM)}}function wM(n){return ci(n,"collectionParents")}function g0(n){return ci(n,"indexEntries")}function QI(n){return ci(n,"indexConfiguration")}function m0(n){return ci(n,"indexState")}function EM(n){Qe(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;P_(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Bi(e.readTime,e.documentKey,t)}const IM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ks{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ks(e,ks.DEFAULT_COLLECTION_PERCENTILE,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function DM(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let m=0;const w=r.Z({range:l},(A,N,$)=>(m++,$.delete()));u.push(w.next(()=>{Qe(1===m)}));const b=[];for(const A of t.mutations){const N=iM(e,A.key.path,t.batchId);u.push(o.delete(N)),b.push(A.key)}return ne.waitFor(u).next(()=>b)}function JI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw rt();e=n.noDocument}return JSON.stringify(e).length}ks.DEFAULT_COLLECTION_PERCENTILE=10,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ks.DEFAULT=new ks(41943040,ks.DEFAULT_COLLECTION_PERCENTILE,ks.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ks.DISABLED=new ks(-1,0,0);class XI{constructor(e,t,r,o){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static re(e,t,r,o){Qe(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new XI(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return yh(e).Z({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=ny(e),l=yh(e);return l.add({}).next(m=>{Qe("number"==typeof m);const w=new QC(m,t,r,o),b=function($,J,ce){const Pe=ce.baseMutations.map(Gt=>d0($.ie,Gt)),$e=ce.mutations.map(Gt=>d0($.ie,Gt));return{userId:J,batchId:ce.batchId,localWriteTimeMs:ce.localWriteTime.toMillis(),baseMutations:Pe,mutations:$e}}(this.yt,this.userId,w),A=[];let N=new dn(($,J)=>Pt($.canonicalString(),J.canonicalString()));for(const $ of o){const J=iM(this.userId,$.key.path,m);N=N.add($.key.path.popLast()),A.push(l.put(b)),A.push(u.put(J,lN))}return N.forEach($=>{A.push(this.indexManager.addToCollectionParentIndex(e,$))}),e.addOnCommittedListener(()=>{this.In[m]=w.keys()}),ne.waitFor(A).next(()=>w)})}lookupMutationBatch(e,t){return yh(e).get(t).next(r=>r?(Qe(r.userId===this.userId),gp(this.yt,r)):null)}Tn(e,t){return this.In[t]?ne.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return yh(e).Z({index:"userMutationsIndex",range:o},(l,m,w)=>{m.userId===this.userId&&(Qe(m.batchId>=r),u=gp(this.yt,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return yh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return yh(e).W("userMutationsIndex",t).next(r=>r.map(o=>gp(this.yt,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=qI(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return ny(e).Z({range:o},(l,m,w)=>{const[b,A,N]=l,$=oc(A);if(b===this.userId&&t.path.isEqual($))return yh(e).get(N).next(J=>{if(!J)throw rt();Qe(J.userId===this.userId),u.push(gp(this.yt,J))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dn(Pt);const o=[];return t.forEach(u=>{const l=qI(this.userId,u.path),m=IDBKeyRange.lowerBound(l),w=ny(e).Z({range:m},(b,A,N)=>{const[$,J,ce]=b,Pe=oc(J);$===this.userId&&u.path.isEqual(Pe)?r=r.add(ce):N.done()});o.push(w)}),ne.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=qI(this.userId,r),l=IDBKeyRange.lowerBound(u);let m=new dn(Pt);return ny(e).Z({range:l},(w,b,A)=>{const[N,$,J]=w,ce=oc($);N===this.userId&&r.isPrefixOf(ce)?ce.length===o&&(m=m.add(J)):A.done()}).next(()=>this.En(e,m))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(yh(e).get(u).next(l=>{if(null===l)throw rt();Qe(l.userId===this.userId),r.push(gp(this.yt,l))}))}),ne.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return DM(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ne.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ne.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return ny(e).Z({range:r},(u,l,m)=>{if(u[0]===this.userId){const w=oc(u[1]);o.push(w)}else m.done()}).next(()=>{Qe(0===o.length)})})}containsKey(e,t){return bM(e,this.userId,t)}Rn(e){return CM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function bM(n,e,t){const r=qI(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return ny(n).Z({range:u,X:!0},(m,w,b)=>{const[A,N,$]=m;A===e&&N===o&&(l=!0),b.done()}).next(()=>l)}function yh(n){return ci(n,"mutations")}function ny(n){return ci(n,"documentMutations")}function CM(n){return ci(n,"mutationQueues")}class vp{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new vp(0)}static vn(){return new vp(-1)}}class LN{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new vp(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>vt.fromTimestamp(new An(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ry(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Qe(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return ry(e).Z((l,m)=>{const w=h0(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>ne.waitFor(u)).next(()=>o)}forEachTarget(e,t){return ry(e).Z((r,o)=>{const u=h0(o);t(u)})}Vn(e){return TM(e).get("targetGlobalKey").next(t=>(Qe(null!==t),t))}Sn(e,t){return TM(e).put("targetGlobalKey",t)}Dn(e,t){return ry(e).put(lM(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=tc(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return ry(e).Z({range:o,index:"queryTargetsIndex"},(l,m,w)=>{const b=h0(m);nc(t,b.target)&&(u=b,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=vh(e);return t.forEach(l=>{const m=cs(l.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,l))}),ne.waitFor(o)}removeMatchingKeys(e,t,r){const o=vh(e);return ne.forEach(t,u=>{const l=cs(u.path);return ne.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=vh(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=vh(e);let u=d();return o.Z({range:r,X:!0},(l,m,w)=>{const b=oc(l[1]),A=new qe(b);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=cs(t.path),o=IDBKeyRange.bound([r],[Xf(r)],!1,!0);let u=0;return vh(e).Z({index:"documentTargetsIndex",X:!0,range:o},([l,m],w,b)=>{0!==l&&(u++,b.done())}).next(()=>u>0)}ne(e,t){return ry(e).get(t).next(r=>r?h0(r):null)}}function ry(n){return ci(n,"targets")}function TM(n){return ci(n,"targetGlobal")}function vh(n){return ci(n,"targetDocuments")}function SM([n,e],[t,r]){const o=Pt(n,t);return 0===o?Pt(e,r):o}class VN{constructor(e){this.xn=e,this.buffer=new dn(SM),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();SM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class UN{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;xe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Za(r)?xe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Qu(r)}yield t.Fn(3e5)}))}}class BN{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ne.resolve(Os.at);const r=new VN(t);return this.$n.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector","Garbage collection skipped; disabled"),ne.resolve(IM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(xe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),IM):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,o,u,l,m,w,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(xe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,l=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,m=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(b=Date.now(),Am()<=$a.in.DEBUG&&xe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-A}ms\n\tDetermined least recently used ${o} in `+(m-l)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${N} documents in `+(b-w)+`ms\nTotal Duration: ${b-A}ms`),ne.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class jN{constructor(e,t){this.db=e,this.garbageCollector=new BN(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return eD(e,r)}removeReference(e,t,r){return eD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return eD(e,t)}Gn(e,t){return function(r,o){let u=!1;return CM(r).tt(l=>bM(r,l,o).next(m=>(m&&(u=!0),ne.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(l,m)=>{if(m<=t){const w=this.Gn(e,l).next(b=>{if(!b)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,vt.min()),vh(e).delete([0,cs(l.path)])))});o.push(w)}}).next(()=>ne.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return eD(e,t)}Kn(e,t){const r=vh(e);let o,u=Os.at;return r.Z({index:"documentTargetsIndex"},([l,m],{path:w,sequenceNumber:b})=>{0===l?(u!==Os.at&&t(new qe(oc(o)),u),u=b,o=w):u=Os.at}).next(()=>{u!==Os.at&&t(new qe(oc(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function eD(n,e){return vh(n).put((r=n.currentSequenceNumber,{targetId:0,path:cs(e.path),sequenceNumber:r}));var r}class AM{constructor(){this.changes=new ic(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ne.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class $N{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return _p(e).put(r)}removeEntry(e,t,r){return _p(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],WI(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Mn.newInvalidDocument(t);return _p(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(y0(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Mn.newInvalidDocument(t)};return _p(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(y0(t))},(o,u)=>{r={document:this.jn(t,u),size:JI(u)}}).next(()=>r)}getEntries(e,t){let r=us();return this.zn(e,t,(o,u)=>{const l=this.jn(o,u);r=r.insert(o,l)}).next(()=>r)}Hn(e,t){let r=us(),o=new Qn(qe.comparator);return this.zn(e,t,(u,l)=>{const m=this.jn(u,l);r=r.insert(u,m),o=o.insert(u,JI(l))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return ne.resolve();let o=new dn(NM);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(y0(o.first()),y0(o.last())),l=o.getIterator();let m=l.getNext();return _p(e).Z({index:"documentKeyIndex",range:u},(w,b,A)=>{const N=qe.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;m&&NM(m,N)<0;)r(m,null),m=l.getNext();m&&m.isEqual(N)&&(r(m,b),m=l.hasNext()?l.getNext():null),m?A.j(y0(m)):A.done()}).next(()=>{for(;m;)r(m,null),m=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,o){const u=t.path,l=[u.popLast().toArray(),u.lastSegment(),WI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _p(e).W(IDBKeyRange.bound(l,m,!0)).next(w=>{let b=us();for(const A of w){const N=this.jn(qe.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);N.isFoundDocument()&&(cp(t,N)||o.has(N.key))&&(b=b.insert(N.key,N))}return b})}getAllFromCollectionGroup(e,t,r,o){let u=us();const l=RM(t,r),m=RM(t,Bi.max());return _p(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,m,!0)},(w,b,A)=>{const N=this.jn(qe.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(N.key,N),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new HN(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return xM(e).get("remoteDocumentGlobalKey").next(t=>(Qe(!!t),t))}Qn(e,t){return xM(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function SN(n,e){let t;if(e.document)t=YA(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),o=pp(e.noDocument.readTime);t=Mn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return rt();{const r=qe.fromSegments(e.unknownDocument.path),o=pp(e.unknownDocument.version);t=Mn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new An(r[0],r[1]);return vt.fromTimestamp(o)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(vt.min()))return r}return Mn.newInvalidDocument(e)}}function MM(n){return new $N(n)}class HN extends AM{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new ic(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new dn((u,l)=>Pt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const m=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,m.readTime)),l.isValidDocument()){const w=cM(this.Yn.yt,l);o=o.add(u.path.popLast());const b=JI(w);r+=b-m.size,t.push(this.Yn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=cM(this.Yn.yt,l.convertToNoDocument(vt.min()));t.push(this.Yn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),ne.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,l)=>{this.Xn.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function xM(n){return ci(n,"remoteDocumentGlobal")}function _p(n){return ci(n,"remoteDocumentsV14")}function y0(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function RM(n,e){const t=e.documentKey.path.toArray();return[n,WI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function NM(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Pt(t[u],r[u]),o)return o;return o=Pt(t.length,r.length),o||(o=Pt(t[t.length-2],r[r.length-2]),o||Pt(t[t.length-1],r[r.length-1]))}class GN{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class OM{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&Qm(r.mutation,o,as.empty(),An.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,d()).next(()=>r))}getLocalViewOfDocuments(e,t,r=d()){const o=Qa();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=Xm();return u.forEach((m,w)=>{l=l.insert(m,w.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Qa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,d()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,m)=>{t.set(l,m)})})}computeViews(e,t,r,o){let u=us();const l=s(),m=s();return t.forEach((w,b)=>{const A=r.get(b.key);o.has(b.key)&&(void 0===A||A.mutation instanceof Ya)?u=u.insert(b.key,b):void 0!==A?(l.set(b.key,A.mutation.getFieldMask()),Qm(A.mutation,b,A.mutation.getFieldMask(),An.now())):l.set(b.key,as.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((b,A)=>l.set(b,A)),t.forEach((b,A)=>{var N;return m.set(b,new GN(A,null!==(N=l.get(b))&&void 0!==N?N:null))}),m))}recalculateAndSaveOverlays(e,t){const r=s();let o=new Qn((l,m)=>l-m),u=d();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const m of l)m.keys().forEach(w=>{const b=t.get(w);if(null===b)return;let A=r.get(w)||as.empty();A=m.applyToLocalView(b,A),r.set(w,A);const N=(o.get(m.batchId)||d()).add(w);o=o.insert(m.batchId,N)})}).next(()=>{const l=[],m=o.getReverseIterator();for(;m.hasNext();){const w=m.getNext(),b=w.key,A=w.value,N=i();A.forEach($=>{if(!u.has($)){const J=o0(t.get($),r.get($));null!==J&&N.set($,J),u=u.add($)}}),l.push(this.documentOverlayCache.saveOverlays(e,b,N))}return ne.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return qe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):J_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):ne.resolve(Qa());let m=-1,w=u;return l.next(b=>ne.forEach(b,(A,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),u.get(A)?ne.resolve():this.remoteDocumentCache.getEntry(e,A).next($=>{w=w.insert(A,$)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,w,b,d())).next(A=>({batchId:m,changes:zC(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let o=Xm();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Xm();return this.indexManager.getCollectionParents(e,o).next(l=>ne.forEach(l,m=>{const w=(b=t,A=m.child(o),new rc(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(b=>{b.forEach((A,N)=>{u=u.insert(A,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(u=>{o.forEach((m,w)=>{const b=w.getKey();null===u.get(b)&&(u=u.insert(b,Mn.newInvalidDocument(b)))});let l=Xm();return u.forEach((m,w)=>{const b=o.get(m);void 0!==b&&Qm(b.mutation,w,as.empty(),An.now()),cp(t,w)&&(l=l.insert(m,w))}),l})}}class zN{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ne.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:cr(r.createTime)}),ne.resolve()}getNamedQuery(e,t){return ne.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:eT(r.bundledQuery),readTime:cr(r.readTime)}),ne.resolve();var r}}class qN{constructor(){this.overlays=new Qn(qe.comparator),this.es=new Map}getOverlay(e,t){return ne.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Qa();return ne.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.oe(e,t,u)}),ne.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),ne.resolve()}getOverlaysForCollection(e,t,r){const o=Qa(),u=t.length+1,l=new qe(t.child("")),m=this.overlays.getIteratorFrom(l);for(;m.hasNext();){const w=m.getNext().value,b=w.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return ne.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Qn((b,A)=>b-A);const l=this.overlays.getIterator();for(;l.hasNext();){const b=l.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let A=u.get(b.largestBatchId);null===A&&(A=Qa(),u=u.insert(b.largestBatchId,A)),A.set(b.getKey(),b)}}const m=Qa(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((b,A)=>m.set(b,A)),!(m.size()>=o)););return ne.resolve(m)}oe(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new XC(t,r));let u=this.es.get(t);void 0===u&&(u=d(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class aT{constructor(){this.ns=new dn(li.ss),this.rs=new dn(li.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new li(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new li(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new qe(new Xt([])),r=new li(t,e),o=new li(t,e+1),u=[];return this.rs.forEachInRange([r,o],l=>{this.cs(l),u.push(l.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new qe(new Xt([])),r=new li(t,e),o=new li(t,e+1);let u=d();return this.rs.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new li(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class li{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return qe.comparator(e.key,t.key)||Pt(e._s,t._s)}static os(e,t){return Pt(e._s,t._s)||qe.comparator(e.key,t.key)}}class WN{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new dn(li.ss)}checkEmpty(e){return ne.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const l=new QC(u,t,r,o);this.mutationQueue.push(l);for(const m of o)this.gs=this.gs.add(new li(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return ne.resolve(l)}lookupMutationBatch(e,t){return ne.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return ne.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ne.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new li(t,0),o=new li(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],l=>{const m=this.ys(l._s);u.push(m)}),ne.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new dn(Pt);return t.forEach(o=>{const u=new li(o,0),l=new li(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,l],m=>{r=r.add(m._s)})}),ne.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;qe.isDocumentKey(u)||(u=u.child(""));const l=new li(new qe(u),0);let m=new dn(Pt);return this.gs.forEachWhile(w=>{const b=w.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(m=m.add(w._s)),!0)},l),ne.resolve(this.Is(m))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Qe(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return ne.forEach(t.mutations,o=>{const u=new li(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new li(t,0),o=this.gs.firstAfterOrEqual(r);return ne.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return ne.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class ZN{constructor(e){this.Es=e,this.docs=new Qn(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ne.resolve(r?r.document.mutableCopy():Mn.newInvalidDocument(t))}getEntries(e,t){let r=us();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Mn.newInvalidDocument(o))}),ne.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=us();const l=t.path,m=new qe(l.child("")),w=this.docs.getIteratorFrom(m);for(;w.hasNext();){const{key:b,value:{document:A}}=w.getNext();if(!l.isPrefixOf(b.path))break;b.path.length>l.length+1||P_(O_(A),r)<=0||(o.has(A.key)||cp(t,A))&&(u=u.insert(A.key,A.mutableCopy()))}return ne.resolve(u)}getAllFromCollectionGroup(e,t,r,o){rt()}As(e,t){return ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new KN(this)}getSize(e){return ne.resolve(this.size)}}class KN extends AM{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),ne.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class YN{constructor(e){this.persistence=e,this.Rs=new ic(t=>tc(t),nc),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new aT,this.targetCount=0,this.vs=vp.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),ne.resolve()}getLastRemoteSnapshotVersion(e){return ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ne.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),ne.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new vp(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ne.resolve()}updateTargetData(e,t){return this.Dn(t),ne.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ne.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((l,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Rs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),ne.waitFor(u).next(()=>o)}getTargetCount(e){return ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return ne.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),ne.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),ne.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return ne.resolve(r)}containsKey(e,t){return ne.resolve(this.Ps.containsKey(t))}}class PM{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Os(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new YN(this),this.indexManager=new kN,this.remoteDocumentCache=new ZN(r=>this.referenceDelegate.xs(r)),this.yt=new uM(t),this.Ns=new zN(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qN,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new WN(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){xe("MemoryPersistence","Starting transaction:",e);const o=new QN(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ms(e,t){return ne.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class QN extends F_{constructor(e){super(),this.currentSequenceNumber=e}}class tD{constructor(e){this.persistence=e,this.Fs=new aT,this.$s=null}static Bs(e){return new tD(e)}get Ls(){if(this.$s)return this.$s;throw rt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),ne.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),ne.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ne.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ne.forEach(this.Ls,r=>{const o=qe.fromPath(r);return this.qs(e,o).next(u=>{u||t.removeEntry(o,vt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return ne.or([()=>ne.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class JN{constructor(e){this.yt=e}$(e,t,r,o){const u=new Rm("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rM,{unique:!0}),m.createObjectStore("documentMutations"),kM(e),function(m){m.createObjectStore("remoteDocuments")}(e));let l=ne.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),kM(e)),l=l.next(()=>function(m){const w=m.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",b)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(m,w){return w.store("mutations").W().next(b=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rM,{unique:!0});const A=w.store("mutations"),N=b.map($=>A.put($));return ne.waitFor(N)})}(e,u))),l=l.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.Us(u))),r<6&&o>=6&&(l=l.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(l=l.next(()=>this.Gs(u))),r<8&&o>=8&&(l=l.next(()=>this.Qs(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.js(u))),r<11&&o>=11&&(l=l.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:IN});w.createIndex("collectionPathOverlayIndex",DN,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",bN,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:dN});w.createIndex("documentKeyIndex",hN),w.createIndex("collectionGroupIndex",fN)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.zs(e,u))),r<15&&o>=15&&(l=l.next(()=>function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:vN}).createIndex("sequenceNumberIndex",_N,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:wN}).createIndex("documentKeyIndex",EN,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=JI(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>ne.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(m=>ne.forEach(m,w=>{Qe(w.userId===u.userId);const b=gp(this.yt,w);return DM(e,u.userId,b).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((l,m)=>{const w=new Xt(l),b=[0,cs(w)];u.push(t.get(b).next(A=>A?ne.resolve():t.put({targetId:0,path:cs(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>ne.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:yN});const r=t.store("collectionParents"),o=new oT,u=l=>{if(o.add(l)){const m=l.lastSegment(),w=l.popLast();return r.put({collectionId:m,parent:cs(w)})}};return t.store("remoteDocuments").Z({X:!0},(l,m)=>{const w=new Xt(l);return u(w.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,m,w],b)=>{const A=oc(m);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=h0(o),l=lM(this.yt,u);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,l)=>{const m=t.store("remoteDocumentsV14"),w=(b=l,b.document?new qe(Xt.fromString(b.document.name).popFirst(5)):b.noDocument?qe.fromSegments(b.noDocument.path):b.unknownDocument?qe.fromSegments(b.unknownDocument.path):rt()).path.toArray();var b;const A={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(m.put(A))}).next(()=>ne.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=MM(this.yt),u=new PM(tD.Bs,this.yt.ie);return r.W().next(l=>{const m=new Map;return l.forEach(w=>{var b;let A=null!==(b=m.get(w.userId))&&void 0!==b?b:d();gp(this.yt,w).keys().forEach(N=>A=A.add(N)),m.set(w.userId,A)}),ne.forEach(m,(w,b)=>{const A=new wr(b),N=ZI.re(this.yt,A),$=u.getIndexManager(A),J=XI.re(A,this.yt,$,u.referenceDelegate);return new OM(o,J,N,$).recalculateAndSaveOverlaysForDocumentKeys(new YC(t,Os.at),w).next()})})}}function kM(n){n.createObjectStore("targetDocuments",{keyPath:gN}).createIndex("documentTargetsIndex",mN,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",pN,{unique:!0}),n.createObjectStore("targetGlobal")}const uT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class cT{constructor(e,t,r,o,u,l,m,w,b,A,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=l,this.document=m,this.Js=b,this.Ys=A,this.Xs=N,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=$=>Promise.resolve(),!cT.C())throw new Ae(ie.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jN(this,o),this.ii=t+"main",this.yt=new uM(w),this.ri=new Ns(this.ii,this.Xs,new JN(this.yt)),this.Cs=new LN(this.referenceDelegate,this.yt),this.remoteDocumentCache=MM(this.yt),this.Ns=new AN,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&Yn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(ie.FAILED_PRECONDITION,uT);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Os(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,me.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>nD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Za(e))return xe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return xe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return v0(e).get("owner").next(t=>ne.resolve(this.mi(t)))}gi(e){return nD(e).delete(this.clientId)}yi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=ci(r,"clientMetadata");return o.W().next(u=>{const l=e.Ii(u,18e5),m=u.filter(w=>-1===l.indexOf(w));return ne.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ne.resolve(!0):v0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ae(ie.FAILED_PRECONDITION,uT);return!1}}return!(!this.networkEnabled||!this.inForeground)||nD(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>!(this.clientId===o.clientId||!(!this.networkEnabled&&o.networkEnabled||!this.inForeground&&o.inForeground&&this.networkEnabled===o.networkEnabled))))}).next(t=>(this.isPrimary!==t&&xe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new YC(t,Os.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>nD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return XI.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new FN(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return ZI.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){xe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.Xs)?TN:14===l?aM:13===l?oM:12===l?CN:11===l?sM:void rt();var l;let m;return this.ri.runTransaction(e,o,u,w=>(m=new YC(w,this.Ss?this.Ss.next():Os.at),"readwrite-primary"===t?this.fi(m).next(b=>!!b||this.di(m)).next(b=>{if(!b)throw Yn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ae(ie.FAILED_PRECONDITION,k_);return r(m)}).next(b=>this.wi(m).next(()=>b)):this.Vi(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}Vi(e){return v0(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(ie.FAILED_PRECONDITION,uT)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return v0(e).put("owner",t)}static C(){return Ns.C()}_i(e){const t=v0(e);return t.get("owner").next(r=>this.mi(r)?(xe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ne.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Yn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,tn.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return xe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Yn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Yn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function v0(n){return ci(n,"owner")}function nD(n){return ci(n,"clientMetadata")}function lT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class dT{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=d(),o=d();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new dT(e,t.fromCache,r,o)}}class FM{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(Y_(t))return ne.resolve(null);let r=ji(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=X_(t,null,"F"),r=ji(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=d(...u);return this.Ni.getDocuments(e,l).next(m=>this.indexManager.getMinOffset(e,r).next(w=>{const b=this.Fi(t,m);return this.$i(t,b,l,w.readTime)?this.ki(e,X_(t,null,"F")):this.Bi(e,b,t,w)}))})))}Oi(e,t,r,o){return Y_(t)||o.isEqual(vt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const l=this.Fi(t,u);return this.$i(t,l,r,o)?this.Mi(e,t):(Am()<=$a.in.DEBUG&&xe("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),ch(t)),this.Bi(e,l,t,II(o,-1)))})}Fi(e,t){let r=new dn(e0(e));return t.forEach((o,u)=>{cp(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Mi(e,t){return Am()<=$a.in.DEBUG&&xe("QueryEngine","Using full collection scan to execute query:",ch(t)),this.Ni.getDocumentsMatchingQuery(e,t,Bi.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class XN{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.yt=o,this.qi=new Qn(Pt),this.Ui=new ic(u=>tc(u),nc),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new OM(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function LM(n,e,t,r){return new XN(n,e,t,r)}function VM(n,e){return hT.apply(this,arguments)}function hT(){return hT=(0,me.Z)(function*(n,e){const t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],m=[];let w=d();for(const b of o){l.push(b.batchId);for(const A of b.mutations)w=w.add(A.key)}for(const b of u){m.push(b.batchId);for(const A of b.mutations)w=w.add(A.key)}return t.localDocuments.getDocuments(r,w).next(b=>({ji:b,removedBatchIds:l,addedBatchIds:m}))})})}),hT.apply(this,arguments)}function UM(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function BM(n,e,t){let r=d(),o=d();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=us();return t.forEach((m,w)=>{const b=u.get(m);w.isFoundDocument()!==b.isFoundDocument()&&(o=o.add(m)),w.isNoDocument()&&w.version.isEqual(vt.min())?(e.removeEntry(m,w.readTime),l=l.insert(m,w)):!b.isValidDocument()||w.version.compareTo(b.version)>0||0===w.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(w),l=l.insert(m,w)):xe("LocalStore","Ignoring outdated watch update for ",m,". Current version:",b.version," Watch version:",w.version)}),{Wi:l,zi:o}})}function nO(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function iy(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,ne.resolve(o)):t.Cs.allocateTargetId(r).next(l=>(o=new gh(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.qi.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function sy(n,e,t){return fT.apply(this,arguments)}function fT(){return fT=(0,me.Z)(function*(n,e,t){const r=We(n),o=r.qi.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!Za(l))throw l;xe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.qi=r.qi.remove(e),r.Ui.delete(o.target)}),fT.apply(this,arguments)}function rD(n,e,t){const r=We(n);let o=vt.min(),u=d();return r.persistence.runTransaction("Execute query","readonly",l=>function(m,w,b){const A=We(m),N=A.Ui.get(b);return void 0!==N?ne.resolve(A.qi.get(N)):A.Cs.getTargetData(w,b)}(r,l,ji(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,m.targetId).next(w=>{u=w})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?o:vt.min(),t?u:d())).next(m=>(HM(r,UI(e),m),{documents:m,Hi:u})))}function jM(n,e){const t=We(n),r=We(t.Cs),o=t.qi.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ne(u,e).next(l=>l?l.target:null))}function $M(n,e){const t=We(n),r=t.Ki.get(e)||vt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,II(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(HM(t,e,o),o))}function HM(n,e,t){let r=n.Ki.get(e)||vt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function pT(){return pT=(0,me.Z)(function*(n,e,t,r){const o=We(n);let u=d(),l=us();for(const b of t){const A=e.Ji(b.metadata.name);b.document&&(u=u.add(A));const N=e.Yi(b);N.setReadTime(e.Xi(b.metadata.readTime)),l=l.insert(A,N)}const m=o.Gi.newChangeBuffer({trackRemovals:!0}),w=yield iy(o,(b=r,ji(up(Xt.fromString(`__bundle__/docs/${b}`)))));var b;return o.persistence.runTransaction("Apply bundle documents","readwrite",b=>BM(b,m,l).next(A=>(m.apply(b),A)).next(A=>o.Cs.removeMatchingKeysForTargetId(b,w.targetId).next(()=>o.Cs.addMatchingKeys(b,u,w.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(b,A.Wi,A.zi)).next(()=>A.Wi)))}),pT.apply(this,arguments)}function iO(n,e){return gT.apply(this,arguments)}function gT(){return gT=(0,me.Z)(function*(n,e,t=d()){const r=yield iy(n,ji(eT(e.bundledQuery))),o=We(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=cr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.Ns.saveNamedQuery(u,e);const m=r.withResumeToken(ur.EMPTY_BYTE_STRING,l);return o.qi=o.qi.insert(m.targetId,m),o.Cs.updateTargetData(u,m).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),gT.apply(this,arguments)}function GM(n,e){return`firestore_clients_${n}_${e}`}function zM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function mT(n,e){return`firestore_targets_${n}_${e}`}class iD{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new Ae(o.error.code,o.error.message))),l?new iD(e,t,o.state,u):(Yn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Ae(r.error.code,r.error.message))),u?new _0(e,r.state,o):(Yn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=v();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=V_(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new sD(e,u):(Yn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class yT{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new yT(t.clientId,t.onlineState):(Yn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class vT{constructor(){this.activeTargetIds=v()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _T{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Qn(Pt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=GM(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new vT),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(GM(e.persistenceKey,o));if(u){const l=sD.Zi(o,u);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(mT(this.persistenceKey,e));if(r){const o=_0.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(mT(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return xe("SharedClientState","READ",e,t),t}setItem(e,t){xe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){xe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(xe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Yn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let l=Os.at;if(null!=u)try{const m=JSON.parse(u);Qe("number"==typeof m),l=m}catch(m){Yn("SharedClientState","Failed to read sequence number from WebStorage",m)}return l}(r.newValue);o!==Os.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new iD(this.currentUser,e,t,r),u=zM(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=zM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=mT(this.persistenceKey,e),u=new _0(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return sD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return iD.Zi(new wr(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return _0.Zi(o,t)}yr(e){return yT.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);xe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),l=[],m=[];return u.forEach(w=>{o.has(w)||l.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Br(l,m).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=v();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class qM{constructor(){this.Lr=new vT,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new vT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sO{Ur(e){}shutdown(){}}class WM{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){xe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){xe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const oO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aO{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class uO extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,o,u){const l=this.ho(e,t);xe("RestConnection","Sending: ",l,r);const m={};return this.lo(m,o,u),this.fo(e,l,m,r).then(w=>(xe("RestConnection","Received: ",w),w),w=>{throw _l("RestConnection",`${e} failed with error: `,w,"url: ",l,"request:",r),w})}_o(e,t,r,o,u,l){return this.ao(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+th,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.oo}/v1/${t}:${oO[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,l)=>{const m=new wI;m.setWithCredentials(!0),m.listenOnce(S_.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case Qf.NO_ERROR:const b=m.getResponseJson();xe("Connection","XHR received:",JSON.stringify(b)),u(b);break;case Qf.TIMEOUT:xe("Connection",'RPC "'+e+'" timed out'),l(new Ae(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Qf.HTTP_ERROR:const A=m.getStatus();if(xe("Connection",'RPC "'+e+'" failed with status:',A,"response text:",m.getResponseText()),A>0){let N=m.getResponseJson();Array.isArray(N)&&(N=N[0]);const $=N?.error;if($&&$.status&&$.message){const J=function(ce){const Pe=ce.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(Pe)>=0?Pe:ie.UNKNOWN}($.status);l(new Ae(J,$.message))}else l(new Ae(ie.UNKNOWN,"Server responded with status "+m.getStatus()))}else l(new Ae(ie.UNAVAILABLE,"Connection failed."));break;default:rt()}}finally{xe("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}wo(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=T_(),l=vI(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new EC({})),this.lo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const w=o.join("");xe("Connection","Creating WebChannel: "+w,m);const b=u.createWebChannel(w,m);let A=!1,N=!1;const $=new aO({Hr:ce=>{N?xe("Connection","Not sending because WebChannel is closed:",ce):(A||(xe("Connection","Opening WebChannel transport."),b.open(),A=!0),xe("Connection","WebChannel sending:",ce),b.send(ce))},Jr:()=>b.close()}),J=(ce,Pe,$e)=>{ce.listen(Pe,Gt=>{try{$e(Gt)}catch(qt){setTimeout(()=>{throw qt},0)}})};return J(b,Tm.EventType.OPEN,()=>{N||xe("Connection","WebChannel transport opened.")}),J(b,Tm.EventType.CLOSE,()=>{N||(N=!0,xe("Connection","WebChannel transport closed"),$.io())}),J(b,Tm.EventType.ERROR,ce=>{N||(N=!0,_l("Connection","WebChannel transport errored:",ce),$.io(new Ae(ie.UNAVAILABLE,"The operation could not be completed")))}),J(b,Tm.EventType.MESSAGE,ce=>{var Pe;if(!N){const $e=ce.data[0];Qe(!!$e);const qt=$e.error||(null===(Pe=$e[0])||void 0===Pe?void 0:Pe.error);if(qt){xe("Connection","WebChannel received error:",qt);const $t=qt.status;let Ht=function(Wt){const Jr=Dr[Wt];if(void 0!==Jr)return HC(Jr)}($t),Bt=qt.message;void 0===Ht&&(Ht=ie.INTERNAL,Bt="Unknown error status: "+$t+" with message "+qt.message),N=!0,$.io(new Ae(Ht,Bt)),b.close()}else xe("Connection","WebChannel received:",$e),$.ro($e)}}),J(l,wC.STAT_EVENT,ce=>{ce.stat===_I.PROXY?xe("Connection","Detected buffering proxy"):ce.stat===_I.NOPROXY&&xe("Connection","Detected no buffering proxy")}),setTimeout(()=>{$.so()},0),$}}function ZM(){return typeof window<"u"?window:null}function oD(){return typeof document<"u"?document:null}function w0(n){return new Me(n,!0)}class wT{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&xe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class KM{constructor(e,t,r,o,u,l,m,w){this.Hs=e,this.vo=r,this.Vo=o,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new wT(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,me.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,me.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Yn(t.toString()),Yn("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ie.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new Ae(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,me.Z)(function*(){e.state=0,e.start()}))}Qo(e){return xe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(xe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cO extends KM{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.yt=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function nN(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:rt(),o=e.targetChange.targetIds||[],u=function(w,b){return w.wt?(Qe(void 0===b||"string"==typeof b),ur.fromBase64String(b||"")):(Qe(void 0===b||b instanceof Uint8Array),ur.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,m=l&&function(w){const b=void 0===w.code?ie.UNKNOWN:HC(w.code);return new Ae(b,w.message||"")}(l);t=new k(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=sc(n,r.document.name),u=cr(r.document.updateTime),l=r.document.createTime?cr(r.document.createTime):vt.min(),m=new Ir({mapValue:{fields:r.document.fields}}),w=Mn.newFoundDocument(o,u,l,m);t=new T(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,o=sc(n,r.document),u=r.readTime?cr(r.readTime):vt.min(),l=Mn.newNoDocument(o,u);t=new T([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=sc(n,r.document);t=new T([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return rt();{const r=e.filter,u=new GA(r.count||0);t=new x(r.targetId,u)}}var w;return t}(this.yt,e),r=function(o){if(!("targetChange"in o))return vt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?vt.min():u.readTime?cr(u.readTime):vt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=l0(this.yt),t.addTarget=function(o,u){let l;const m=u.target;return l=xl(m)?{documents:QA(o,m)}:{query:KC(o,m)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=kn(o,u.resumeToken):u.snapshotVersion.compareTo(vt.min())>0&&(l.readTime=At(o,u.snapshotVersion.toTimestamp())),l}(this.yt,e);const r=function iN(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=l0(this.yt),t.removeTarget=e,this.Bo(t)}}class lO extends KM{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.yt=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function rN(n,e){return n&&n.length>0?(Qe(void 0!==e),n.map(t=>function(r,o){let u=cr(r.updateTime?r.updateTime:o);return u.isEqual(vt.min())&&(u=cr(o)),new HI(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=cr(e.commitTime);return this.listener.Zo(r,t)}return Qe(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=l0(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>d0(this.yt,r))};this.Bo(t)}}class dO extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=o,this.nu=!1}su(){if(this.nu)throw new Ae(ie.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.ao(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(ie.UNKNOWN,o.toString())})}_o(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection._o(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ae(ie.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class fO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Yn(t),this.ou=!1):xe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class pO{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.Ur(m=>{r.enqueueAndForget((0,me.Z)(function*(){var w;Nl(l)&&(xe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,me.Z)(function*(b){const A=We(b);A._u.add(4),yield oy(A),A.gu.set("Unknown"),A._u.delete(4),yield E0(A)}),function(b){return w.apply(this,arguments)})(l))}))}),this.gu=new fO(r,o)}}function E0(n){return IT.apply(this,arguments)}function IT(){return IT=(0,me.Z)(function*(n){if(Nl(n))for(const e of n.wu)yield e(!0)}),IT.apply(this,arguments)}function oy(n){return DT.apply(this,arguments)}function DT(){return DT=(0,me.Z)(function*(n){for(const e of n.wu)yield e(!1)}),DT.apply(this,arguments)}function aD(n,e){const t=We(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),TT(t)?CT(t):uy(t).ko()&&bT(t,e))}function I0(n,e){const t=We(n),r=uy(t);t.du.delete(e),r.ko()&&YM(t,e),0===t.du.size&&(r.ko()?r.Fo():Nl(t)&&t.gu.set("Unknown"))}function bT(n,e){n.yu.Ot(e.targetId),uy(n).zo(e)}function YM(n,e){n.yu.Ot(e),uy(n).Ho(e)}function CT(n){n.yu=new Y({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),uy(n).start(),n.gu.uu()}function TT(n){return Nl(n)&&!uy(n).No()&&n.du.size>0}function Nl(n){return 0===We(n)._u.size}function QM(n){n.yu=void 0}function gO(n){return ST.apply(this,arguments)}function ST(){return ST=(0,me.Z)(function*(n){n.du.forEach((e,t)=>{bT(n,e)})}),ST.apply(this,arguments)}function mO(n,e){return AT.apply(this,arguments)}function AT(){return AT=(0,me.Z)(function*(n,e){QM(n),TT(n)?(n.gu.hu(e),CT(n)):n.gu.set("Unknown")}),AT.apply(this,arguments)}function yO(n,e,t){return MT.apply(this,arguments)}function MT(){return MT=(0,me.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof k&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(o,u){const l=u.cause;for(const m of u.targetIds)o.du.has(m)&&(yield o.remoteSyncer.rejectListen(m,l),o.du.delete(m),o.yu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){xe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield uD(n,r)}else if(e instanceof T?n.yu.Kt(e):e instanceof x?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(vt.min()))try{const r=yield UM(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.yu.Zt(u);return l.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const b=o.du.get(w);b&&o.du.set(w,b.withResumeToken(m.resumeToken,u))}}),l.targetMismatches.forEach(m=>{const w=o.du.get(m);if(!w)return;o.du.set(m,w.withResumeToken(ur.EMPTY_BYTE_STRING,w.snapshotVersion)),YM(o,m);const b=new gh(w.target,m,1,w.sequenceNumber);bT(o,b)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){xe("RemoteStore","Failed to raise snapshot:",r),yield uD(n,r)}var r}),MT.apply(this,arguments)}function uD(n,e,t){return xT.apply(this,arguments)}function xT(){return xT=(0,me.Z)(function*(n,e,t){if(!Za(e))throw e;n._u.add(1),yield oy(n),n.gu.set("Offline"),t||(t=()=>UM(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){xe("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield E0(n)}))}),xT.apply(this,arguments)}function JM(n,e){return e().catch(t=>uD(n,t,e))}function ay(n){return RT.apply(this,arguments)}function RT(){return RT=(0,me.Z)(function*(n){const e=We(n),t=_h(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;vO(e);)try{const o=yield nO(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,_O(e,o)}catch(o){yield uD(e,o)}XM(e)&&ex(e)}),RT.apply(this,arguments)}function vO(n){return Nl(n)&&n.fu.length<10}function _O(n,e){n.fu.push(e);const t=_h(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function XM(n){return Nl(n)&&!_h(n).No()&&n.fu.length>0}function ex(n){_h(n).start()}function wO(n){return NT.apply(this,arguments)}function NT(){return NT=(0,me.Z)(function*(n){_h(n).eu()}),NT.apply(this,arguments)}function EO(n){return OT.apply(this,arguments)}function OT(){return OT=(0,me.Z)(function*(n){const e=_h(n);for(const t of n.fu)e.Xo(t.mutations)}),OT.apply(this,arguments)}function IO(n,e,t){return PT.apply(this,arguments)}function PT(){return PT=(0,me.Z)(function*(n,e,t){const r=n.fu.shift(),o=JC.from(r,e,t);yield JM(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield ay(n)}),PT.apply(this,arguments)}function DO(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,me.Z)(function*(n,e){var t;e&&_h(n).Yo&&(yield(t=(0,me.Z)(function*(r,o){if($C(u=o.code)&&u!==ie.ABORTED){const l=r.fu.shift();_h(r).Mo(),yield JM(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield ay(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),XM(n)&&ex(n)}),kT.apply(this,arguments)}function tx(n,e){return FT.apply(this,arguments)}function FT(){return FT=(0,me.Z)(function*(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),xe("RemoteStore","RemoteStore received new credentials");const r=Nl(t);t._u.add(3),yield oy(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield E0(t)}),FT.apply(this,arguments)}function LT(n,e){return VT.apply(this,arguments)}function VT(){return VT=(0,me.Z)(function*(n,e){const t=We(n);e?(t._u.delete(2),yield E0(t)):e||(t._u.add(2),yield oy(t),t.gu.set("Unknown"))}),VT.apply(this,arguments)}function uy(n){return n.pu||(n.pu=function(e,t,r){const o=We(e);return o.su(),new cO(t,o.connection,o.authCredentials,o.appCheckCredentials,o.yt,r)}(n.datastore,n.asyncQueue,{Yr:gO.bind(null,n),Zr:mO.bind(null,n),Wo:yO.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.pu.Mo(),TT(n)?CT(n):n.gu.set("Unknown")):(yield n.pu.stop(),QM(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function _h(n){return n.Iu||(n.Iu=function(e,t,r){const o=We(e);return o.su(),new lO(t,o.connection,o.authCredentials,o.appCheckCredentials,o.yt,r)}(n.datastore,n.asyncQueue,{Yr:wO.bind(null,n),Zr:DO.bind(null,n),tu:EO.bind(null,n),Zo:IO.bind(null,n)}),n.wu.push(function(){var e=(0,me.Z)(function*(t){t?(n.Iu.Mo(),yield ay(n)):(yield n.Iu.stop(),n.fu.length>0&&(xe("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class UT{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,m=new UT(e,t,l,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cy(n,e){if(Yn("AsyncQueue",`${e}: ${n}`),Za(n))return new Ae(ie.UNAVAILABLE,`${e}: ${n}`);throw n}class ly{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=Xm(),this.sortedSet=new Qn(this.comparator)}static emptySet(e){return new ly(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ly)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new ly;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class nx{constructor(){this.Tu=new Qn(qe.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):rt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class dy{constructor(e,t,r,o,u,l,m,w,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=m,this.excludesMetadataChanges=w,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,o,u){const l=[];return t.forEach(m=>{l.push({type:0,doc:m})}),new dy(e,t,ly.emptySet(t),l,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class bO{constructor(){this.Au=void 0,this.listeners=[]}}class CO{constructor(){this.queries=new ic(e=>VI(e),zm),this.onlineState="Unknown",this.Ru=new Set}}function BT(n,e){return jT.apply(this,arguments)}function jT(){return jT=(0,me.Z)(function*(n,e){const t=We(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new bO),o)try{u.Au=yield t.onListen(r)}catch(l){const m=cy(l,`Initialization of query '${ch(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&GT(t)}),jT.apply(this,arguments)}function $T(n,e){return HT.apply(this,arguments)}function HT(){return HT=(0,me.Z)(function*(n,e){const t=We(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),HT.apply(this,arguments)}function TO(n,e){const t=We(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const m of l.listeners)m.Pu(o)&&(r=!0);l.Au=o}}r&&GT(t)}function SO(n,e,t){const r=We(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function GT(n){n.Ru.forEach(e=>{e.next()})}class zT{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new dy(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=dy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class AO{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class rx{constructor(e){this.yt=e}Ji(e){return sc(this.yt,e)}Yi(e){return e.metadata.exists?YA(this.yt,e.document,!1):Mn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return cr(e)}}class MO{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ix(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=Xt.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new rx(this.yt);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const l of o.metadata.queries){const m=(t.get(l)||d()).add(u);t.set(l,m)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function rO(n,e,t,r){return pT.apply(this,arguments)}(e.localStore,new rx(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const o of e.queries)yield iO(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function ix(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class sx{constructor(e){this.key=e}}class ox{constructor(e){this.key=e}}class ax{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=d(),this.mutatedKeys=d(),this.Gu=e0(e),this.Qu=new ly(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new nx,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,m=!1;const w="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,b="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,N)=>{const $=o.get(A),J=cp(this.query,N)?N:null,ce=!!$&&this.mutatedKeys.has($.key),Pe=!!J&&(J.hasLocalMutations||this.mutatedKeys.has(J.key)&&J.hasCommittedMutations);let $e=!1;$&&J?$.data.isEqual(J.data)?ce!==Pe&&(r.track({type:3,doc:J}),$e=!0):this.Hu($,J)||(r.track({type:2,doc:J}),$e=!0,(w&&this.Gu(J,w)>0||b&&this.Gu(J,b)<0)&&(m=!0)):!$&&J?(r.track({type:0,doc:J}),$e=!0):$&&!J&&(r.track({type:1,doc:$}),$e=!0,(w||b)&&(m=!0)),$e&&(J?(l=l.add(J),u=Pe?u.add(A):u.delete(A)):(l=l.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const A="F"===this.query.limitType?l.last():l.first();l=l.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:l,zu:r,$i:m,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((b,A)=>function(N,$){const J=ce=>{switch(ce){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rt()}};return J(N)-J($)}(b.type,A.type)||this.Gu(b.doc,A.doc)),this.Ju(r);const l=t?this.Yu():[],m=0===this.Ku.size&&this.current?1:0,w=m!==this.Uu;return this.Uu=m,0!==u.length||w?{snapshot:new dy(this.query,e.Qu,o,u,e.mutatedKeys,0===m,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new nx,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=d(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new ox(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new sx(r))}),t}tc(e){this.qu=e.Hi,this.Ku=d();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return dy.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class xO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class RO{constructor(e){this.key=e,this.nc=!1}}class NO{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new ic(m=>VI(m),zm),this.rc=new Map,this.oc=new Set,this.uc=new Qn(qe.comparator),this.cc=new Map,this.ac=new aT,this.hc={},this.lc=new Map,this.fc=vp.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function OO(n,e){return qT.apply(this,arguments)}function qT(){return qT=(0,me.Z)(function*(n,e){const t=gS(n);let r,o;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ec();else{const l=yield iy(t.localStore,ji(e));t.isPrimaryClient&&aD(t.remoteStore,l);const m=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield WT(t,e,r,"current"===m,l.resumeToken)}return o}),qT.apply(this,arguments)}function WT(n,e,t,r,o){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,me.Z)(function*(n,e,t,r,o){n._c=(N,$,J)=>{return(ce=(0,me.Z)(function*(Pe,$e,Gt,qt){let $t=$e.view.Wu(Gt);$t.$i&&($t=yield rD(Pe.localStore,$e.query,!1).then(({documents:Wt})=>$e.view.Wu(Wt,$t)));const Ht=qt&&qt.targetChanges.get($e.targetId),Bt=$e.view.applyChanges($t,Pe.isPrimaryClient,Ht);return iS(Pe,$e.targetId,Bt.Xu),Bt.snapshot}),function(Pe,$e,Gt,qt){return ce.apply(this,arguments)})(n,N,$,J);var ce};const u=yield rD(n.localStore,e,!0),l=new ax(e,u.Hi),m=l.Wu(u.documents),w=I.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),b=l.applyChanges(m,n.isPrimaryClient,w);iS(n,t,b.Xu);const A=new xO(e,t,l);return n.ic.set(e,A),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),b.snapshot}),ZT.apply(this,arguments)}function PO(n,e){return KT.apply(this,arguments)}function KT(){return KT=(0,me.Z)(function*(n,e){const t=We(n),r=t.ic.get(e),o=t.rc.get(r.targetId);if(o.length>1)return t.rc.set(r.targetId,o.filter(u=>!zm(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield sy(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),I0(t.remoteStore,r.targetId),hy(t,r.targetId)}).catch(Qu))):(hy(t,r.targetId),yield sy(t.localStore,r.targetId,!0))}),KT.apply(this,arguments)}function YT(){return YT=(0,me.Z)(function*(n,e,t){const r=mS(n);try{const o=yield function(u,l){const m=We(u),w=An.now(),b=l.reduce(($,J)=>$.add(J.key),d());let A,N;return m.persistence.runTransaction("Locally write mutations","readwrite",$=>{let J=us(),ce=d();return m.Gi.getEntries($,b).next(Pe=>{J=Pe,J.forEach(($e,Gt)=>{Gt.isValidDocument()||(ce=ce.add($e))})}).next(()=>m.localDocuments.getOverlayedDocuments($,J)).next(Pe=>{A=Pe;const $e=[];for(const Gt of l){const qt=GI(Gt,A.get(Gt.key).overlayedDocument);null!=qt&&$e.push(new Ya(Gt.key,qt,K_(qt.value.mapValue),Pn.exists(!0)))}return m.mutationQueue.addMutationBatch($,w,$e,l)}).next(Pe=>{N=Pe;const $e=Pe.applyToLocalDocumentSet(A,ce);return m.documentOverlayCache.saveOverlays($,Pe.batchId,$e)})}).then(()=>({batchId:N.batchId,changes:zC(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,m){let w=u.hc[u.currentUser.toKey()];w||(w=new Qn(Pt)),w=w.insert(l,m),u.hc[u.currentUser.toKey()]=w}(r,o.batchId,t),yield Ol(r,o.changes),yield ay(r.remoteStore)}catch(o){const u=cy(o,"Failed to persist write");t.reject(u)}}),YT.apply(this,arguments)}function ux(n,e){return QT.apply(this,arguments)}function QT(){return QT=(0,me.Z)(function*(n,e){const t=We(n);try{const r=yield function tO(n,e){const t=We(n),r=e.snapshotVersion;let o=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.qi;const m=[];e.targetChanges.forEach((A,N)=>{const $=o.get(N);if(!$)return;m.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,N).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,N)));let J=$.withSequenceNumber(u.currentSequenceNumber);var ce,Pe,$e;e.targetMismatches.has(N)?J=J.withResumeToken(ur.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):A.resumeToken.approximateByteSize()>0&&(J=J.withResumeToken(A.resumeToken,r)),o=o.insert(N,J),Pe=J,$e=A,(0===(ce=$).resumeToken.approximateByteSize()||Pe.snapshotVersion.toMicroseconds()-ce.snapshotVersion.toMicroseconds()>=3e8||$e.addedDocuments.size+$e.modifiedDocuments.size+$e.removedDocuments.size>0)&&m.push(t.Cs.updateTargetData(u,J))});let w=us(),b=d();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),m.push(BM(u,l,e.documentUpdates).next(A=>{w=A.Wi,b=A.zi})),!r.isEqual(vt.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(N=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(A)}return ne.waitFor(m).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,b)).next(()=>w)}).then(u=>(t.qi=o,u))}(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.cc.get(u);l&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.nc=!0:o.modifiedDocuments.size>0?Qe(l.nc):o.removedDocuments.size>0&&(Qe(l.nc),l.nc=!1))}),yield Ol(t,r,e)}catch(r){yield Qu(r)}}),QT.apply(this,arguments)}function cx(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ic.forEach((u,l)=>{const m=l.view.bu(e);m.snapshot&&o.push(m.snapshot)}),function(u,l){const m=We(u);m.onlineState=l;let w=!1;m.queries.forEach((b,A)=>{for(const N of A.listeners)N.bu(l)&&(w=!0)}),w&&GT(m)}(r.eventManager,e),o.length&&r.sc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function FO(n,e,t){return JT.apply(this,arguments)}function JT(){return JT=(0,me.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.cc.get(e),u=o&&o.key;if(u){let l=new Qn(qe.comparator);l=l.insert(u,Mn.newNoDocument(u,vt.min()));const m=d().add(u),w=new E(vt.min(),new Map,new dn(Pt),l,m);yield ux(r,w),r.uc=r.uc.remove(u),r.cc.delete(e),sS(r)}else yield sy(r.localStore,e,!1).then(()=>hy(r,e,t)).catch(Qu)}),JT.apply(this,arguments)}function LO(n,e){return XT.apply(this,arguments)}function XT(){return XT=(0,me.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const o=yield function eO(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,m,w,b){const A=w.batch,N=A.keys();let $=ne.resolve();return N.forEach(J=>{$=$.next(()=>b.getEntry(m,J)).next(ce=>{const Pe=w.docVersions.get(J);Qe(null!==Pe),ce.version.compareTo(Pe)<0&&(A.applyToRemoteDocument(ce,w),ce.isValidDocument()&&(ce.setReadTime(w.commitVersion),b.addEntry(ce)))})}),$.next(()=>l.mutationQueue.removeMutationBatch(m,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let m=d();for(let w=0;w<l.mutationResults.length;++w)l.mutationResults[w].transformResults.length>0&&(m=m.add(l.batch.mutations[w].key));return m}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}(t.localStore,e);rS(t,r,null),nS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ol(t,o)}catch(o){yield Qu(o)}}),XT.apply(this,arguments)}function VO(n,e,t){return eS.apply(this,arguments)}function eS(){return eS=(0,me.Z)(function*(n,e,t){const r=We(n);try{const o=yield function(u,l){const m=We(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let b;return m.mutationQueue.lookupMutationBatch(w,l).next(A=>(Qe(null!==A),b=A.keys(),m.mutationQueue.removeMutationBatch(w,A))).next(()=>m.mutationQueue.performConsistencyCheck(w)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(w,b,l)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,b)).next(()=>m.localDocuments.getDocuments(w,b))})}(r.localStore,e);rS(r,e,t),nS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ol(r,o)}catch(o){yield Qu(o)}}),eS.apply(this,arguments)}function tS(){return tS=(0,me.Z)(function*(n,e){const t=We(n);Nl(t.remoteStore)||xe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=We(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>l.mutationQueue.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.lc.get(r)||[];o.push(e),t.lc.set(r,o)}catch(r){const o=cy(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),tS.apply(this,arguments)}function nS(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function rS(n,e,t){const r=We(n);let o=r.hc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.hc[r.currentUser.toKey()]=o}}function hy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||lx(n,r)})}function lx(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(I0(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),sS(n))}function iS(n,e,t){for(const r of t)r instanceof sx?(n.ac.addReference(r.key,e),BO(n,r)):r instanceof ox?(xe("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||lx(n,r.key)):rt()}function BO(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(xe("SyncEngine","New document in limbo: "+t),n.oc.add(r),sS(n))}function sS(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new qe(Xt.fromString(e)),r=n.fc.next();n.cc.set(r,new RO(t)),n.uc=n.uc.insert(t,r),aD(n.remoteStore,new gh(ji(up(t.path)),r,2,Os.at))}}function Ol(n,e,t){return oS.apply(this,arguments)}function oS(){return oS=(0,me.Z)(function*(n,e,t){const r=We(n),o=[],u=[],l=[];var m;r.ic.isEmpty()||(r.ic.forEach((m,w)=>{l.push(r._c(w,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,b?.fromCache?"not-current":"current"),b){o.push(b);const A=dT.Ci(w.targetId,b);u.push(A)}}))}),yield Promise.all(l),r.sc.Wo(o),yield(m=(0,me.Z)(function*(w,b){const A=We(w);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>ne.forEach(b,$=>ne.forEach($.Si,J=>A.persistence.referenceDelegate.addReference(N,$.targetId,J)).next(()=>ne.forEach($.Di,J=>A.persistence.referenceDelegate.removeReference(N,$.targetId,J)))))}catch(N){if(!Za(N))throw N;xe("LocalStore","Failed to update sequence numbers: "+N)}for(const N of b){const $=N.targetId;if(!N.fromCache){const J=A.qi.get($),Pe=J.withLastLimboFreeSnapshotVersion(J.snapshotVersion);A.qi=A.qi.insert($,Pe)}}}),function(w,b){return m.apply(this,arguments)})(r.localStore,u))}),oS.apply(this,arguments)}function jO(n,e){return aS.apply(this,arguments)}function aS(){return aS=(0,me.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){xe("SyncEngine","User change. New user:",e.toKey());const r=yield VM(t.localStore,e);t.currentUser=e,(o=t).lc.forEach(l=>{l.forEach(m=>{m.reject(new Ae(ie.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ol(t,r.ji)}var o}),aS.apply(this,arguments)}function $O(n,e){const t=We(n),r=t.cc.get(e);if(r&&r.nc)return d().add(r.key);{let o=d();const u=t.rc.get(e);if(!u)return o;for(const l of u){const m=t.ic.get(l);o=o.unionWith(m.view.ju)}return o}}function HO(n,e){return uS.apply(this,arguments)}function uS(){return uS=(0,me.Z)(function*(n,e){const t=We(n),r=yield rD(t.localStore,e.query,!0),o=e.view.tc(r);return t.isPrimaryClient&&iS(t,e.targetId,o.Xu),o}),uS.apply(this,arguments)}function GO(n,e){return cS.apply(this,arguments)}function cS(){return cS=(0,me.Z)(function*(n,e){const t=We(n);return $M(t.localStore,e).then(r=>Ol(t,r))}),cS.apply(this,arguments)}function zO(n,e,t,r){return lS.apply(this,arguments)}function lS(){return lS=(0,me.Z)(function*(n,e,t,r){const o=We(n),u=yield function(l,m){const w=We(l),b=We(w.mutationQueue);return w.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.Tn(A,m).next(N=>N?w.localDocuments.getDocuments(A,N):ne.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield ay(o.remoteStore):"acknowledged"===t||"rejected"===t?(rS(o,e,r||null),nS(o,e),m=e,We(We(o.localStore).mutationQueue).An(m)):rt(),yield Ol(o,u)):xe("SyncEngine","Cannot apply mutation batch with id: "+e)}),lS.apply(this,arguments)}function dS(){return dS=(0,me.Z)(function*(n,e){const t=We(n);if(gS(t),mS(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield dx(t,r.toArray());t.dc=!0,yield LT(t.remoteStore,!0);for(const u of o)aD(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let o=Promise.resolve();t.rc.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(hy(t,l),sy(t.localStore,l,!0))),I0(t.remoteStore,l)}),yield o,yield dx(t,r),function(u){const l=We(u);l.cc.forEach((m,w)=>{I0(l.remoteStore,w)}),l.ac.fs(),l.cc=new Map,l.uc=new Qn(qe.comparator)}(t),t.dc=!1,yield LT(t.remoteStore,!1)}}),dS.apply(this,arguments)}function dx(n,e,t){return hS.apply(this,arguments)}function hS(){return hS=(0,me.Z)(function*(n,e,t){const r=We(n),o=[],u=[];for(const l of e){let m;const w=r.rc.get(l);if(w&&0!==w.length){m=yield iy(r.localStore,ji(w[0]));for(const b of w){const A=r.ic.get(b),N=yield HO(r,A);N.snapshot&&u.push(N.snapshot)}}else{const b=yield jM(r.localStore,l);m=yield iy(r.localStore,b),yield WT(r,hx(b),l,!1,m.resumeToken)}o.push(m)}return r.sc.Wo(u),o}),hS.apply(this,arguments)}function hx(n){return VC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function WO(n){const e=We(n);return We(We(e.localStore).persistence).vi()}function ZO(n,e,t,r){return fS.apply(this,arguments)}function fS(){return fS=(0,me.Z)(function*(n,e,t,r){const o=We(n);if(o.dc)return void xe("SyncEngine","Ignoring unexpected query state notification.");const u=o.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield $M(o.localStore,UI(u[0])),m=E.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ur.EMPTY_BYTE_STRING);yield Ol(o,l,m);break}case"rejected":yield sy(o.localStore,e,!0),hy(o,e,r);break;default:rt()}}),fS.apply(this,arguments)}function KO(n,e,t){return pS.apply(this,arguments)}function pS(){return pS=(0,me.Z)(function*(n,e,t){const r=gS(n);if(r.dc){for(const o of e){if(r.rc.has(o)){xe("SyncEngine","Adding an already active target "+o);continue}const u=yield jM(r.localStore,o),l=yield iy(r.localStore,u);yield WT(r,hx(u),l.targetId,!1,l.resumeToken),aD(r.remoteStore,l)}for(const o of t)r.rc.has(o)&&(yield sy(r.localStore,o,!1).then(()=>{I0(r.remoteStore,o),hy(r,o)}).catch(Qu))}}),pS.apply(this,arguments)}function gS(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ux.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$O.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=FO.bind(null,e),e.sc.Wo=TO.bind(null,e.eventManager),e.sc.wc=SO.bind(null,e.eventManager),e}function mS(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=VO.bind(null,e),e}class fx{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.yt=w0(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return LM(this.persistence,new FM,e.initialUser,this.yt)}yc(e){return new PM(tD.Bs,this.yt)}gc(e){return new qM}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class px extends fx{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield mS(r.Ac.syncEngine),yield ay(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return LM(this.persistence,new FM,e.initialUser,this.yt)}Tc(e,t){return new UN(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new jA(t,this.persistence);return new BA(e.asyncQueue,r)}yc(e){const t=lT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ks.withCacheSize(this.cacheSizeBytes):ks.DEFAULT;return new cT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,ZM(),oD(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new qM}}class QO extends px{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const o=r.Ac.syncEngine;r.sharedClientState instanceof _T&&(r.sharedClientState.syncEngine={Fr:zO.bind(null,o),$r:ZO.bind(null,o),Br:KO.bind(null,o),vi:WO.bind(null,o),Mr:GO.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,me.Z)(function*(l){yield function qO(n,e){return dS.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}gc(e){const t=ZM();if(!_T.C(t))throw new Ae(ie.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=lT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _T(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class yS{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>cx(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=jO.bind(null,r.syncEngine),yield LT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new CO}createDatastore(e){const t=w0(e.databaseInfo.databaseId),r=new uO(e.databaseInfo);return new dO(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>cx(this.syncEngine,m,0),l=WM.C()?new WM:new sO,new pO(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,m,w,b){const A=new NO(r,o,u,l,m,w);return b&&(A.dc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=We(t);xe("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield oy(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function vS(n,e,t){if(!t)throw new Ae(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function gx(n,e,t,r){if(!0===e&&!0===r)throw new Ae(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mx(n){if(!qe.isDocumentKey(n))throw new Ae(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function yx(n){if(qe.isDocumentKey(n))throw new Ae(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function cD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":rt()}function en(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cD(n);throw new Ae(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function vx(n,e){if(e<=0)throw new Ae(ie.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const _x=new Map;class wx{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,gx("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class D0{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wx({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ae(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wx(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new M_;switch(t.type){case"gapi":return new bC(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ae(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_x.get(e);t&&(xe("ComponentProvider","Removing Datastore"),_x.delete(e),t.terminate())}(this),Promise.resolve()}}class Hn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ac(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Hn(this.firestore,e,this._key)}}class bi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bi(this.firestore,e,this._query)}}class ac extends bi{constructor(e,t,r){super(e,t,up(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Hn(this.firestore,null,new qe(e))}withConverter(e){return new ac(this.firestore,e,this._path)}}function Ix(n,e,...t){if(n=(0,tn.m9)(n),vS("collection","path",e),n instanceof D0){const r=Xt.fromString(e,...t);return yx(r),new ac(n,null,r)}{if(!(n instanceof Hn||n instanceof ac))throw new Ae(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return yx(r),new ac(n.firestore,null,r)}}function lD(n,e,...t){if(n=(0,tn.m9)(n),1===arguments.length&&(e=xm.R()),vS("doc","path",e),n instanceof D0){const r=Xt.fromString(e,...t);return mx(r),new Hn(n,null,new qe(r))}{if(!(n instanceof Hn||n instanceof ac))throw new Ae(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Xt.fromString(e,...t));return mx(r),new Hn(n.firestore,n instanceof ac?n.converter:null,new qe(r))}}function Dx(n,e){return n=(0,tn.m9)(n),e=(0,tn.m9)(e),(n instanceof Hn||n instanceof ac)&&(e instanceof Hn||e instanceof ac)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function _S(n,e){return n=(0,tn.m9)(n),e=(0,tn.m9)(e),n instanceof bi&&e instanceof bi&&n.firestore===e.firestore&&zm(n._query,e._query)&&n.converter===e.converter}function bx(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class dD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Yn("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class XO{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new Vr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),o=Number(r);isNaN(o)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(o);return new AO(JSON.parse(u),t.length+o)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,me.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class nP{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(ie.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,me.Z)(function*(u,l){const m=We(u),w=l0(m.yt)+"/documents",b={documents:l.map(J=>c0(m.yt,J))},A=yield m._o("BatchGetDocuments",w,b,l.length),N=new Map;A.forEach(J=>{const ce=function tN(n,e){return"found"in e?function(t,r){Qe(!!r.found);const o=sc(t,r.found.name),u=cr(r.found.updateTime),l=r.found.createTime?cr(r.found.createTime):vt.min(),m=new Ir({mapValue:{fields:r.found.fields}});return Mn.newFoundDocument(o,u,l,m)}(n,e):"missing"in e?function(t,r){Qe(!!r.missing),Qe(!!r.readTime);const o=sc(t,r.missing),u=cr(r.readTime);return Mn.newNoDocument(o,u)}(n,e):rt()}(m.yt,J);N.set(ce.key.toString(),ce)});const $=[];return l.forEach(J=>{const ce=N.get(J.toString());Qe(!!ce),$.push(ce)}),$}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new ph(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=qe.fromPath(o);e.mutations.push(new u0(u,e.precondition(u)))}),yield(r=(0,me.Z)(function*(o,u){const l=We(o),m=l0(l.yt)+"/documents",w={writes:u.map(b=>d0(l.yt,b))};yield l.ao("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rt();t=vt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(ie.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(vt.min())?Pn.exists(!1):Pn.updateTime(t):Pn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(vt.min()))throw new Ae(ie.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pn.updateTime(t)}return Pn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class rP{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.kc=r.maxAttempts,this.xo=new wT(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,me.Z)(function*(){const t=new nP(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Fc(u)}))}).catch(o=>{e.Fc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!Ju(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!$C(t)}return!1}}class iP{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=wr.UNAUTHENTICATED,this.clientId=xm.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,me.Z)(function*(m){xe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(xe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(ie.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=cy(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function Cx(n,e){return wS.apply(this,arguments)}function wS(){return wS=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),xe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,me.Z)(function*(u){r.isEqual(u)||(yield VM(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),wS.apply(this,arguments)}function Tx(n,e){return ES.apply(this,arguments)}function ES(){return ES=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield IS(n);xe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>tx(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>tx(e.remoteStore,u)),n.onlineComponents=e}),ES.apply(this,arguments)}function IS(n){return DS.apply(this,arguments)}function DS(){return DS=(0,me.Z)(function*(n){return n.offlineComponents||(xe("FirestoreClient","Using default OfflineComponentProvider"),yield Cx(n,new fx)),n.offlineComponents}),DS.apply(this,arguments)}function hD(n){return bS.apply(this,arguments)}function bS(){return bS=(0,me.Z)(function*(n){return n.onlineComponents||(xe("FirestoreClient","Using default OnlineComponentProvider"),yield Tx(n,new yS)),n.onlineComponents}),bS.apply(this,arguments)}function Sx(n){return IS(n).then(e=>e.persistence)}function fD(n){return IS(n).then(e=>e.localStore)}function CS(n){return hD(n).then(e=>e.remoteStore)}function TS(n){return hD(n).then(e=>e.syncEngine)}function fy(n){return SS.apply(this,arguments)}function SS(){return SS=(0,me.Z)(function*(n){const e=yield hD(n),t=e.eventManager;return t.onListen=OO.bind(null,e.syncEngine),t.onUnlisten=PO.bind(null,e.syncEngine),t}),SS.apply(this,arguments)}function Mx(n,e,t={}){const r=new Vr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,l,m,w){const b=new dD({next:N=>{u.enqueueAndForget(()=>$T(o,A));const $=N.docs.has(l);!$&&N.fromCache?w.reject(new Ae(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):$&&N.fromCache&&m&&"server"===m.source?w.reject(new Ae(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(N)},error:N=>w.reject(N)}),A=new zT(up(l.path),b,{includeMetadataChanges:!0,Nu:!0});return BT(o,A)}(yield fy(n),n.asyncQueue,e,t,r)})),r.promise}function xx(n,e,t={}){const r=new Vr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(o,u,l,m,w){const b=new dD({next:N=>{u.enqueueAndForget(()=>$T(o,A)),N.fromCache&&"server"===m.source?w.reject(new Ae(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(N)},error:N=>w.reject(N)}),A=new zT(l,b,{includeMetadataChanges:!0,Nu:!0});return BT(o,A)}(yield fy(n),n.asyncQueue,e,t,r)})),r.promise}class hP{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new wT(this,"async_queue_retry"),this.Wc=()=>{const t=oD();t&&xe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=oD();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=oD();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new Vr;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,me.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Za(t))throw t;xe("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Yn("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const o=UT.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.Uc.push(o),o}zc(){this.Kc&&rt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function AS(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class fP{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Gn extends D0{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new hP,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Rx(this),this._firestoreClient.terminate()}}function br(n){return n._firestoreClient||Rx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Rx(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new $A(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new iP(n._authCredentials,n._appCheckCredentials,n._queue,r)}function Nx(n,e,t){const r=new Vr;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield Cx(n,t),yield Tx(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(l=u).name?l.code===ie.FAILED_PRECONDITION||l.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;_l("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function Ox(n){if(n._initialized||n._terminated)throw new Ae(ie.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class uc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uc(ur.fromBase64String(e))}catch(t){throw new Ae(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new uc(ur.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Pl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wp{constructor(e){this._methodName=e}}class pD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pt(this._lat,e._lat)||Pt(this._long,e._long)}}const DP=/^__.*__$/;class bP{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms):new fh(e,this.data,t,this.fieldTransforms)}}class Px{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ya(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function kx(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rt()}}class gD{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=o,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new gD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.ua(e),o}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.na(),o}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return vD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(kx(this.sa)&&DP.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class CP{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||w0(e)}da(e,t,r,o=!1){return new gD({sa:e,methodName:t,fa:r,path:vn.emptyPath(),oa:!1,la:o},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function Ep(n){const e=n._freezeSettings(),t=w0(n._databaseId);return new CP(n._databaseId,!!e.ignoreUndefinedProperties,t)}function mD(n,e,t,r,o,u={}){const l=n.da(u.merge||u.mergeFields?2:0,e,t,o);NS("Data must be an object, but it was:",l,r);const m=Vx(r,l);let w,b;if(u.merge)w=new as(l.fieldMask),b=l.fieldTransforms;else if(u.mergeFields){const A=[];for(const N of u.mergeFields){const $=OS(e,N,t);if(!l.contains($))throw new Ae(ie.INVALID_ARGUMENT,`Field '${$}' is specified in your field mask but missing from your input data.`);Bx(A,$)||A.push($)}w=new as(A),b=l.fieldTransforms.filter(N=>w.covers(N.field))}else w=null,b=l.fieldTransforms;return new bP(new Ir(m),w,b)}class b0 extends wp{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof b0}}function Fx(n,e,t){return new gD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class MS extends wp{_toFieldTransform(e){return new hp(e.path,new dp)}isEqual(e){return e instanceof MS}}class TP extends wp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Fx(this,e,!0),r=this._a.map(u=>Ip(u,t)),o=new lh(r);return new hp(e.path,o)}isEqual(e){return this===e}}class SP extends wp{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Fx(this,e,!0),r=this._a.map(u=>Ip(u,t)),o=new dh(r);return new hp(e.path,o)}isEqual(e){return this===e}}class AP extends wp{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new hh(e.yt,Wm(e.yt,this.wa));return new hp(e.path,t)}isEqual(e){return this===e}}function xS(n,e,t,r){const o=n.da(1,e,t);NS("Data must be an object, but it was:",o,r);const u=[],l=Ir.empty();oh(r,(w,b)=>{const A=yD(e,w,t);b=(0,tn.m9)(b);const N=o.ca(A);if(b instanceof b0)u.push(A);else{const $=Ip(b,N);null!=$&&(u.push(A),l.set(A,$))}});const m=new as(u);return new Px(l,m,o.fieldTransforms)}function RS(n,e,t,r,o,u){const l=n.da(1,e,t),m=[OS(e,r,t)],w=[o];if(u.length%2!=0)throw new Ae(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let $=0;$<u.length;$+=2)m.push(OS(e,u[$])),w.push(u[$+1]);const b=[],A=Ir.empty();for(let $=m.length-1;$>=0;--$)if(!Bx(b,m[$])){const J=m[$];let ce=w[$];ce=(0,tn.m9)(ce);const Pe=l.ca(J);if(ce instanceof b0)b.push(J);else{const $e=Ip(ce,Pe);null!=$e&&(b.push(J),A.set(J,$e))}}const N=new as(b);return new Px(A,N,l.fieldTransforms)}function Lx(n,e,t,r=!1){return Ip(t,n.da(r?4:3,e))}function Ip(n,e){if(Ux(n=(0,tn.m9)(n)))return NS("Unsupported field value:",e,n),Vx(n,e);if(n instanceof wp)return function(t,r){if(!kx(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let m=Ip(l,r.aa(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,tn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Wm(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=An.fromDate(t);return{timestampValue:At(r.yt,o)}}if(t instanceof An){const o=new An(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:At(r.yt,o)}}if(t instanceof pD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof uc)return{bytesValue:kn(r.yt,t._byteString)};if(t instanceof Hn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:qC(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${cD(t)}`)}(n,e)}function Vx(n,e){const t={};return NC(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):oh(n,(r,o)=>{const u=Ip(o,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function Ux(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof An||n instanceof pD||n instanceof uc||n instanceof Hn||n instanceof wp)}function NS(n,e,t){if(!Ux(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=cD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function OS(n,e,t){if((e=(0,tn.m9)(e))instanceof Pl)return e._internalPath;if("string"==typeof e)return yD(n,e);throw vD("Field path arguments must be of type string or ",n,!1,void 0,t)}const MP=new RegExp("[~\\*/\\[\\]]");function yD(n,e,t){if(e.search(MP)>=0)throw vD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Pl(...e.split("."))._internalPath}catch{throw vD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vD(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||l)&&(w+=" (found",u&&(w+=` in field ${r}`),l&&(w+=` in document ${o}`),w+=")"),new Ae(ie.INVALID_ARGUMENT,m+n+w)}function Bx(n,e){return n.some(t=>t.isEqual(e))}class C0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Hn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new xP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_D("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class xP extends C0{data(){return super.data()}}function _D(n,e){return"string"==typeof e?yD(n,e):e instanceof Pl?e._internalPath:e._delegate._internalPath}function jx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ae(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PS{}class T0 extends PS{}function wh(n,e,...t){let r=[];e instanceof PS&&r.push(e),r=r.concat(t),function(o){const u=o.filter(m=>m instanceof py).length,l=o.filter(m=>m instanceof S0).length;if(u>1||u>0&&l>0)throw new Ae(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class S0 extends T0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new S0(e,t,r)}_apply(e){const t=this._parse(e);return zx(e._query,t),new bi(e.firestore,e.converter,LI(e._query,t))}_parse(e){const t=Ep(e.firestore);return function(o,u,l,m,w,b,A){let N;if(w.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Ae(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){Gx(A,b);const $=[];for(const J of A)$.push(Hx(m,o,J));N={arrayValue:{values:$}}}else N=Hx(m,o,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||Gx(A,b),N=Lx(l,"where",A,"in"===b||"not-in"===b);return Jt.create(w,b,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class py extends PS{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new py(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:an.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const l=o.getFlattenedFilters();for(const m of l)zx(u,m),u=LI(u,m)}(e._query,t),new bi(e.firestore,e.converter,LI(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class kS extends T0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new kS(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Ae(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new ah(o,u);return function(m,w){if(null===Q_(m)){const b=Gm(m);null!==b&&qx(0,b,w.field)}}(r,l),l}(e._query,this._field,this._direction);return new bi(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new rc(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class wD extends T0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new wD(e,t,r)}_apply(e){return new bi(e.firestore,e.converter,X_(e._query,this._limit,this._limitType))}}class ED extends T0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ED(e,t,r)}_apply(e){const t=$x(e,this.type,this._docOrFields,this._inclusive);return new bi(e.firestore,e.converter,(o=t,new rc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class ID extends T0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ID(e,t,r)}_apply(e){const t=$x(e,this.type,this._docOrFields,this._inclusive);return new bi(e.firestore,e.converter,(o=t,new rc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function $x(n,e,t,r){if(t[0]=(0,tn.m9)(t[0]),t[0]instanceof C0)return function(o,u,l,m,w){if(!m)throw new Ae(ie.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const b=[];for(const A of uh(o))if(A.field.isKeyField())b.push(Sl(u,m.key));else{const N=m.data.field(A.field);if(U_(N))throw new Ae(ie.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const $=A.field.canonicalString();throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${$}' (used as the orderBy) does not exist.`)}b.push(N)}return new Er(b,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Ep(n.firestore);return function(u,l,m,w,b,A){const N=u.explicitOrderBy;if(b.length>N.length)throw new Ae(ie.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const $=[];for(let J=0;J<b.length;J++){const ce=b[J];if(N[J].field.isKeyField()){if("string"!=typeof ce)throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof ce}`);if(!J_(u)&&-1!==ce.indexOf("/"))throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${ce}' contains a slash.`);const Pe=u.path.child(Xt.fromString(ce));if(!qe.isDocumentKey(Pe))throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Pe}' is not because it contains an odd number of segments.`);const $e=new qe(Pe);$.push(Sl(l,$e))}else{const Pe=Lx(m,w,ce);$.push(Pe)}}return new Er($,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function Hx(n,e,t){if("string"==typeof(t=(0,tn.m9)(t))){if(""===t)throw new Ae(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!J_(e)&&-1!==t.indexOf("/"))throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Xt.fromString(t));if(!qe.isDocumentKey(r))throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Sl(n,new qe(r))}if(t instanceof Hn)return Sl(n,t._key);throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cD(t)}.`)}function Gx(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ae(ie.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function zx(n,e){if(e.isInequality()){const r=Gm(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=Q_(n);null!==u&&qx(0,o,u)}const t=function(r,o){for(const u of r)for(const l of u.getFlattenedFilters())if(o.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Ae(ie.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function qx(n,e,t){if(!t.isEqual(e))throw new Ae(ie.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class FS{convertValue(e,t="none"){switch(Cl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Vn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Xu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rt()}}convertObject(e,t){const r={};return oh(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new pD(Vn(e.latitude),Vn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=B_(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(km(e));default:return null}}convertTimestamp(e){const t=Dl(e);return new An(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Xt.fromString(e);Qe(tM(r));const o=new Il(r.get(1),r.get(3)),u=new qe(r.popFirst(5));return o.isEqual(t)||Yn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function DD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class UP extends FS{constructor(e){super(),this.firestore=e}convertBytes(e){return new uc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,t)}}class Dp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class kl extends C0{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new A0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(_D("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class A0 extends kl{data(e={}){return super.data(e)}}class Eh{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Dp(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new A0(this._firestore,this._userDataWriter,r.key,r,new Dp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new A0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Dp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const m=new A0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Dp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,b=-1;return 0!==l.type&&(w=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),b=u.indexOf(l.doc.key)),{type:BP(l.type),doc:m,oldIndex:w,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function BP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rt()}}function Zx(n,e){return n instanceof kl&&e instanceof kl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Eh&&e instanceof Eh&&n._firestore===e._firestore&&_S(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Ih extends FS{constructor(e){super(),this.firestore=e}convertBytes(e){return new uc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Hn(this.firestore,null,t)}}function Kx(n,e,t){n=en(n,Hn);const r=en(n.firestore,Gn),o=DD(n.converter,e,t);return gy(r,[mD(Ep(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Pn.none())])}function Yx(n,e,t,...r){n=en(n,Hn);const o=en(n.firestore,Gn),u=Ep(o);let l;return l="string"==typeof(e=(0,tn.m9)(e))||e instanceof Pl?RS(u,"updateDoc",n._key,e,t,r):xS(u,"updateDoc",n._key,e),gy(o,[l.toMutation(n._key,Pn.exists(!0))])}function Qx(n,...e){var t,r,o;n=(0,tn.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||AS(e[l])||(u=e[l],l++);const m={includeMetadataChanges:u.includeMetadataChanges};if(AS(e[l])){const N=e[l];e[l]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[l+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[l+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let w,b,A;if(n instanceof Hn)b=en(n.firestore,Gn),A=up(n._key.path),w={next:N=>{e[l]&&e[l](LS(b,n,N))},error:e[l+1],complete:e[l+2]};else{const N=en(n,bi);b=en(N.firestore,Gn),A=N._query;const $=new Ih(b);w={next:J=>{e[l]&&e[l](new Eh(b,$,N,J))},error:e[l+1],complete:e[l+2]},jx(n._query)}return function(N,$,J,ce){const Pe=new dD(ce),$e=new zT($,Pe,J);return N.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return BT(yield fy(N),$e)})),()=>{Pe.bc(),N.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return $T(yield fy(N),$e)}))}}(br(b),A,m,w)}function gy(n,e){return function(t,r){const o=new Vr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function kO(n,e,t){return YT.apply(this,arguments)}(yield TS(t),r,o)})),o.promise}(br(n),e)}function LS(n,e,t){const r=t.docs.get(e._key),o=new Ih(n);return new kl(n,o,e._key,r,new Dp(t.hasPendingWrites,t.fromCache),e.converter)}const YP={maxAttempts:5};class Jx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ep(e)}set(e,t,r){this._verifyNotCommitted();const o=Dh(e,this._firestore),u=DD(o.converter,t,r),l=mD(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,Pn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Dh(e,this._firestore);let l;return l="string"==typeof(t=(0,tn.m9)(t))||t instanceof Pl?RS(this._dataReader,"WriteBatch.update",u._key,t,r,o):xS(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,Pn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Dh(e,this._firestore);return this._mutations=this._mutations.concat(new ph(t._key,Pn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ie.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Dh(n,e){if((n=(0,tn.m9)(n)).firestore!==e)throw new Ae(ie.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class QP extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ep(e)}get(e){const t=Dh(e,this._firestore),r=new UP(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return rt();const u=o[0];if(u.isFoundDocument())return new C0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new C0(this._firestore,r,t._key,null,t.converter);throw rt()})}set(e,t,r){const o=Dh(e,this._firestore),u=DD(o.converter,t,r),l=mD(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=Dh(e,this._firestore);let l;return l="string"==typeof(t=(0,tn.m9)(t))||t instanceof Pl?RS(this._dataReader,"Transaction.update",u._key,t,r,o):xS(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=Dh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Dh(e,this._firestore),r=new Ih(this._firestore);return super.get(e).then(o=>new kl(this._firestore,r,t._key,o._document,new Dp(!1,!1),t.converter))}}!function(n,e=!0){th=Hu.SDK_VERSION,(0,Hu._registerComponent)(new jg.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),l=new Gn(new DC(t.getProvider("auth-internal")),new CC(t.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new Ae(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Il(m.options.projectId,w)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),(0,Hu.registerVersion)(Sm,"3.8.3",n),(0,Hu.registerVersion)(Sm,"3.8.3","esm2017")}();function VS(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function eR(){if(typeof Uint8Array>"u")throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function tR(){if(!function Pm(){return typeof atob<"u"}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}class M0{constructor(e){this._delegate=e}static fromBase64String(e){return tR(),new M0(uc.fromBase64String(e))}static fromUint8Array(e){return eR(),new M0(uc.fromUint8Array(e))}toBase64(){return tR(),this._delegate.toBase64()}toUint8Array(){return eR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function US(n){return function ok(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class ak{enableIndexedDbPersistence(e,t){return function gP(n,e){Ox(n=en(n,Gn));const t=br(n),r=n._freezeSettings(),o=new yS;return Nx(t,o,new px(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function mP(n){Ox(n=en(n,Gn));const e=br(n),t=n._freezeSettings(),r=new yS;return Nx(e,r,new QO(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function yP(n){if(n._initialized&&!n._terminated)throw new Ae(ie.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Vr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!Ns.C())return Promise.resolve();const o=r+"main";yield Ns.delete(o)}),function(r){return t.apply(this,arguments)})(lT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class nR{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Il||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&_l("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function Ex(n,e,t,r={}){var o;const u=(n=en(n,D0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&_l("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,m;if("string"==typeof r.mockUserToken)l=r.mockUserToken,m=wr.MOCK_USER;else{l=(0,tn.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ae(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new wr(w)}n._authCredentials=new Jf(new A_(l,m))}}(this._delegate,e,t,r)}enableNetwork(){return function _P(n){return function sP(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield Sx(n),t=yield CS(n);return e.setNetworkEnabled(!0),function(r){const o=We(r);return o._u.delete(0),E0(o)}(t)}))}(br(n=en(n,Gn)))}(this._delegate)}disableNetwork(){return function wP(n){return function oP(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield Sx(n),t=yield CS(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(o){const u=We(o);u._u.add(0),yield oy(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(br(n=en(n,Gn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,gx("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function vP(n){return function(e){const t=new Vr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function UO(n,e){return tS.apply(this,arguments)}(yield TS(e),t)})),t.promise}(br(n=en(n,Gn)))}(this._delegate)}onSnapshotsInSync(e){return function KP(n,e){return function cP(n,e){const t=new dD(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield fy(n),o=t,We(r).Ru.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield fy(n),o=t,void We(r).Ru.delete(o);var r,o}))}}(br(n=en(n,Gn)),AS(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new my(this,Ix(this._delegate,e))}catch(t){throw ls(t,"collection()","Firestore.collection()")}}doc(e){try{return new Yo(this,lD(this._delegate,e))}catch(t){throw ls(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ds(this,function JO(n,e){if(n=en(n,D0),vS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(ie.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new bi(n,null,(t=e,new rc(Xt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ls(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function JP(n,e,t){n=en(n,Gn);const r=Object.assign(Object.assign({},YP),t);return function(o){if(o.maxAttempts<1)throw new Ae(ie.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,l){const m=new Vr;return o.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const w=yield function Ax(n){return hD(n).then(e=>e.datastore)}(o);new rP(o.asyncQueue,w,l,u,m).run()})),m.promise}(br(n),o=>e(new QP(n,o)),r)}(this._delegate,t=>e(new rR(this,t)))}batch(){return br(this._delegate),new iR(new Jx(this._delegate,e=>gy(this._delegate,e)))}loadBundle(e){return function EP(n,e){const t=br(n=en(n,Gn)),r=new fP;return function lP(n,e,t,r){const o=function(u,l){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,b){if(w instanceof Uint8Array)return bx(w,b);if(w instanceof ArrayBuffer)return bx(new Uint8Array(w),b);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new XO(w,l);var w}(t,w0(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function YO(n,e,t){const r=We(n);var o;(o=(0,me.Z)(function*(u,l,m){try{const w=yield l.getMetadata();if(yield function($,J){const ce=We($),Pe=cr(J.createTime);return ce.persistence.runTransaction("hasNewerBundle","readonly",$e=>ce.Ns.getBundleMetadata($e,J.id)).then($e=>!!$e&&$e.createTime.compareTo(Pe)>=0)}(u.localStore,w))return yield l.close(),m._completeWith({taskState:"Success",documentsLoaded:($=w).totalDocuments,bytesLoaded:$.totalBytes,totalDocuments:$.totalDocuments,totalBytes:$.totalBytes}),Promise.resolve(new Set);m._updateProgress(ix(w));const b=new MO(w,u.localStore,l.yt);let A=yield l.mc();for(;A;){const $=yield b.Fu(A);$&&m._updateProgress($),A=yield l.mc()}const N=yield b.complete();return yield Ol(u,N.Lu,void 0),yield function($,J){const ce=We($);return ce.persistence.runTransaction("Save bundle","readwrite",Pe=>ce.Ns.saveBundleMetadata(Pe,J))}(u.localStore,w),m._completeWith(N.progress),Promise.resolve(N.Bu)}catch(w){return _l("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var $}),function(u,l,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield TS(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function IP(n,e){return function dP(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const o=We(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield fD(n),e)}))}(br(n=en(n,Gn)),e).then(t=>t?new bi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ds(this,t):null)}}class bD extends FS{constructor(e){super(),this.firestore=e}convertBytes(e){return new M0(new uc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Yo.forKey(t,this.firestore,null)}}class rR{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new bD(e)}get(e){const t=Cp(e);return this._delegate.get(t).then(r=>new x0(this._firestore,new kl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Cp(e);return r?(VS("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Cp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Cp(e);return this._delegate.delete(t),this}}class iR{constructor(e){this._delegate=e}set(e,t,r){const o=Cp(e);return r?(VS("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Cp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Cp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class bp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new A0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new R0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=bp.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new bp(e,new bD(e),t),o.set(t,u)),u}}bp.INSTANCES=new WeakMap;class Yo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Yo(t,new Hn(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new Yo(t,new Hn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new my(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new my(this.firestore,Ix(this._delegate,e))}catch(t){throw ls(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,tn.m9)(e))instanceof Hn&&Dx(this._delegate,e)}set(e,t){t=VS("DocumentReference.set",t);try{return t?Kx(this._delegate,e,t):Kx(this._delegate,e)}catch(r){throw ls(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Yx(this._delegate,e):Yx(this._delegate,e,t,...r)}catch(o){throw ls(o,"updateDoc()","DocumentReference.update()")}}delete(){return function WP(n){return gy(en(n.firestore,Gn),[new ph(n._key,Pn.none())])}(this._delegate)}onSnapshot(...e){const t=sR(e),r=oR(e,o=>new x0(this.firestore,new kl(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return Qx(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function $P(n){n=en(n,Hn);const e=en(n.firestore,Gn),t=br(e),r=new Ih(e);return function aP(n,e){const t=new Vr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,l){try{const m=yield function(w,b){const A=We(w);return A.persistence.runTransaction("read document","readonly",N=>A.localDocuments.getDocument(N,b))}(o,u);m.isFoundDocument()?l.resolve(m):m.isNoDocument()?l.resolve(null):l.reject(new Ae(ie.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=cy(m,`Failed to get document '${u} from cache`);l.reject(w)}}),function(o,u,l){return r.apply(this,arguments)})(yield fD(n),e,t);var r})),t.promise}(t,n._key).then(o=>new kl(e,r,n._key,o,new Dp(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function HP(n){n=en(n,Hn);const e=en(n.firestore,Gn);return Mx(br(e),n._key,{source:"server"}).then(t=>LS(e,n,t))}(this._delegate):function jP(n){n=en(n,Hn);const e=en(n.firestore,Gn);return Mx(br(e),n._key).then(t=>LS(e,n,t))}(this._delegate),t.then(r=>new x0(this.firestore,new kl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Yo(this.firestore,this._delegate.withConverter(e?bp.getInstance(this.firestore,e):null))}}function ls(n,e,t){return n.message=n.message.replace(e,t),n}function sR(n){for(const e of n)if("object"==typeof e&&!US(e))return e;return{}}function oR(n,e){var t,r;let o;return o=US(n[0])?n[0]:US(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class x0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Yo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Zx(this._delegate,e._delegate)}}class R0 extends x0{data(e){const t=this._delegate.data(e);return function nh(n,e){n||rt()}(void 0!==t),t}}class ds{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bD(e)}where(e,t,r){try{return new ds(this.firestore,wh(this._delegate,function RP(n,e,t){const r=e,o=_D("where",n);return S0._create(o,r,t)}(e,t,r)))}catch(o){throw ls(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ds(this.firestore,wh(this._delegate,function NP(n,e="asc"){const t=e,r=_D("orderBy",n);return kS._create(r,t)}(e,t)))}catch(r){throw ls(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ds(this.firestore,wh(this._delegate,function OP(n){return vx("limit",n),wD._create("limit",n,"F")}(e)))}catch(t){throw ls(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ds(this.firestore,wh(this._delegate,function PP(n){return vx("limitToLast",n),wD._create("limitToLast",n,"L")}(e)))}catch(t){throw ls(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ds(this.firestore,wh(this._delegate,function kP(...n){return ED._create("startAt",n,!0)}(...e)))}catch(t){throw ls(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ds(this.firestore,wh(this._delegate,function FP(...n){return ED._create("startAfter",n,!1)}(...e)))}catch(t){throw ls(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ds(this.firestore,wh(this._delegate,function LP(...n){return ID._create("endBefore",n,!1)}(...e)))}catch(t){throw ls(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ds(this.firestore,wh(this._delegate,function VP(...n){return ID._create("endAt",n,!0)}(...e)))}catch(t){throw ls(t,"endAt()","Query.endAt()")}}isEqual(e){return _S(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function zP(n){n=en(n,bi);const e=en(n.firestore,Gn),t=br(e),r=new Ih(e);return function uP(n,e){const t=new Vr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(o,u,l){try{const m=yield rD(o,u,!0),w=new ax(u,m.Hi),b=w.Wu(m.documents),A=w.applyChanges(b,!1);l.resolve(A.snapshot)}catch(m){const w=cy(m,`Failed to execute query '${u} against cache`);l.reject(w)}}),function(o,u,l){return r.apply(this,arguments)})(yield fD(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Eh(e,r,n,o))}(this._delegate):"server"===e?.source?function qP(n){n=en(n,bi);const e=en(n.firestore,Gn),t=br(e),r=new Ih(e);return xx(t,n._query,{source:"server"}).then(o=>new Eh(e,r,n,o))}(this._delegate):function GP(n){n=en(n,bi);const e=en(n.firestore,Gn),t=br(e),r=new Ih(e);return jx(n._query),xx(t,n._query).then(o=>new Eh(e,r,n,o))}(this._delegate),t.then(r=>new BS(this.firestore,new Eh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=sR(e),r=oR(e,o=>new BS(this.firestore,new Eh(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return Qx(this._delegate,t,r)}withConverter(e){return new ds(this.firestore,this._delegate.withConverter(e?bp.getInstance(this.firestore,e):null))}}class ck{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new R0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class BS{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ds(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new R0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new ck(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new R0(this._firestore,r))})}isEqual(e){return Zx(this._delegate,e._delegate)}}class my extends ds{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Yo(this.firestore,e):null}doc(e){try{return new Yo(this.firestore,void 0===e?lD(this._delegate):lD(this._delegate,e))}catch(t){throw ls(t,"doc()","CollectionReference.doc()")}}add(e){return function ZP(n,e){const t=en(n.firestore,Gn),r=lD(n),o=DD(n.converter,e);return gy(t,[mD(Ep(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Pn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Yo(this.firestore,t))}isEqual(e){return Dx(this._delegate,e._delegate)}withConverter(e){return new my(this.firestore,this._delegate.withConverter(e?bp.getInstance(this.firestore,e):null))}}function Cp(n){return en(n,Hn)}class jS{constructor(...e){this._delegate=new Pl(...e)}static documentId(){return new jS(vn.keyField().canonicalString())}isEqual(e){return(e=(0,tn.m9)(e))instanceof Pl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Tp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function ek(){return new MS("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Tp(e)}static delete(){const e=function XP(){return new b0("deleteField")}();return e._methodName="FieldValue.delete",new Tp(e)}static arrayUnion(...e){const t=function tk(...n){return new TP("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Tp(t)}static arrayRemove(...e){const t=function nk(...n){return new SP("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Tp(t)}static increment(e){const t=function rk(n){return new AP("increment",n)}(e);return t._methodName="FieldValue.increment",new Tp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const lk={Firestore:nR,GeoPoint:pD,Timestamp:An,Blob:M0,Transaction:rR,WriteBatch:iR,DocumentReference:Yo,DocumentSnapshot:x0,Query:ds,QueryDocumentSnapshot:R0,QuerySnapshot:BS,CollectionReference:my,FieldPath:jS,FieldValue:Tp,setLogLevel:function uk(n){!function IC(n){Wa.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function hk(n){(function dk(n,e){n.INTERNAL.registerComponent(new jg.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},lk)))})(n,(e,t)=>new nR(e,t,new ak)),n.registerVersion("@firebase/firestore-compat","0.3.3")}(Nf.Z);var fk=P(6451),CD=P(5363),pk=P(6063);class gk extends or.x{constructor(e=1/0,t=1/0,r=pk.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=l;w+=2)m=w;m&&r.splice(0,m+1)}}}var mk=P(3099);function aR(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,mk.B)({connector:()=>new gk(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function uR(n,e){return(0,Bh.m)(e)?Nn(()=>n,e):Nn(()=>n)}var $S=P(9468);P(259);const GS=new Map,lR={activated:!1,tokenObservers:[]},Ek={initialized:!1,enabled:!1};function Ci(n){return GS.get(n)||Object.assign({},lR)}function SD(){return Ek}const zS="https://content-firebaseappcheck.googleapis.com/v1",Ck="exchangeDebugToken",dR={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Sk{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new tn.BH,yield function Ak(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new tn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const hs=new tn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function ZS(){return ZS=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,m;try{l=yield fetch(n,u)}catch(N){throw hs.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==l.status)throw hs.create("fetch-status-error",{httpStatus:l.status});try{m=yield l.json()}catch(N){throw hs.create("fetch-parse-error",{originalErrorMessage:N?.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw hs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const b=1e3*Number(w[1]),A=Date.now();return{token:m.token,expireTimeMillis:A+b,issuedAtTimeMillis:A}}),ZS.apply(this,arguments)}const Ok="firebase-app-check-database",Pk=1,N0="firebase-app-check-store";let xD=null;function KS(){return KS=(0,me.Z)(function*(n,e){const r=(yield function pR(){return xD||(xD=new Promise((n,e)=>{try{const t=indexedDB.open(Ok,Pk);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(hs.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(N0,{keyPath:"compositeKey"})}}catch(t){e(hs.create("storage-open",{originalErrorMessage:t?.message}))}}),xD)}()).transaction(N0,"readwrite"),u=r.objectStore(N0).put({compositeKey:n,value:e});return new Promise((l,m)=>{u.onsuccess=w=>{l()},r.onerror=w=>{var b;m(hs.create("storage-set",{originalErrorMessage:null===(b=w.target.error)||void 0===b?void 0:b.message}))}})}),KS.apply(this,arguments)}const O0=new $a.Yd("@firebase/app-check");function JS(n,e){return(0,tn.hl)()?function Fk(n,e){return function gR(n,e){return KS.apply(this,arguments)}(function yR(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{O0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function eA(){return eA=(0,me.Z)(function*(){const n=SD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),eA.apply(this,arguments)}const $k={error:"UNKNOWN_ERROR"};function Hk(n){return tn.US.encodeString(JSON.stringify(n),!1)}function RD(n){return tA.apply(this,arguments)}function tA(){return tA=(0,me.Z)(function*(n,e=!1){const t=n.app;!function hR(n){if(!Ci(n).activated)throw hs.create("use-before-activation",{appName:n.name})}(t);const r=Ci(t);let u,o=r.token;if(o&&!yy(o)&&(r.token=void 0,o=void 0),!o){const w=yield r.cachedTokenPromise;w&&(yy(w)?o=w:yield JS(t,void 0))}if(!e&&o&&yy(o))return{token:o.token};let m,l=!1;if(function vR(){return SD().enabled}()){r.exchangeTokenPromise||(r.exchangeTokenPromise=function WS(n,e){return ZS.apply(this,arguments)}(function Nk(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`${zS}/projects/${t}/apps/${r}:${Ck}?key=${o}`,body:{debug_token:e}}}(t,yield function _R(){return eA.apply(this,arguments)}()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const w=yield r.exchangeTokenPromise;return yield JS(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield Ci(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?O0.warn(w.message):O0.error(w),u=w}return o?u?m=yy(o)?{token:o.token,internalError:u}:IR(u):(m={token:o.token},r.token=o,yield JS(t,o)):m=IR(u),l&&function ER(n,e){const t=Ci(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,m),m}),tA.apply(this,arguments)}function rA(n,e){const t=Ci(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function wR(n){const{app:e}=n,t=Ci(e);let r=t.tokenRefresher;r||(r=function Gk(n){const{app:e}=n;return new Sk((0,me.Z)(function*(){let r;if(r=Ci(e).token?yield RD(n,!0):yield RD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ci(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},dR.RETRIAL_MIN_WAIT,dR.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function yy(n){return n.expireTimeMillis-Date.now()>0}function IR(n){return{token:Hk($k),error:n}}class zk{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ci(this.app);for(const t of e)rA(this.app,t.next);return Promise.resolve()}}const xR="app-check-internal";!function s1(){(0,Hu._registerComponent)(new jg.wA("app-check",n=>function qk(n,e){return new zk(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(xR).initialize()})),(0,Hu._registerComponent)(new jg.wA(xR,n=>function Wk(n){return{getToken:e=>RD(n,e),addTokenListener:e=>function nA(n,e,t,r){const{app:o}=n,u=Ci(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&yy(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),wR(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>wR(n))}(n,"INTERNAL",e),removeTokenListener:e=>rA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Hu.registerVersion)("@firebase/app-check","0.6.3")}();class aA{constructor(){return(0,Fr.vb)("app-check")}}typeof window<"u"&&window;var l1=P(9260);const NR=new g.OlP("angularfire2.auth.use-emulator"),OR=new g.OlP("angularfire2.auth.settings"),PR=new g.OlP("angularfire2.auth.tenant-id"),kR=new g.OlP("angularfire2.auth.langugage-code"),FR=new g.OlP("angularfire2.auth.use-device-language"),LR=new g.OlP("angularfire.auth.persistence"),VR=(n,e,t,r,o,u,l,m)=>(0,lo.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),l)for(const[b,A]of Object.entries(l))w.settings[b]=A;return m&&w.setPersistence(m),w},[t,r,o,u,l,m]);let UR=(()=>{class n{constructor(t,r,o,u,l,m,w,b,A,N,$,J){const ce=new or.x,Pe=ut(void 0).pipe((0,CD.Q)(l.outsideAngular),Nn(()=>u.runOutsideAngular(()=>Promise.resolve().then(P.bind(P,407)))),(0,H.U)(()=>(0,lo.on)(t,u,r)),(0,H.U)($e=>VR($e,u,m,b,A,N,w,$)),aR({bufferSize:1,refCount:!1}));if(eu(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ut(null);else{Pe.pipe(Fo()).subscribe();const Gt=Pe.pipe(Nn(Ht=>Ht.getRedirectResult().then(Bt=>Bt,()=>null)),Fr.iC,aR({bufferSize:1,refCount:!1})),qt=Pe.pipe(Nn(Ht=>new qr.y(Bt=>({unsubscribe:u.runOutsideAngular(()=>Ht.onAuthStateChanged(Wt=>Bt.next(Wt),Wt=>Bt.error(Wt),()=>Bt.complete()))})))),$t=Pe.pipe(Nn(Ht=>new qr.y(Bt=>({unsubscribe:u.runOutsideAngular(()=>Ht.onIdTokenChanged(Wt=>Bt.next(Wt),Wt=>Bt.error(Wt),()=>Bt.complete()))}))));this.authState=Gt.pipe(uR(qt),(0,$S.R)(l.outsideAngular),(0,CD.Q)(l.insideAngular)),this.user=Gt.pipe(uR($t),(0,$S.R)(l.outsideAngular),(0,CD.Q)(l.insideAngular)),this.idToken=this.user.pipe(Nn(Ht=>Ht?(0,ln.D)(Ht.getIdToken()):ut(null))),this.idTokenResult=this.user.pipe(Nn(Ht=>Ht?(0,ln.D)(Ht.getIdTokenResult()):ut(null))),this.credential=(0,fk.T)(Gt,ce,this.authState.pipe(Ei(Ht=>!Ht))).pipe((0,H.U)(Ht=>Ht?.user?Ht:null),(0,$S.R)(l.outsideAngular),(0,CD.Q)(l.insideAngular))}return(0,lo.pX)(this,Pe,u,{spy:{apply:($e,Gt,qt)=>{($e.startsWith("signIn")||$e.startsWith("createUser"))&&qt.then($t=>ce.next($t))}}})}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(lo.Dh),g.LFG(lo.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Fr.HU),g.LFG(NR,8),g.LFG(OR,8),g.LFG(PR,8),g.LFG(kR,8),g.LFG(FR,8),g.LFG(LR,8),g.LFG(aA,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function BR(n,e){return function h1(n,e=hE.z){return new qr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function cA(n,e){return BR(n,e).pipe((0,H.U)(t=>({payload:t,type:"query"})))}function OD(n,e){return cA(n,e).pipe($h(void 0),zv(),(0,H.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,m)=>{const w=o.find(A=>A.doc.ref.isEqual(l.ref)),b=t?.payload.docs.find(A=>A.ref.isEqual(l.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(l.metadata)||!w&&b&&JSON.stringify(b.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:l}})}),u}))}function jR(n,e,t){return OD(n,t).pipe(xu((r,o)=>function p1(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function g1(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return lA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return lA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return lA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Wb(n,e=W.y){return n=n??Zb,(0,ii.e)((t,r)=>{let o,u=!0;t.subscribe((0,lt.x)(r,l=>{const m=e(l);(u||!n(o,m))&&(u=!1,o=m,r.next(l))}))})}(),(0,H.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function lA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function $R(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class HR{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=OD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,H.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe($h(void 0),zv(),Ei(([r,o])=>o.length>0||!r),(0,H.U)(([r,o])=>o),Fr.iC)}auditTrail(e){return this.stateChanges(e).pipe(xu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=$R(e);return jR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fr.iC)}valueChanges(e={}){return cA(this.query,this.afs.schedulers.outsideAngular).pipe((0,H.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Fr.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(Fr.iC)}add(e){return this.ref.add(e)}doc(e){return new GR(this.ref.doc(e),this.afs)}}class GR{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=WR(r,t);return new HR(o,u,this.afs)}snapshotChanges(){return function f1(n,e){return BR(n,e).pipe($h(void 0),zv(),(0,H.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Fr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,H.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ln.D)(this.ref.get(e)).pipe(Fr.iC)}}class m1{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?OD(this.query,this.afs.schedulers.outsideAngular).pipe((0,H.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ei(t=>t.length>0),Fr.iC):OD(this.query,this.afs.schedulers.outsideAngular).pipe(Fr.iC)}auditTrail(e){return this.stateChanges(e).pipe(xu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=$R(e);return jR(this.query,t,this.afs.schedulers.outsideAngular).pipe(Fr.iC)}valueChanges(e={}){return cA(this.query,this.afs.schedulers.outsideAngular).pipe((0,H.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Fr.iC)}get(e){return(0,ln.D)(this.query.get(e)).pipe(Fr.iC)}}const zR=new g.OlP("angularfire2.enableFirestorePersistence"),qR=new g.OlP("angularfire2.firestore.persistenceSettings"),y1=new g.OlP("angularfire2.firestore.settings"),v1=new g.OlP("angularfire2.firestore.use-emulator");function WR(n,e=(t=>t)){return{query:e(n),ref:n}}let ZR=(()=>{class n{constructor(t,r,o,u,l,m,w,b,A,N,$,J,ce,Pe,$e,Gt,qt){this.schedulers=w;const $t=(0,lo.on)(t,m,r),Ht=A;N&&VR($t,m,$,ce,Pe,$e,J,Gt),[this.firestore,this.persistenceEnabled$]=(0,lo.cc)(`${$t.name}.firestore`,"AngularFirestore",$t.name,()=>{const Bt=m.runOutsideAngular(()=>$t.firestore());if(u&&Bt.settings(u),Ht&&Bt.useEmulator(...Ht),o&&!eu(l)){const Wt=()=>{try{return(0,ln.D)(Bt.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(Jr){return typeof console<"u"&&console.warn(Jr),ut(!1)}};return[Bt,m.runOutsideAngular(Wt)]}return[Bt,ut(!1)]},[u,Ht,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=WR(o,r),m=this.schedulers.ngZone.run(()=>u);return new HR(m,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new m1(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new GR(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(g.LFG(lo.Dh),g.LFG(lo.xv,8),g.LFG(zR,8),g.LFG(y1,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(Fr.HU),g.LFG(qR,8),g.LFG(v1,8),g.LFG(UR,8),g.LFG(NR,8),g.LFG(OR,8),g.LFG(PR,8),g.LFG(kR,8),g.LFG(FR,8),g.LFG(LR,8),g.LFG(aA,8))},n.\u0275prov=g.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_1=(()=>{class n{constructor(){l1.Z.registerVersion("angularfire",Fr.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:zR,useValue:!0},{provide:qR,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=g.oAB({type:n}),n.\u0275inj=g.cJS({providers:[ZR]}),n})();class bh{constructor(e){this.store=e,this.variablePartagee=new wi(""),this.items=this.store.collection("task").snapshotChanges().pipe((0,H.U)(t=>t.map(r=>{const o=r.payload.doc.data();return o.id=r.payload.doc.id,o.$key=r.payload.doc.id,o})))}getAllData(){return this.items}addData(e){this.store.collection("task").add(e).then(t=>{console.log("Reponse: "+t)}).catch(t=>{console.log(t)})}removeData(e){this.store.doc("task/"+e).delete()}getSpecificData(e){return this.store.doc("task/"+e).get()}setVariablePartagee(e){this.variablePartagee.next(e)}getVariablePartagee(){return this.variablePartagee.asObservable()}}function w1(n,e){1&n&&(g.TgZ(0,"div"),g._uU(1," Saisissez un titre de tache "),g.qZA())}function E1(n,e){1&n&&(g.TgZ(0,"div"),g._uU(1," Saisissez une description de tache "),g.qZA())}bh.\u0275fac=function(e){return new(e||bh)(g.LFG(ZR))},bh.\u0275prov=g.Yz7({token:bh,factory:bh.\u0275fac,providedIn:"root"});class P0{constructor(e,t){this.myService=e,this.fb=t,this.btndesablbe=!0}ngOnInit(){this.form=this.fb.group({title:["",Mw.required],description:["",Mw.required]})}saveData(e){this.form.value.title.length<2||this.form.value.description<2?e.preventDefault():(this.btndesablbe=!1,this.myService.addData(this.form.value),this.form.value.title=" ",this.form.value.description=" ")}}P0.\u0275fac=function(e){return new(e||P0)(g.Y36(bh),g.Y36(Ms))},P0.\u0275cmp=g.Xpm({type:P0,selectors:[["app-add-task"]],decls:22,vars:3,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[3,"formGroup"],[1,"input-group","mb-3"],[1,"input-group-text"],["type","text","formControlName","title","placeholder","Titre de la tache","aria-label","Username","required","",1,"form-control"],[4,"ngIf"],["formControlName","description","placeholder","Description de la tache","aria-label","With textarea","required","",1,"form-control"],["data-bs-dismiss","modal","type","submit",1,"btn","btn-outline-success","w-100",3,"click"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),g._uU(4,"Creation d'une tache"),g.qZA(),g._UZ(5,"button",4),g.qZA(),g.TgZ(6,"div",5)(7,"form",6)(8,"div",7)(9,"span",8),g._uU(10,"@"),g.qZA(),g._UZ(11,"input",9),g.YNc(12,w1,2,0,"div",10),g.qZA(),g.TgZ(13,"div",7),g._UZ(14,"textarea",11),g.YNc(15,E1,2,0,"div",10),g.qZA(),g.TgZ(16,"div",7)(17,"button",12),g.NdJ("click",function(o){return t.saveData(o)}),g._uU(18,"Creer la tache"),g.qZA()()()(),g.TgZ(19,"div",13)(20,"button",14),g._uU(21,"Annuler la creation de la tache"),g.qZA()()()()),2&e&&(g.xp6(7),g.Q6J("formGroup",t.form),g.xp6(5),g.Q6J("ngIf",t.form.controls.title.invalid&&t.form.controls.title.touched),g.xp6(3),g.Q6J("ngIf",t.form.controls.description.invalid&&t.form.controls.description.touched))},dependencies:[Ls,Og,sl,yf,vf,Hd,$d,xf]});class k0{}k0.\u0275fac=function(e){return new(e||k0)},k0.\u0275cmp=g.Xpm({type:k0,selectors:[["app-show-filter"]],inputs:{filterTitre:"filterTitre",filterdesc:"filterdesc"},decls:11,vars:2,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),g._uU(4),g.qZA(),g._UZ(5,"button",4),g.qZA(),g.TgZ(6,"div",5),g._uU(7),g.qZA(),g.TgZ(8,"div",6)(9,"button",7),g._uU(10,"Fermer la tache"),g.qZA()()()()),2&e&&(g.xp6(4),g.Oqu(t.filterTitre),g.xp6(3),g.hij(" ",t.filterdesc," "))}});class F0{constructor(e,t){this.fb=e,this.myService=t,this.filterTitre="",this.filterdesc="",this.myService.getVariablePartagee().subscribe(r=>{this.variablePartagee=r,this.myService.getSpecificData(this.variablePartagee.trim()).subscribe(o=>{this.filterTitre=o.data().title,this.filterdesc=o.data().description})})}ngOnInit(){}updatesaveData(e){this.myService.removeData(this.variablePartagee),this.myService.addData({title:this.filterTitre,description:this.filterdesc}),this.filterTitre="",this.filterdesc=""}}function I1(n,e){if(1&n){const t=g.EpF();g.TgZ(0,"div")(1,"div",15)(2,"a",16),g._uU(3),g.qZA(),g.TgZ(4,"span")(5,"b"),g._uU(6,"Tache id"),g.qZA(),g._uU(7),g.qZA(),g.TgZ(8,"div",17)(9,"button",18),g.NdJ("click",function(){const u=g.CHM(t).$implicit,l=g.oxw();return g.KtG(l.updateData(u.id))}),g._UZ(10,"i",19),g.qZA(),g.TgZ(11,"button",20),g.NdJ("click",function(){const u=g.CHM(t).$implicit,l=g.oxw();return g.KtG(l.deleteData(u.id))}),g._UZ(12,"i",21),g.qZA()()(),g.TgZ(13,"div",22)(14,"div",23),g._uU(15),g.qZA()()()}if(2&n){const t=e.$implicit;g.xp6(3),g.hij(" ",t.title," "),g.xp6(4),g.hij(": ",t.id," "),g.xp6(8),g.hij(" ",t.description," ")}}F0.\u0275fac=function(e){return new(e||F0)(g.Y36(Ms),g.Y36(bh))},F0.\u0275cmp=g.Xpm({type:F0,selectors:[["app-update-task"]],decls:20,vars:2,consts:[[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","exampleModalLabel",1,"modal-title","fs-5"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"input-group","mb-3"],[1,"input-group-text"],["type","text","name","filterTitre","placeholder","Titre de la tache","aria-label","Username","required","",1,"form-control",3,"ngModel","ngModelChange"],["name","filterdesc","placeholder","Description de la tache","aria-label","With textarea","required","",1,"form-control",3,"ngModel","ngModelChange"],["data-bs-dismiss","modal","type","submit",1,"btn","btn-outline-success","w-100",3,"click"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),g._uU(4,"Mise a jour d'une tache"),g.qZA(),g._UZ(5,"button",4),g.qZA(),g.TgZ(6,"div",5)(7,"form")(8,"div",6)(9,"span",7),g._uU(10,"@"),g.qZA(),g.TgZ(11,"input",8),g.NdJ("ngModelChange",function(o){return t.filterTitre=o}),g.qZA()(),g.TgZ(12,"div",6)(13,"textarea",9),g.NdJ("ngModelChange",function(o){return t.filterdesc=o}),g.qZA()(),g.TgZ(14,"div",6)(15,"button",10),g.NdJ("click",function(o){return t.updatesaveData(o)}),g._uU(16,"Mettre a jour la tache"),g.qZA()()()(),g.TgZ(17,"div",11)(18,"button",12),g._uU(19,"Annuler la modification de la tache"),g.qZA()()()()),2&e&&(g.xp6(11),g.Q6J("ngModel",t.filterTitre),g.xp6(2),g.Q6J("ngModel",t.filterdesc))},dependencies:[Og,sl,yf,vf,Hd,Mf,Sf]});class L0{constructor(e,t){this.myService=e,this.fb=t,this.open=!1}ngOnInit(){this.searcheForm=this.fb.group({id:["",Mw.required]}),this.myService.getAllData().subscribe(e=>{this.list_task=e})}deleteData(e){console.log("id"+e),this.myService.removeData(e)}showDatabyId(){this.myService.getSpecificData(this.searcheForm.value.id.trim()).subscribe(e=>{this.filterTitre=e.data().title,this.filterdesc=e.data().description})}updateData(e){this.myService.setVariablePartagee(e)}}L0.\u0275fac=function(e){return new(e||L0)(g.Y36(bh),g.Y36(Ms))},L0.\u0275cmp=g.Xpm({type:L0,selectors:[["app-home"]],decls:19,vars:4,consts:[[1,"d-flex","align-items-center","justify-content-center"],[1,"card","shadow",2,"width","600px"],[1,"card-body"],[1,"d-flex","align-item-center","justify-content-between","mb-3"],["type","button","data-bs-toggle","modal","data-bs-target","#exampleModal",1,"btn","btn-primary"],[3,"formGroup"],[1,"input-group"],["type","text","formControlName","id","placeholder","Recherche a partir de l'id","aria-label","Username","required","",1,"form-control"],["data-bs-toggle","modal","data-bs-target","#examplFiltereModal","type","submit",1,"btn","btn-outline-primary",3,"click"],[1,"bi","bi-search"],[4,"ngFor","ngForOf"],["id","exampleUpdateModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["id","exampleModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],["id","examplFiltereModal","tabindex","-1","aria-labelledby","exampleModalLabel","aria-hidden","true",1,"modal","fade"],[3,"filterTitre","filterdesc"],[1,"d-flex","align-item-center","justify-content-between","p-3","shadow"],["data-bs-toggle","collapse","href","#collapseExample","role","button","aria-expanded","false","aria-controls","collapseExample",1,"btn","btn-outline-primary"],[1,"d-flex","align-item-center","gap-3"],["data-bs-toggle","modal","data-bs-target","#exampleUpdateModal",1,"btn","btn-outline-secondary",3,"click"],[1,"bi","bi-arrow-counterclockwise"],[1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash"],["id","collapseExample",1,"collapse"],[1,"card","card-body"]],template:function(e,t){1&e&&(g.TgZ(0,"main",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),g._uU(5," Ajouter une tache "),g.qZA(),g.TgZ(6,"form",5)(7,"div",6),g._UZ(8,"input",7),g.TgZ(9,"div")(10,"button",8),g.NdJ("click",function(){return t.showDatabyId()}),g._UZ(11,"i",9),g.qZA()()()()(),g.YNc(12,I1,16,3,"div",10),g.qZA()()(),g.TgZ(13,"div",11),g._UZ(14,"app-update-task"),g.qZA(),g.TgZ(15,"div",12),g._UZ(16,"app-add-task"),g.qZA(),g.TgZ(17,"div",13),g._UZ(18,"app-show-filter",14),g.qZA()),2&e&&(g.xp6(6),g.Q6J("formGroup",t.searcheForm),g.xp6(6),g.Q6J("ngForOf",t.list_task),g.xp6(6),g.Q6J("filterTitre",t.filterTitre)("filterdesc",t.filterdesc))},dependencies:[pi,P0,k0,F0,Og,sl,yf,vf,Hd,$d,xf],styles:[".bi-trash[_ngcontent-%COMP%]:hover{color:#fff}"]});const D1=[{path:"",component:L0}];class vy{}vy.\u0275fac=function(e){return new(e||vy)},vy.\u0275mod=g.oAB({type:vy}),vy.\u0275inj=g.cJS({imports:[gv.forRoot(D1),gv]});class V0{constructor(){this.title="task-apps"}}V0.\u0275fac=function(e){return new(e||V0)},V0.\u0275cmp=g.Xpm({type:V0,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&g._UZ(0,"router-outlet")},dependencies:[tg]});class _y{}_y.\u0275fac=function(e){return new(e||_y)},_y.\u0275mod=g.oAB({type:_y}),_y.\u0275inj=g.cJS({imports:[Xa,gv,lo.hO.initializeApp({apiKey:"AIzaSyD2MATMCn9rQYUsbhBHqPRhit_cricPh_A",authDomain:"task-app-bf8f2.firebaseapp.com",projectId:"task-app-bf8f2",storageBucket:"task-app-bf8f2.appspot.com",messagingSenderId:"89045998051",appId:"1:89045998051:web:bb2ba494f4f945379728d6"}),_1,xs,co]});class wy{}wy.\u0275fac=function(e){return new(e||wy)},wy.\u0275mod=g.oAB({type:wy,bootstrap:[V0]}),wy.\u0275inj=g.cJS({imports:[Da,vy,_y,xs]}),td().bootstrapModule(wy).catch(n=>console.error(n))},9751:(ht,Ie,P)=>{P.d(Ie,{y:()=>ae});var g=P(2961),K=P(727),O=P(8822),X=P(9635),ee=P(2416),te=P(576),de=P(2806);let ae=(()=>{class Z{constructor(Ee){Ee&&(this._subscribe=Ee)}lift(Ee){const He=new Z;return He.source=this,He.operator=Ee,He}subscribe(Ee,He,st){const le=function B(Z){return Z&&Z instanceof g.Lv||function j(Z){return Z&&(0,te.m)(Z.next)&&(0,te.m)(Z.error)&&(0,te.m)(Z.complete)}(Z)&&(0,K.Nn)(Z)}(Ee)?Ee:new g.Hp(Ee,He,st);return(0,de.x)(()=>{const{operator:be,source:De}=this;le.add(be?be.call(le,De):De?this._subscribe(le):this._trySubscribe(le))}),le}_trySubscribe(Ee){try{return this._subscribe(Ee)}catch(He){Ee.error(He)}}forEach(Ee,He){return new(He=se(He))((st,le)=>{const be=new g.Hp({next:De=>{try{Ee(De)}catch(ke){le(ke),be.unsubscribe()}},error:le,complete:st});this.subscribe(be)})}_subscribe(Ee){var He;return null===(He=this.source)||void 0===He?void 0:He.subscribe(Ee)}[O.L](){return this}pipe(...Ee){return(0,X.U)(Ee)(this)}toPromise(Ee){return new(Ee=se(Ee))((He,st)=>{let le;this.subscribe(be=>le=be,be=>st(be),()=>He(le))})}}return Z.create=Ue=>new Z(Ue),Z})();function se(Z){var Ue;return null!==(Ue=Z??ee.v.Promise)&&void 0!==Ue?Ue:Promise}},7579:(ht,Ie,P)=>{P.d(Ie,{x:()=>de});var g=P(9751),K=P(727);const X=(0,P(3888).d)(se=>function(){se(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ee=P(8737),te=P(2806);let de=(()=>{class se extends g.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(B){const Z=new ae(this,this);return Z.operator=B,Z}_throwIfClosed(){if(this.closed)throw new X}next(B){(0,te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next(B)}})}error(B){(0,te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=B;const{observers:Z}=this;for(;Z.length;)Z.shift().error(B)}})}complete(){(0,te.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:B}=this;for(;B.length;)B.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var B;return(null===(B=this.observers)||void 0===B?void 0:B.length)>0}_trySubscribe(B){return this._throwIfClosed(),super._trySubscribe(B)}_subscribe(B){return this._throwIfClosed(),this._checkFinalizedStatuses(B),this._innerSubscribe(B)}_innerSubscribe(B){const{hasError:Z,isStopped:Ue,observers:Ee}=this;return Z||Ue?K.Lc:(this.currentObservers=null,Ee.push(B),new K.w0(()=>{this.currentObservers=null,(0,ee.P)(Ee,B)}))}_checkFinalizedStatuses(B){const{hasError:Z,thrownError:Ue,isStopped:Ee}=this;Z?B.error(Ue):Ee&&B.complete()}asObservable(){const B=new g.y;return B.source=this,B}}return se.create=(j,B)=>new ae(j,B),se})();class ae extends de{constructor(j,B){super(),this.destination=j,this.source=B}next(j){var B,Z;null===(Z=null===(B=this.destination)||void 0===B?void 0:B.next)||void 0===Z||Z.call(B,j)}error(j){var B,Z;null===(Z=null===(B=this.destination)||void 0===B?void 0:B.error)||void 0===Z||Z.call(B,j)}complete(){var j,B;null===(B=null===(j=this.destination)||void 0===j?void 0:j.complete)||void 0===B||B.call(j)}_subscribe(j){var B,Z;return null!==(Z=null===(B=this.source)||void 0===B?void 0:B.subscribe(j))&&void 0!==Z?Z:K.Lc}}},2961:(ht,Ie,P)=>{P.d(Ie,{Hp:()=>st,Lv:()=>Z});var g=P(576),K=P(727),O=P(2416),X=P(7849);function ee(){}const te=se("C",void 0,void 0);function se(we,ve,Te){return{kind:we,value:ve,error:Te}}var j=P(3410),B=P(2806);class Z extends K.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,K.Nn)(ve)&&ve.add(this)):this.destination=ke}static create(ve,Te,Ne){return new st(ve,Te,Ne)}next(ve){this.isStopped?De(function ae(we){return se("N",we,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?De(function de(we){return se("E",void 0,we)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?De(te,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ue=Function.prototype.bind;function Ee(we,ve){return Ue.call(we,ve)}class He{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:Te}=this;if(Te.next)try{Te.next(ve)}catch(Ne){le(Ne)}}error(ve){const{partialObserver:Te}=this;if(Te.error)try{Te.error(ve)}catch(Ne){le(Ne)}else le(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(Te){le(Te)}}}class st extends Z{constructor(ve,Te,Ne){let Re;if(super(),(0,g.m)(ve)||!ve)Re={next:ve??void 0,error:Te??void 0,complete:Ne??void 0};else{let V;this&&O.v.useDeprecatedNextContext?(V=Object.create(ve),V.unsubscribe=()=>this.unsubscribe(),Re={next:ve.next&&Ee(ve.next,V),error:ve.error&&Ee(ve.error,V),complete:ve.complete&&Ee(ve.complete,V)}):Re=ve}this.destination=new He(Re)}}function le(we){O.v.useDeprecatedSynchronousErrorHandling?(0,B.O)(we):(0,X.h)(we)}function De(we,ve){const{onStoppedNotification:Te}=O.v;Te&&j.z.setTimeout(()=>Te(we,ve))}const ke={closed:!0,next:ee,error:function be(we){throw we},complete:ee}},727:(ht,Ie,P)=>{P.d(Ie,{Lc:()=>te,w0:()=>ee,Nn:()=>de});var g=P(576);const O=(0,P(3888).d)(se=>function(B){se(this),this.message=B?`${B.length} errors occurred during unsubscription:\n${B.map((Z,Ue)=>`${Ue+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=B});var X=P(8737);class ee{constructor(j){this.initialTeardown=j,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let j;if(!this.closed){this.closed=!0;const{_parentage:B}=this;if(B)if(this._parentage=null,Array.isArray(B))for(const Ee of B)Ee.remove(this);else B.remove(this);const{initialTeardown:Z}=this;if((0,g.m)(Z))try{Z()}catch(Ee){j=Ee instanceof O?Ee.errors:[Ee]}const{_finalizers:Ue}=this;if(Ue){this._finalizers=null;for(const Ee of Ue)try{ae(Ee)}catch(He){j=j??[],He instanceof O?j=[...j,...He.errors]:j.push(He)}}if(j)throw new O(j)}}add(j){var B;if(j&&j!==this)if(this.closed)ae(j);else{if(j instanceof ee){if(j.closed||j._hasParent(this))return;j._addParent(this)}(this._finalizers=null!==(B=this._finalizers)&&void 0!==B?B:[]).push(j)}}_hasParent(j){const{_parentage:B}=this;return B===j||Array.isArray(B)&&B.includes(j)}_addParent(j){const{_parentage:B}=this;this._parentage=Array.isArray(B)?(B.push(j),B):B?[B,j]:j}_removeParent(j){const{_parentage:B}=this;B===j?this._parentage=null:Array.isArray(B)&&(0,X.P)(B,j)}remove(j){const{_finalizers:B}=this;B&&(0,X.P)(B,j),j instanceof ee&&j._removeParent(this)}}ee.EMPTY=(()=>{const se=new ee;return se.closed=!0,se})();const te=ee.EMPTY;function de(se){return se instanceof ee||se&&"closed"in se&&(0,g.m)(se.remove)&&(0,g.m)(se.add)&&(0,g.m)(se.unsubscribe)}function ae(se){(0,g.m)(se)?se():se.unsubscribe()}},2416:(ht,Ie,P)=>{P.d(Ie,{v:()=>g});const g={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(ht,Ie,P)=>{P.d(Ie,{E:()=>K});const K=new(P(9751).y)(ee=>ee.complete())},8996:(ht,Ie,P)=>{P.d(Ie,{D:()=>ve});var g=P(8421),K=P(5363),O=P(9468),te=P(9751),ae=P(2202),se=P(576),j=P(9672);function Z(Te,Ne){if(!Te)throw new Error("Iterable cannot be null");return new te.y(Re=>{(0,j.f)(Re,Ne,()=>{const V=Te[Symbol.asyncIterator]();(0,j.f)(Re,Ne,()=>{V.next().then(ye=>{ye.done?Re.complete():Re.next(ye.value)})},0,!0)})})}var Ue=P(3670),Ee=P(8239),He=P(1144),st=P(6495),le=P(2206),be=P(4532),De=P(3260);function ve(Te,Ne){return Ne?function we(Te,Ne){if(null!=Te){if((0,Ue.c)(Te))return function X(Te,Ne){return(0,g.Xf)(Te).pipe((0,O.R)(Ne),(0,K.Q)(Ne))}(Te,Ne);if((0,He.z)(Te))return function de(Te,Ne){return new te.y(Re=>{let V=0;return Ne.schedule(function(){V===Te.length?Re.complete():(Re.next(Te[V++]),Re.closed||this.schedule())})})}(Te,Ne);if((0,Ee.t)(Te))return function ee(Te,Ne){return(0,g.Xf)(Te).pipe((0,O.R)(Ne),(0,K.Q)(Ne))}(Te,Ne);if((0,le.D)(Te))return Z(Te,Ne);if((0,st.T)(Te))return function B(Te,Ne){return new te.y(Re=>{let V;return(0,j.f)(Re,Ne,()=>{V=Te[ae.h](),(0,j.f)(Re,Ne,()=>{let ye,Ve;try{({value:ye,done:Ve}=V.next())}catch(ze){return void Re.error(ze)}Ve?Re.complete():Re.next(ye)},0,!0)}),()=>(0,se.m)(V?.return)&&V.return()})}(Te,Ne);if((0,De.L)(Te))return function ke(Te,Ne){return Z((0,De.Q)(Te),Ne)}(Te,Ne)}throw(0,be.z)(Te)}(Te,Ne):(0,g.Xf)(Te)}},8421:(ht,Ie,P)=>{P.d(Ie,{Xf:()=>Ue});var g=P(655),K=P(1144),O=P(8239),X=P(9751),ee=P(3670),te=P(2206),de=P(4532),ae=P(6495),se=P(3260),j=P(576),B=P(7849),Z=P(8822);function Ue(we){if(we instanceof X.y)return we;if(null!=we){if((0,ee.c)(we))return function Ee(we){return new X.y(ve=>{const Te=we[Z.L]();if((0,j.m)(Te.subscribe))return Te.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(we);if((0,K.z)(we))return function He(we){return new X.y(ve=>{for(let Te=0;Te<we.length&&!ve.closed;Te++)ve.next(we[Te]);ve.complete()})}(we);if((0,O.t)(we))return function st(we){return new X.y(ve=>{we.then(Te=>{ve.closed||(ve.next(Te),ve.complete())},Te=>ve.error(Te)).then(null,B.h)})}(we);if((0,te.D)(we))return be(we);if((0,ae.T)(we))return function le(we){return new X.y(ve=>{for(const Te of we)if(ve.next(Te),ve.closed)return;ve.complete()})}(we);if((0,se.L)(we))return function De(we){return be((0,se.Q)(we))}(we)}throw(0,de.z)(we)}function be(we){return new X.y(ve=>{(function ke(we,ve){var Te,Ne,Re,V;return(0,g.mG)(this,void 0,void 0,function*(){try{for(Te=(0,g.KL)(we);!(Ne=yield Te.next()).done;)if(ve.next(Ne.value),ve.closed)return}catch(ye){Re={error:ye}}finally{try{Ne&&!Ne.done&&(V=Te.return)&&(yield V.call(Te))}finally{if(Re)throw Re.error}}ve.complete()})})(we,ve).catch(Te=>ve.error(Te))})}},6451:(ht,Ie,P)=>{P.d(Ie,{T:()=>te});var g=P(8189),K=P(8421),O=P(515),X=P(7669),ee=P(8996);function te(...de){const ae=(0,X.yG)(de),se=(0,X._6)(de,1/0),j=de;return j.length?1===j.length?(0,K.Xf)(j[0]):(0,g.J)(se)((0,ee.D)(j,ae)):O.E}},5403:(ht,Ie,P)=>{P.d(Ie,{x:()=>K});var g=P(2961);function K(X,ee,te,de,ae){return new O(X,ee,te,de,ae)}class O extends g.Lv{constructor(ee,te,de,ae,se,j){super(ee),this.onFinalize=se,this.shouldUnsubscribe=j,this._next=te?function(B){try{te(B)}catch(Z){ee.error(Z)}}:super._next,this._error=ae?function(B){try{ae(B)}catch(Z){ee.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(B){ee.error(B)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ee;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:te}=this;super.unsubscribe(),!te&&(null===(ee=this.onFinalize)||void 0===ee||ee.call(this))}}}},4004:(ht,Ie,P)=>{P.d(Ie,{U:()=>O});var g=P(4482),K=P(5403);function O(X,ee){return(0,g.e)((te,de)=>{let ae=0;te.subscribe((0,K.x)(de,se=>{de.next(X.call(ee,se,ae++))}))})}},8189:(ht,Ie,P)=>{P.d(Ie,{J:()=>O});var g=P(5577),K=P(4671);function O(X=1/0){return(0,g.z)(K.y,X)}},5577:(ht,Ie,P)=>{P.d(Ie,{z:()=>ae});var g=P(4004),K=P(8421),O=P(4482),X=P(9672),ee=P(5403),de=P(576);function ae(se,j,B=1/0){return(0,de.m)(j)?ae((Z,Ue)=>(0,g.U)((Ee,He)=>j(Z,Ee,Ue,He))((0,K.Xf)(se(Z,Ue))),B):("number"==typeof j&&(B=j),(0,O.e)((Z,Ue)=>function te(se,j,B,Z,Ue,Ee,He,st){const le=[];let be=0,De=0,ke=!1;const we=()=>{ke&&!le.length&&!be&&j.complete()},ve=Ne=>be<Z?Te(Ne):le.push(Ne),Te=Ne=>{Ee&&j.next(Ne),be++;let Re=!1;(0,K.Xf)(B(Ne,De++)).subscribe((0,ee.x)(j,V=>{Ue?.(V),Ee?ve(V):j.next(V)},()=>{Re=!0},void 0,()=>{if(Re)try{for(be--;le.length&&be<Z;){const V=le.shift();He?(0,X.f)(j,He,()=>Te(V)):Te(V)}we()}catch(V){j.error(V)}}))};return se.subscribe((0,ee.x)(j,ve,()=>{ke=!0,we()})),()=>{st?.()}}(Z,Ue,se,B)))}},5363:(ht,Ie,P)=>{P.d(Ie,{Q:()=>X});var g=P(9672),K=P(4482),O=P(5403);function X(ee,te=0){return(0,K.e)((de,ae)=>{de.subscribe((0,O.x)(ae,se=>(0,g.f)(ae,ee,()=>ae.next(se),te),()=>(0,g.f)(ae,ee,()=>ae.complete(),te),se=>(0,g.f)(ae,ee,()=>ae.error(se),te)))})}},3099:(ht,Ie,P)=>{P.d(Ie,{B:()=>ee});var g=P(8421),K=P(7579),O=P(2961),X=P(4482);function ee(de={}){const{connector:ae=(()=>new K.x),resetOnError:se=!0,resetOnComplete:j=!0,resetOnRefCountZero:B=!0}=de;return Z=>{let Ue,Ee,He,st=0,le=!1,be=!1;const De=()=>{Ee?.unsubscribe(),Ee=void 0},ke=()=>{De(),Ue=He=void 0,le=be=!1},we=()=>{const ve=Ue;ke(),ve?.unsubscribe()};return(0,X.e)((ve,Te)=>{st++,!be&&!le&&De();const Ne=He=He??ae();Te.add(()=>{st--,0===st&&!be&&!le&&(Ee=te(we,B))}),Ne.subscribe(Te),!Ue&&st>0&&(Ue=new O.Hp({next:Re=>Ne.next(Re),error:Re=>{be=!0,De(),Ee=te(ke,se,Re),Ne.error(Re)},complete:()=>{le=!0,De(),Ee=te(ke,j),Ne.complete()}}),(0,g.Xf)(ve).subscribe(Ue))})(Z)}}function te(de,ae,...se){if(!0===ae)return void de();if(!1===ae)return;const j=new O.Hp({next:()=>{j.unsubscribe(),de()}});return ae(...se).subscribe(j)}},9468:(ht,Ie,P)=>{P.d(Ie,{R:()=>K});var g=P(4482);function K(O,X=0){return(0,g.e)((ee,te)=>{te.add(O.schedule(()=>ee.subscribe(te),X))})}},8505:(ht,Ie,P)=>{P.d(Ie,{b:()=>ee});var g=P(576),K=P(4482),O=P(5403),X=P(4671);function ee(te,de,ae){const se=(0,g.m)(te)||de||ae?{next:te,error:de,complete:ae}:te;return se?(0,K.e)((j,B)=>{var Z;null===(Z=se.subscribe)||void 0===Z||Z.call(se);let Ue=!0;j.subscribe((0,O.x)(B,Ee=>{var He;null===(He=se.next)||void 0===He||He.call(se,Ee),B.next(Ee)},()=>{var Ee;Ue=!1,null===(Ee=se.complete)||void 0===Ee||Ee.call(se),B.complete()},Ee=>{var He;Ue=!1,null===(He=se.error)||void 0===He||He.call(se,Ee),B.error(Ee)},()=>{var Ee,He;Ue&&(null===(Ee=se.unsubscribe)||void 0===Ee||Ee.call(se)),null===(He=se.finalize)||void 0===He||He.call(se)}))}):X.y}},4408:(ht,Ie,P)=>{P.d(Ie,{o:()=>ee});var g=P(727);class K extends g.w0{constructor(de,ae){super()}schedule(de,ae=0){return this}}const O={setInterval(te,de,...ae){const{delegate:se}=O;return se?.setInterval?se.setInterval(te,de,...ae):setInterval(te,de,...ae)},clearInterval(te){const{delegate:de}=O;return(de?.clearInterval||clearInterval)(te)},delegate:void 0};var X=P(8737);class ee extends K{constructor(de,ae){super(de,ae),this.scheduler=de,this.work=ae,this.pending=!1}schedule(de,ae=0){var se;if(this.closed)return this;this.state=de;const j=this.id,B=this.scheduler;return null!=j&&(this.id=this.recycleAsyncId(B,j,ae)),this.pending=!0,this.delay=ae,this.id=null!==(se=this.id)&&void 0!==se?se:this.requestAsyncId(B,this.id,ae),this}requestAsyncId(de,ae,se=0){return O.setInterval(de.flush.bind(de,this),se)}recycleAsyncId(de,ae,se=0){if(null!=se&&this.delay===se&&!1===this.pending)return ae;null!=ae&&O.clearInterval(ae)}execute(de,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const se=this._execute(de,ae);if(se)return se;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,ae){let j,se=!1;try{this.work(de)}catch(B){se=!0,j=B||new Error("Scheduled action threw falsy error")}if(se)return this.unsubscribe(),j}unsubscribe(){if(!this.closed){const{id:de,scheduler:ae}=this,{actions:se}=ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,X.P)(se,this),null!=de&&(this.id=this.recycleAsyncId(ae,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(ht,Ie,P)=>{P.d(Ie,{v:()=>O});var g=P(6063);class K{constructor(ee,te=K.now){this.schedulerActionCtor=ee,this.now=te}schedule(ee,te=0,de){return new this.schedulerActionCtor(this,ee).schedule(de,te)}}K.now=g.l.now;class O extends K{constructor(ee,te=K.now){super(ee,te),this.actions=[],this._active=!1}flush(ee){const{actions:te}=this;if(this._active)return void te.push(ee);let de;this._active=!0;do{if(de=ee.execute(ee.state,ee.delay))break}while(ee=te.shift());if(this._active=!1,de){for(;ee=te.shift();)ee.unsubscribe();throw de}}}},4986:(ht,Ie,P)=>{P.d(Ie,{z:()=>O});var g=P(4408);const O=new(P(7565).v)(g.o)},6063:(ht,Ie,P)=>{P.d(Ie,{l:()=>g});const g={now:()=>(g.delegate||Date).now(),delegate:void 0}},3410:(ht,Ie,P)=>{P.d(Ie,{z:()=>g});const g={setTimeout(K,O,...X){const{delegate:ee}=g;return ee?.setTimeout?ee.setTimeout(K,O,...X):setTimeout(K,O,...X)},clearTimeout(K){const{delegate:O}=g;return(O?.clearTimeout||clearTimeout)(K)},delegate:void 0}},2202:(ht,Ie,P)=>{P.d(Ie,{h:()=>K});const K=function g(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(ht,Ie,P)=>{P.d(Ie,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(ht,Ie,P)=>{P.d(Ie,{_6:()=>te,jO:()=>X,yG:()=>ee});var g=P(576);function O(de){return de[de.length-1]}function X(de){return(0,g.m)(O(de))?de.pop():void 0}function ee(de){return function K(de){return de&&(0,g.m)(de.schedule)}(O(de))?de.pop():void 0}function te(de,ae){return"number"==typeof O(de)?de.pop():ae}},8737:(ht,Ie,P)=>{function g(K,O){if(K){const X=K.indexOf(O);0<=X&&K.splice(X,1)}}P.d(Ie,{P:()=>g})},3888:(ht,Ie,P)=>{function g(K){const X=K(ee=>{Error.call(ee),ee.stack=(new Error).stack});return X.prototype=Object.create(Error.prototype),X.prototype.constructor=X,X}P.d(Ie,{d:()=>g})},2806:(ht,Ie,P)=>{P.d(Ie,{O:()=>X,x:()=>O});var g=P(2416);let K=null;function O(ee){if(g.v.useDeprecatedSynchronousErrorHandling){const te=!K;if(te&&(K={errorThrown:!1,error:null}),ee(),te){const{errorThrown:de,error:ae}=K;if(K=null,de)throw ae}}else ee()}function X(ee){g.v.useDeprecatedSynchronousErrorHandling&&K&&(K.errorThrown=!0,K.error=ee)}},9672:(ht,Ie,P)=>{function g(K,O,X,ee=0,te=!1){const de=O.schedule(function(){X(),te?K.add(this.schedule(null,ee)):this.unsubscribe()},ee);if(K.add(de),!te)return de}P.d(Ie,{f:()=>g})},4671:(ht,Ie,P)=>{function g(K){return K}P.d(Ie,{y:()=>g})},1144:(ht,Ie,P)=>{P.d(Ie,{z:()=>g});const g=K=>K&&"number"==typeof K.length&&"function"!=typeof K},2206:(ht,Ie,P)=>{P.d(Ie,{D:()=>K});var g=P(576);function K(O){return Symbol.asyncIterator&&(0,g.m)(O?.[Symbol.asyncIterator])}},576:(ht,Ie,P)=>{function g(K){return"function"==typeof K}P.d(Ie,{m:()=>g})},3670:(ht,Ie,P)=>{P.d(Ie,{c:()=>O});var g=P(8822),K=P(576);function O(X){return(0,K.m)(X[g.L])}},6495:(ht,Ie,P)=>{P.d(Ie,{T:()=>O});var g=P(2202),K=P(576);function O(X){return(0,K.m)(X?.[g.h])}},8239:(ht,Ie,P)=>{P.d(Ie,{t:()=>K});var g=P(576);function K(O){return(0,g.m)(O?.then)}},3260:(ht,Ie,P)=>{P.d(Ie,{L:()=>X,Q:()=>O});var g=P(655),K=P(576);function O(ee){return(0,g.FC)(this,arguments,function*(){const de=ee.getReader();try{for(;;){const{value:ae,done:se}=yield(0,g.qq)(de.read());if(se)return yield(0,g.qq)(void 0);yield yield(0,g.qq)(ae)}}finally{de.releaseLock()}})}function X(ee){return(0,K.m)(ee?.getReader)}},4482:(ht,Ie,P)=>{P.d(Ie,{A:()=>K,e:()=>O});var g=P(576);function K(X){return(0,g.m)(X?.lift)}function O(X){return ee=>{if(K(ee))return ee.lift(function(te){try{return X(te,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(ht,Ie,P)=>{P.d(Ie,{U:()=>O,z:()=>K});var g=P(4671);function K(...X){return O(X)}function O(X){return 0===X.length?g.y:1===X.length?X[0]:function(te){return X.reduce((de,ae)=>ae(de),te)}}},7849:(ht,Ie,P)=>{P.d(Ie,{h:()=>O});var g=P(2416),K=P(3410);function O(X){K.z.setTimeout(()=>{const{onUnhandledError:ee}=g.v;if(!ee)throw X;ee(X)})}},4532:(ht,Ie,P)=>{function g(K){return new TypeError(`You provided ${null!==K&&"object"==typeof K?"an invalid object":`'${K}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}P.d(Ie,{z:()=>g})},655:(ht,Ie,P)=>{function X(re,ue){var ge={};for(var Se in re)Object.prototype.hasOwnProperty.call(re,Se)&&ue.indexOf(Se)<0&&(ge[Se]=re[Se]);if(null!=re&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(Se=Object.getOwnPropertySymbols(re);Fe<Se.length;Fe++)ue.indexOf(Se[Fe])<0&&Object.prototype.propertyIsEnumerable.call(re,Se[Fe])&&(ge[Se[Fe]]=re[Se[Fe]])}return ge}function Z(re,ue,ge,Se){return new(ge||(ge=Promise))(function(Be,Ke){function Ge(Qt){try{_t(Se.next(Qt))}catch(et){Ke(et)}}function rn(Qt){try{_t(Se.throw(Qt))}catch(et){Ke(et)}}function _t(Qt){Qt.done?Be(Qt.value):function Fe(Be){return Be instanceof ge?Be:new ge(function(Ke){Ke(Be)})}(Qt.value).then(Ge,rn)}_t((Se=Se.apply(re,ue||[])).next())})}function we(re){return this instanceof we?(this.v=re,this):new we(re)}function ve(re,ue,ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,Se=ge.apply(re,ue||[]),Be=[];return Fe={},Ke("next"),Ke("throw"),Ke("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function Ke(xt){Se[xt]&&(Fe[xt]=function(mn){return new Promise(function(_n,yn){Be.push([xt,mn,_n,yn])>1||Ge(xt,mn)})})}function Ge(xt,mn){try{!function rn(xt){xt.value instanceof we?Promise.resolve(xt.value.v).then(_t,Qt):et(Be[0][2],xt)}(Se[xt](mn))}catch(_n){et(Be[0][3],_n)}}function _t(xt){Ge("next",xt)}function Qt(xt){Ge("throw",xt)}function et(xt,mn){xt(mn),Be.shift(),Be.length&&Ge(Be[0][0],Be[0][1])}}function Ne(re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ge,ue=re[Symbol.asyncIterator];return ue?ue.call(re):(re=function st(re){var ue="function"==typeof Symbol&&Symbol.iterator,ge=ue&&re[ue],Se=0;if(ge)return ge.call(re);if(re&&"number"==typeof re.length)return{next:function(){return re&&Se>=re.length&&(re=void 0),{value:re&&re[Se++],done:!re}}};throw new TypeError(ue?"Object is not iterable.":"Symbol.iterator is not defined.")}(re),ge={},Se("next"),Se("throw"),Se("return"),ge[Symbol.asyncIterator]=function(){return this},ge);function Se(Be){ge[Be]=re[Be]&&function(Ke){return new Promise(function(Ge,rn){!function Fe(Be,Ke,Ge,rn){Promise.resolve(rn).then(function(_t){Be({value:_t,done:Ge})},Ke)}(Ge,rn,(Ke=re[Be](Ke)).done,Ke.value)})}}}P.d(Ie,{FC:()=>ve,KL:()=>Ne,_T:()=>X,mG:()=>Z,qq:()=>we})},4650:(ht,Ie,P)=>{P.d(Ie,{$8M:()=>Eu,$WT:()=>Un,$Z:()=>pv,AFp:()=>ur,AaK:()=>ae,CHM:()=>Ic,CRH:()=>Am,CZH:()=>Pm,CqO:()=>Nv,D6c:()=>u0,EJc:()=>rp,EpF:()=>Vb,F4k:()=>Jw,FYo:()=>lf,FiY:()=>Au,GfV:()=>Qy,Gpc:()=>B,JOm:()=>Pi,KtG:()=>Hl,LFG:()=>je,Lbi:()=>U_,Lck:()=>Wu,MMx:()=>g_,NdJ:()=>Ov,OlP:()=>on,Oqu:()=>Rt,P3R:()=>ns,PXZ:()=>ah,Q6J:()=>Kw,QGY:()=>kg,Qsj:()=>ag,R0b:()=>Er,RDi:()=>io,Rgc:()=>Ku,SBq:()=>Sd,Sil:()=>Sl,Suo:()=>Wa,TTD:()=>tu,TgZ:()=>Ng,X6Q:()=>FI,XFs:()=>gt,Xpm:()=>Xo,Xts:()=>jy,Y36:()=>ff,YKP:()=>Xd,YNc:()=>Lb,Yjl:()=>ta,Yz7:()=>et,Z0I:()=>yn,ZZ4:()=>a0,_Bn:()=>XE,_UZ:()=>Mf,_Vd:()=>cf,_c5:()=>zI,_uU:()=>Hg,aQg:()=>Jm,c2e:()=>Fm,cJS:()=>mn,cg1:()=>dl,dDg:()=>MI,dqk:()=>Mt,eFA:()=>dn,eJc:()=>M_,ekj:()=>Bg,eoX:()=>W_,f3M:()=>tt,g9A:()=>Xu,h0i:()=>Jd,hGG:()=>ph,hij:()=>ll,iGM:()=>wr,ifc:()=>zt,ip1:()=>V_,jDz:()=>m_,kL8:()=>CE,lG2:()=>ea,lqb:()=>nl,lri:()=>q_,n5z:()=>ed,oAB:()=>bn,oxw:()=>$d,q4F:()=>nw,qLn:()=>Ad,qOj:()=>wf,qZA:()=>Af,rWj:()=>jm,sBO:()=>Q_,s_b:()=>Kf,soG:()=>os,tb:()=>B_,tp0:()=>C,uIk:()=>Sv,vHH:()=>le,vpe:()=>Rs,wAp:()=>It,xp6:()=>hw,z2F:()=>nc,zSh:()=>Y0,zs3:()=>il});var g=P(7579),K=P(727),O=P(9751),X=P(6451),ee=P(3099);function te(i){for(let s in i)if(i[s]===te)return s;throw Error("Could not find renamed property on target object.")}function de(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ae(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ae).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function se(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const j=te({__forward_ref__:te});function B(i){return i.__forward_ref__=B,i.toString=function(){return ae(this())},i}function Z(i){return Ue(i)?i():i}function Ue(i){return"function"==typeof i&&i.hasOwnProperty(j)&&i.__forward_ref__===B}function Ee(i){return i&&!!i.\u0275providers}const st="https://g.co/ng/security#xss";class le extends Error{constructor(s,a){super(be(s,a)),this.code=s}}function be(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}function De(i){return"string"==typeof i?i:null==i?"":String(i)}function Ne(i,s){throw new le(-201,!1)}function Ke(i,s){null==i&&function Ge(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function et(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function mn(i){return{providers:i.providers||[],imports:i.imports||[]}}function _n(i){return wn(i,Cr)||wn(i,cn)}function yn(i){return null!==_n(i)}function wn(i,s){return i.hasOwnProperty(s)?i[s]:null}function di(i){return i&&(i.hasOwnProperty(Fs)||i.hasOwnProperty(Ur))?i[Fs]:null}const Cr=te({\u0275prov:te}),Fs=te({\u0275inj:te}),cn=te({ngInjectableDef:te}),Ur=te({ngInjectorDef:te});var gt=(()=>((gt=gt||{})[gt.Default=0]="Default",gt[gt.Host=1]="Host",gt[gt.Self=2]="Self",gt[gt.SkipSelf=4]="SkipSelf",gt[gt.Optional=8]="Optional",gt))();let $i;function En(i){const s=$i;return $i=i,s}function Tr(i,s,a){const c=_n(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&gt.Optional?null:void 0!==s?s:void Ne(ae(i))}const Mt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),xn={},In="__NG_DI_FLAG__",fi="ngTempTokenPath",lr="ngTokenPath",Qo=/\n/gm,sn="\u0275",Gi="__source";let Zt;function dr(i){const s=Zt;return Zt=i,s}function Ti(i,s=gt.Default){if(void 0===Zt)throw new le(-203,!1);return null===Zt?Tr(i,void 0,s):Zt.get(i,s&gt.Optional?null:void 0,s)}function je(i,s=gt.Default){return(function hi(){return $i}()||Ti)(Z(i),s)}function tt(i,s=gt.Default){return je(i,Dt(s))}function Dt(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Ct(i){const s=[];for(let a=0;a<i.length;a++){const c=Z(i[a]);if(Array.isArray(c)){if(0===c.length)throw new le(900,!1);let d,f=gt.Default;for(let v=0;v<c.length;v++){const E=c[v],I=U(E);"number"==typeof I?-1===I?d=E.token:f|=I:d=E}s.push(je(d,f))}else s.push(je(c))}return s}function kt(i,s){return i[In]=s,i.prototype[In]=s,i}function U(i){return i[In]}function fe(i){return{toString:i}.toString()}var Q=(()=>((Q=Q||{})[Q.OnPush=0]="OnPush",Q[Q.Default=1]="Default",Q))(),zt=(()=>{return(i=zt||(zt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",zt;var i})();const Dn={},yt=[],Jn=te({\u0275cmp:te}),jt=te({\u0275dir:te}),zn=te({\u0275pipe:te}),ho=te({\u0275mod:te}),hr=te({\u0275fac:te}),Jo=te({__NG_ELEMENT_ID__:te});let Ch=0;function Xo(i){return fe(()=>{const a=!0===i.standalone,c={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===Q.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||yt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||zt.Emulated,id:"c"+Ch++,styles:i.styles||yt,_:null,setInput:null,schemas:i.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},f=i.dependencies,v=i.features;return d.inputs=lc(i.inputs,c),d.outputs=lc(i.outputs),v&&v.forEach(E=>E(d)),d.directiveDefs=f?()=>("function"==typeof f?f():f).map(cc).filter(Fl):null,d.pipeDefs=f?()=>("function"==typeof f?f():f).map(Fn).filter(Fl):null,d})}function cc(i){return Kt(i)||qn(i)}function Fl(i){return null!==i}function bn(i){return fe(()=>({type:i.type,bootstrap:i.bootstrap||yt,declarations:i.declarations||yt,imports:i.imports||yt,exports:i.exports||yt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function lc(i,s){if(null==i)return Dn;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=c,s&&(s[d]=f)}return a}const ea=Xo;function ta(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Kt(i){return i[Jn]||null}function qn(i){return i[jt]||null}function Fn(i){return i[zn]||null}function Un(i){const s=Kt(i)||qn(i)||Fn(i);return null!==s&&s.standalone}function fr(i,s){const a=i[ho]||null;if(!a&&!0===s)throw new Error(`Type ${ae(i)} does not have '\u0275mod' property.`);return a}const ei=0,Ye=1,Nt=2,hn=3,Sr=4,zi=5,Bn=6,pi=7,Cn=8,fo=9,Ls=10,Lt=11,dc=12,gs=13,hc=14,gi=15,pr=16,po=17,Vs=18,mi=19,ms=20,qi=21,un=22,ti=1,Vl=2,go=7,Us=8,Ar=9,gr=10;function Br(i){return Array.isArray(i)&&"object"==typeof i[ti]}function yi(i){return Array.isArray(i)&&!0===i[ti]}function na(i){return 0!=(4&i.flags)}function vi(i){return i.componentOffset>-1}function fc(i){return 1==(1&i.flags)}function jr(i){return null!==i.template}function ra(i){return 0!=(256&i[Nt])}function js(i,s){return i.hasOwnProperty(hr)?i[hr]:null}class $s{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function tu(){return vo}function vo(i){return i.type.prototype.ngOnChanges&&(i.setInput=_o),nu}function nu(){const i=sa(this),s=i?.current;if(s){const a=i.previous;if(a===Dn)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function _o(i,s,a,c){const d=this.declaredInputs[a],f=sa(i)||function jl(i,s){return i[Hs]=s}(i,{previous:Dn,current:null}),v=f.current||(f.current={}),E=f.previous,I=E[d];v[d]=new $s(I&&I.currentValue,s,E===Dn),i[c]=s}tu.ngInherit=!0;const Hs="__ngSimpleChanges__";function sa(i){return i[Hs]||null}const $r=function(i,s,a){};function Ln(i){for(;Array.isArray(i);)i=i[ei];return i}function Gs(i,s){return Ln(s[i])}function jn(i,s){return Ln(s[i.index])}function Do(i,s){return i.data[s]}function Xn(i,s){const a=s[i];return Br(a)?a:a[ei]}function bo(i){return 64==(64&i[Nt])}function Zi(i,s){return null==s?null:i[s]}function aa(i){i[Vs]=0}function ua(i,s){i[zi]+=s;let a=i,c=i[hn];for(;null!==c&&(1===s&&1===a[zi]||-1===s&&0===a[zi]);)c[zi]+=s,a=c,c=c[hn]}const Tt={lFrame:Ey(null),bindingsEnabled:!0};function au(){return Tt.bindingsEnabled}function he(){return Tt.lFrame.lView}function Yt(){return Tt.lFrame.tView}function Ic(i){return Tt.lFrame.contextLView=i,i[Cn]}function Hl(i){return Tt.lFrame.contextLView=null,i}function ir(){let i=ca();for(;null!==i&&64===i.type;)i=i.parent;return i}function ca(){return Tt.lFrame.currentTNode}function Hr(i,s){const a=Tt.lFrame;a.currentTNode=i,a.isParent=s}function cu(){return Tt.lFrame.isParent}function qs(){return Tt.lFrame.bindingIndex++}function ql(i,s){const a=Tt.lFrame;a.bindingIndex=a.bindingRootIndex=i,Cc(s)}function Cc(i){Tt.lFrame.currentDirectiveIndex=i}function Wl(){return Tt.lFrame.currentQueryIndex}function Tc(i){Tt.lFrame.currentQueryIndex=i}function Zl(i){const s=i[Ye];return 2===s.type?s.declTNode:1===s.type?i[Bn]:null}function Rh(i,s,a){if(a&gt.SkipSelf){let d=s,f=i;for(;!(d=d.parent,null!==d||a&gt.Host||(d=Zl(f),null===d||(f=f[gi],10&d.type))););if(null===d)return!1;s=d,i=f}const c=Tt.lFrame=Nh();return c.currentTNode=s,c.lView=i,!0}function hu(i){const s=Nh(),a=i[Ye];Tt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Nh(){const i=Tt.lFrame,s=null===i?null:i.child;return null===s?Ey(i):s}function Ey(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Mp(){const i=Tt.lFrame;return Tt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Sc=Mp;function xp(){const i=Mp();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function xr(){return Tt.lFrame.selectedIndex}function Co(i){Tt.lFrame.selectedIndex=i}function fn(){const i=Tt.lFrame;return Do(i.tView,i.selectedIndex)}function da(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:x}=f;v&&(i.contentHooks||(i.contentHooks=[])).push(-a,v),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=x&&(i.destroyHooks||(i.destroyHooks=[])).push(a,x)}}function Ws(i,s,a){ha(i,s,3,a)}function Mc(i,s,a,c){(3&i[Nt])===a&&ha(i,s,a,c)}function vs(i,s){let a=i[Nt];(3&a)===s&&(a&=2047,a+=1,i[Nt]=a)}function ha(i,s,a,c){const f=c??-1,v=s.length-1;let E=0;for(let I=void 0!==c?65535&i[Vs]:0;I<v;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=c&&E>=c)break}else s[I]<0&&(i[Vs]+=65536),(E<f||-1==f)&&(fa(i,a,s,I),i[Vs]=(4294901760&i[Vs])+I+2),I++}function fa(i,s,a,c){const d=a[c]<0,f=a[c+1],E=i[d?-a[c]:a[c]];if(d){if(i[Nt]>>11<i[Vs]>>16&&(3&i[Nt])===s){i[Nt]+=2048,$r(4,E,f);try{f.call(E)}finally{$r(5,E,f)}}}else{$r(4,E,f);try{f.call(E)}finally{$r(5,E,f)}}}const So=-1;class _s{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Tn(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const f=a[c++],v=a[c++],E=a[c++];i.setAttribute(s,v,E,f)}else{const f=d,v=a[++c];Yi(f)?i.setProperty(s,f,v):i.setAttribute(s,f,v),c++}}return c}function ga(i){return 3===i||4===i||6===i}function Yi(i){return 64===i.charCodeAt(0)}function Qi(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||Ao(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function Ao(i,s,a,c,d){let f=0,v=i.length;if(-1===s)v=-1;else for(;f<i.length;){const E=i[f++];if("number"==typeof E){if(E===s){v=-1;break}if(E>s){v=f-1;break}}}for(;f<i.length;){const E=i[f];if("number"==typeof E)break;if(E===a){if(null===c)return void(null!==d&&(i[f+1]=d));if(c===i[f+1])return void(i[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==v&&(i.splice(v,0,s),f=v+1),i.splice(f++,0,a),null!==c&&i.splice(f++,0,c),null!==d&&i.splice(f++,0,d)}function xc(i){return i!==So}function ma(i){return 32767&i}function gu(i,s){let a=function pu(i){return i>>16}(i),c=s;for(;a>0;)c=c[gi],a--;return c}let ws=!0;function Mo(i){const s=ws;return ws=i,s}const ya=255,va=5;let mu=0;const mr={};function Ro(i,s){const a=wa(i,s);if(-1!==a)return a;const c=s[Ye];c.firstCreatePass&&(i.injectorIndex=s.length,Es(c.data,i),Es(s,null),Es(c.blueprint,null));const d=yu(i,s),f=i.injectorIndex;if(xc(d)){const v=ma(d),E=gu(d,s),I=E[Ye].data;for(let T=0;T<8;T++)s[f+T]=E[v+T]|I[v+T]}return s[f+8]=d,f}function Es(i,s){i.push(0,0,0,0,0,0,0,0,s)}function wa(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function yu(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=Nc(d),null===c)return So;if(a++,d=d[gi],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return So}function Ea(i,s,a){!function _a(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(Jo)&&(c=a[Jo]),null==c&&(c=a[Jo]=mu++);const d=c&ya;s.data[i+(d>>va)]|=1<<d}(i,s,a)}function Ys(i,s,a){if(a&gt.Optional||void 0!==i)return i;Ne()}function Ia(i,s,a,c){if(a&gt.Optional&&void 0===c&&(c=null),!(a&(gt.Self|gt.Host))){const d=i[fo],f=En(void 0);try{return d?d.get(s,c,a&gt.Optional):Tr(s,c,a&gt.Optional)}finally{En(f)}}return Ys(c,0,a)}function Jl(i,s,a,c=gt.Default,d){if(null!==i){if(1024&s[Nt]){const v=function td(i,s,a,c,d){let f=i,v=s;for(;null!==f&&null!==v&&1024&v[Nt]&&!(256&v[Nt]);){const E=xi(f,v,a,c|gt.Self,mr);if(E!==mr)return E;let I=f.parent;if(!I){const T=v[qi];if(T){const x=T.get(a,mr,c);if(x!==mr)return x}I=Nc(v),v=v[gi]}f=I}return d}(i,s,a,c,mr);if(v!==mr)return v}const f=xi(i,s,a,c,mr);if(f!==mr)return f}return Ia(s,a,c,d)}function xi(i,s,a,c,d){const f=function Xl(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Jo)?i[Jo]:void 0;return"number"==typeof s?s>=0?s&ya:Op:s}(a);if("function"==typeof f){if(!Rh(s,i,c))return c&gt.Host?Ys(d,0,c):Ia(s,a,c,d);try{const v=f(c);if(null!=v||c&gt.Optional)return v;Ne()}finally{Sc()}}else if("number"==typeof f){let v=null,E=wa(i,s),I=So,T=c&gt.Host?s[pr][Bn]:null;for((-1===E||c&gt.SkipSelf)&&(I=-1===E?yu(i,s):s[E+8],I!==So&&Ji(c,!1)?(v=s[Ye],E=ma(I),s=gu(I,s)):E=-1);-1!==E;){const x=s[Ye];if(_u(f,E,x.data)){const k=vu(E,s,a,v,c,T);if(k!==mr)return k}I=s[E+8],I!==So&&Ji(c,s[Ye].data[E+8]===T)&&_u(f,E,s)?(v=x,E=ma(I),s=gu(I,s)):E=-1}}return d}function vu(i,s,a,c,d,f){const v=s[Ye],E=v.data[i+8],x=Qs(E,v,a,null==c?vi(E)&&ws:c!=v&&0!=(3&E.type),d&gt.Host&&f===E);return null!==x?Ri(s,v,x,E):mr}function Qs(i,s,a,c,d){const f=i.providerIndexes,v=s.data,E=1048575&f,I=i.directiveStart,x=f>>20,G=d?E+x:i.directiveEnd;for(let Y=c?E:E+x;Y<G;Y++){const pe=v[Y];if(Y<I&&a===pe||Y>=I&&pe.type===a)return Y}if(d){const Y=v[I];if(Y&&jr(Y)&&Y.type===a)return I}return null}function Ri(i,s,a,c){let d=i[a];const f=s.data;if(function ni(i){return i instanceof _s}(d)){const v=d;v.resolving&&function we(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new le(-200,`Circular dependency in DI detected for ${i}${a}`)}(function ke(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():De(i)}(f[a]));const E=Mo(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?En(v.injectImpl):null;Rh(i,c,gt.Default);try{d=i[a]=v.factory(void 0,f,i,c),s.firstCreatePass&&a>=c.directiveStart&&function Np(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=s.type.prototype;if(c){const v=vo(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,v)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&En(I),Mo(E),v.resolving=!1,Sc()}}return d}function _u(i,s,a){return!!(a[s+(i>>va)]&1<<i)}function Ji(i,s){return!(i&gt.Self||i&gt.Host&&s)}class _i{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Jl(this._tNode,this._lView,s,Dt(c),a)}}function Op(){return new _i(ir(),he())}function ed(i){return fe(()=>{const s=i.prototype.constructor,a=s[hr]||wu(s),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const f=d[hr]||wu(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function wu(i){return Ue(i)?()=>{const s=wu(Z(i));return s&&s()}:js(i)}function Nc(i){const s=i[Ye],a=s.type;return 2===a?s.declTNode:1===a?i[Bn]:null}function Eu(i){return function Rc(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const f=a[d];if(ga(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(f===s)return a[d+1];d+=2}}}return null}(ir(),i)}const Da="__parameters__";function ba(i,s,a){return fe(()=>{const c=function kh(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...f){if(this instanceof d)return c.apply(this,f),this;const v=new d(...f);return E.annotation=v,E;function E(I,T,x){const k=I.hasOwnProperty(Da)?I[Da]:Object.defineProperty(I,Da,{value:[]})[Da];for(;k.length<=x;)k.push(null);return(k[x]=k[x]||[]).push(v),I}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class on{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=et({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ni(i,s){i.forEach(a=>Array.isArray(a)?Ni(a,s):s(a))}function Cu(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function No(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Rr(i,s,a){let c=Oi(i,s);return c>=0?i[1|c]=a:(c=~c,function Vh(i,s,a,c){let d=i.length;if(d==s)i.push(a,c);else if(1===d)i.push(c,i[0]),i[0]=a;else{for(d--,i.push(i[d-1],i[d]);d>s;)i[d]=i[d-2],d--;i[s]=a,i[s+1]=c}}(i,c,s,a)),c}function Su(i,s){const a=Oi(i,s);if(a>=0)return i[1|a]}function Oi(i,s){return function Uh(i,s,a){let c=0,d=i.length>>a;for(;d!==c;){const f=c+(d-c>>1),v=i[f<<a];if(s===v)return f<<a;v>s?d=f:c=f+1}return~(d<<a)}(i,s,1)}const Au=kt(ba("Optional"),8),C=kt(ba("SkipSelf"),4);var Pi=(()=>((Pi=Pi||{})[Pi.Important=1]="Important",Pi[Pi.DashCase=2]="DashCase",Pi))();const no=new Map;let Sy=0;const er="__ngContext__";function On(i,s){Br(s)?(i[er]=s[ms],function Ay(i){no.set(i[ms],i)}(s)):i[er]=s}let Vt;function Aa(i,s){return Vt(i,s)}function Ii(i){const s=i[hn];return yi(s)?s[hn]:s}function Ma(i){return Uc(i[gs])}function Kh(i){return Uc(i[Sr])}function Uc(i){for(;null!==i&&!yi(i);)i=i[Sr];return i}function Ts(i,s,a,c,d){if(null!=c){let f,v=!1;yi(c)?f=c:Br(c)&&(v=!0,c=c[ei]);const E=Ln(c);0===i&&null!==a?null==d?ki(s,a,E):Ra(s,a,E,d||null,!0):1===i&&null!==a?Ra(s,a,E,d||null,!0):2===i?function $o(i,s,a){const c=$c(i,s);c&&function ky(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,E,v):3===i&&s.destroyNode(E),null!=f&&function Xh(i,s,a,c,d){const f=a[go];f!==Ln(a)&&Ts(s,i,c,f,d);for(let E=gr;E<a.length;E++){const I=a[E];Oa(I[Ye],I,i,s,c,f)}}(s,i,f,a,d)}}function xa(i,s,a){return i.createElement(s,a)}function jo(i,s){const a=i[Ar],c=a.indexOf(s),d=s[hn];512&s[Nt]&&(s[Nt]&=-513,ua(d,-1)),a.splice(c,1)}function Qh(i,s){if(i.length<=gr)return;const a=gr+s,c=i[a];if(c){const d=c[po];null!==d&&d!==i&&jo(d,c),s>0&&(i[a-1][Sr]=c[Sr]);const f=No(i,gr+s);!function fd(i,s){Oa(i,s,s[Lt],2,null,null),s[ei]=null,s[Bn]=null}(c[Ye],c);const v=f[mi];null!==v&&v.detachView(f[Ye]),c[hn]=null,c[Sr]=null,c[Nt]&=-65}return c}function Hp(i,s){if(!(128&s[Nt])){const a=s[Lt];a.destroyNode&&Oa(i,s,a,3,null,null),function Yh(i){let s=i[gs];if(!s)return Jh(i[Ye],i);for(;s;){let a=null;if(Br(s))a=s[gs];else{const c=s[gr];c&&(a=c)}if(!a){for(;s&&!s[Sr]&&s!==i;)Br(s)&&Jh(s[Ye],s),s=s[hn];null===s&&(s=i),Br(s)&&Jh(s[Ye],s),a=s&&s[Sr]}s=a}}(s)}}function Jh(i,s){if(!(128&s[Nt])){s[Nt]&=-65,s[Nt]|=128,function Py(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof _s)){const f=a[c+1];if(Array.isArray(f))for(let v=0;v<f.length;v+=2){const E=d[f[v]],I=f[v+1];$r(4,E,I);try{I.call(E)}finally{$r(5,E,I)}}else{$r(4,d,f);try{f.call(d)}finally{$r(5,d,f)}}}}}(i,s),function Gp(i,s){const a=i.cleanup,c=s[pi];let d=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const v=a[f+3];v>=0?c[d=v]():c[d=-v].unsubscribe(),f+=2}else{const v=c[d=a[f+1]];a[f].call(v)}if(null!==c){for(let f=d+1;f<c.length;f++)(0,c[f])();s[pi]=null}}(i,s),1===s[Ye].type&&s[Lt].destroy();const a=s[po];if(null!==a&&yi(s[hn])){a!==s[hn]&&jo(a,s);const c=s[mi];null!==c&&c.detachView(i)}!function Cs(i){no.delete(i[ms])}(s)}}function gd(i,s,a){return function jc(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[ei];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:f}=i.data[c.directiveStart+d];if(f===zt.None||f===zt.Emulated)return null}return jn(c,a)}}(i,s.parent,a)}function Ra(i,s,a,c,d){i.insertBefore(s,a,c,d)}function ki(i,s,a){i.appendChild(s,a)}function md(i,s,a,c,d){null!==c?Ra(i,s,a,c,d):ki(i,s,a)}function $c(i,s){return i.parentNode(s)}let Ou,tf,qc,ro=function Na(i,s,a){return 40&i.type?jn(i,a):null};function Hc(i,s,a,c){const d=gd(i,c,s),f=s[Lt],E=function Nu(i,s,a){return ro(i,s,a)}(c.parent||s[Bn],c,s);if(null!=d)if(Array.isArray(a))for(let I=0;I<a.length;I++)md(f,d,a[I],E,!1);else md(f,d,a,E,!1);void 0!==Ou&&Ou(f,c,s,a,d)}function es(i,s){if(null!==s){const a=s.type;if(3&a)return jn(s,i);if(4&a)return Kr(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return es(i,c);{const d=i[s.index];return yi(d)?Kr(-1,d):Ln(d)}}if(32&a)return Aa(s,i)()||Ln(i[s.index]);{const c=zp(i,s);return null!==c?Array.isArray(c)?c[0]:es(Ii(i[pr]),c):es(i,s.next)}}return null}function zp(i,s){return null!==s?i[pr][Bn].projection[s.projection]:null}function Kr(i,s){const a=gr+i+1;if(a<s.length){const c=s[a],d=c[Ye].firstChild;if(null!==d)return es(c,d)}return s[go]}function vd(i,s,a,c,d,f,v){for(;null!=a;){const E=c[a.index],I=a.type;if(v&&0===s&&(E&&On(Ln(E),c),a.flags|=2),32!=(32&a.flags))if(8&I)vd(i,s,a.child,c,d,f,!1),Ts(s,i,d,E,f);else if(32&I){const T=Aa(a,c);let x;for(;x=T();)Ts(s,i,d,x,f);Ts(s,i,d,E,f)}else 16&I?_d(i,s,c,a,d,f):Ts(s,i,d,E,f);a=v?a.projectionNext:a.next}}function Oa(i,s,a,c,d,f){vd(a,c,i.firstChild,s,d,f,!1)}function _d(i,s,a,c,d,f){const v=a[pr],I=v[Bn].projection[c.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)Ts(s,i,d,I[T],f);else vd(i,s,I,v[hn],d,f,!0)}function Ss(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function Pa(i,s,a){const{mergedAttrs:c,classes:d,styles:f}=a;null!==c&&Tn(i,s,c),null!==d&&Ss(i,s,d),null!==f&&function Wp(i,s,a){i.setAttribute(s,"style",a)}(i,s,f)}function io(i){tf=i}function Kp(i){return function Ed(){if(void 0===qc&&(qc=null,Mt.trustedTypes))try{qc=Mt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return qc}()?.createScriptURL(i)||i}class Yp{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${st})`}}function _(i){return i instanceof Yp?i.changingThisBreaksApplicationSecurity:i}function S(i,s){const a=function R(i){return i instanceof Yp&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see ${st})`)}return a===s}const Jp=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var _r=(()=>((_r=_r||{})[_r.NONE=0]="NONE",_r[_r.HTML=1]="HTML",_r[_r.STYLE=2]="STYLE",_r[_r.SCRIPT=3]="SCRIPT",_r[_r.URL=4]="URL",_r[_r.RESOURCE_URL=5]="RESOURCE_URL",_r))();function VD(i){const s=sf();return s?s.sanitize(_r.URL,i)||"":S(i,"URL")?_(i):function Go(i){return(i=String(i)).match(Jp)?i:"unsafe:"+i}(De(i))}function rg(i){const s=sf();if(s)return Kp(s.sanitize(_r.RESOURCE_URL,i)||"");if(S(i,"ResourceURL"))return Kp(_(i));throw new le(904,!1)}function ns(i,s,a){return function By(i,s){return"src"===s&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===s&&("base"===i||"link"===i)?rg:VD}(s,a)(i)}function sf(){const i=he();return i&&i[dc]}const jy=new on("ENVIRONMENT_INITIALIZER"),$y=new on("INJECTOR",-1),af=new on("INJECTOR_DEF_TYPES");class q0{get(s,a=xn){if(a===xn){const c=new Error(`NullInjectorError: No provider for ${ae(s)}!`);throw c.name="NullInjectorError",c}return a}}function Dd(...i){return{\u0275providers:bd(0,i),\u0275fromNgModule:!0}}function bd(i,...s){const a=[],c=new Set;let d;return Ni(s,f=>{const v=f;Hy(v,a,[],c)&&(d||(d=[]),d.push(v))}),void 0!==d&&W0(d,a),a}function W0(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];el(d,f=>{s.push(f)})}}function Hy(i,s,a,c){if(!(i=Z(i)))return!1;let d=null,f=di(i);const v=!f&&Kt(i);if(f||v){if(v&&!v.standalone)return!1;d=i}else{const I=i.ngModule;if(f=di(I),!f)return!1;d=I}const E=c.has(d);if(v){if(E)return!1;if(c.add(d),v.dependencies){const I="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const T of I)Hy(T,s,a,c)}}else{if(!f)return!1;{if(null!=f.imports&&!E){let T;c.add(d);try{Ni(f.imports,x=>{Hy(x,s,a,c)&&(T||(T=[]),T.push(x))})}finally{}void 0!==T&&W0(T,s)}if(!E){const T=js(d)||(()=>new d);s.push({provide:d,useFactory:T,deps:yt},{provide:af,useValue:d,multi:!0},{provide:jy,useValue:()=>je(d),multi:!0})}const I=f.providers;null==I||E||el(I,x=>{s.push(x)})}}return d!==i&&void 0!==i.providers}function el(i,s){for(let a of i)Ee(a)&&(a=a.\u0275providers),Array.isArray(a)?el(a,s):s(a)}const HD=te({provide:String,useValue:te});function Gy(i){return null!==i&&"object"==typeof i&&HD in i}function tl(i){return"function"==typeof i}const Y0=new on("Set Injector scope."),og={},zy={};let Cd;function ka(){return void 0===Cd&&(Cd=new q0),Cd}class nl{}class Q0 extends nl{get destroyed(){return this._destroyed}constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wy(s,v=>this.processProvider(v)),this.records.set($y,Td(void 0,this)),d.has("environment")&&this.records.set(nl,Td(void 0,this));const f=this.records.get(Y0);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(af.multi,yt,gt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=dr(this),c=En(void 0);try{return s()}finally{dr(a),En(c)}}get(s,a=xn,c=gt.Default){this.assertNotDestroyed(),c=Dt(c);const d=dr(this),f=En(void 0);try{if(!(c&gt.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function X0(i){return"function"==typeof i||"object"==typeof i&&i instanceof on}(s)&&_n(s);E=I&&this.injectableDefInScope(I)?Td(qy(s),og):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(c&gt.Self?ka():this.parent).get(s,a=c&gt.Optional&&a===xn?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[fi]=v[fi]||[]).unshift(ae(s)),d)throw v;return function L(i,s,a,c){const d=i[fi];throw s[Gi]&&d.unshift(s[Gi]),i.message=function z(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==sn?i.slice(2):i;let d=ae(s);if(Array.isArray(s))d=s.map(ae).join(" -> ");else if("object"==typeof s){let f=[];for(let v in s)if(s.hasOwnProperty(v)){let E=s[v];f.push(v+":"+("string"==typeof E?JSON.stringify(E):ae(E)))}d=`{${f.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(Qo,"\n  ")}`}("\n"+i.message,d,a,c),i[lr]=d,i[fi]=null,i}(v,s,"R3InjectorError",this.source)}throw v}finally{En(f),dr(d)}}resolveInjectorInitializers(){const s=dr(this),a=En(void 0);try{const c=this.get(jy.multi,yt,gt.Self);for(const d of c)d()}finally{dr(s),En(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(ae(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new le(205,!1)}processProvider(s){let a=tl(s=Z(s))?s:Z(s&&s.provide);const c=function qD(i){return Gy(i)?Td(void 0,i.useValue):Td(J0(i),og)}(s);if(tl(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Td(void 0,og,!0),d.factory=()=>Ct(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===og&&(a.value=zy,a.value=a.factory()),"object"==typeof a.value&&a.value&&function ZD(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Z(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function qy(i){const s=_n(i),a=null!==s?s.factory:js(i);if(null!==a)return a;if(i instanceof on)throw new le(204,!1);if(i instanceof Function)return function zD(i){const s=i.length;if(s>0)throw function Oo(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new le(204,!1);const a=function Xr(i){const s=i&&(i[Cr]||i[cn]);return s?(function fs(i){if(i.hasOwnProperty("name"))return i.name;(""+i).match(/^function\s*([^\s(]+)/)}(i),s):null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new le(204,!1)}function J0(i,s,a){let c;if(tl(i)){const d=Z(i);return js(d)||qy(d)}if(Gy(i))c=()=>Z(i.useValue);else if(function K0(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Ct(i.deps||[]));else if(function Z0(i){return!(!i||!i.useExisting)}(i))c=()=>je(Z(i.useExisting));else{const d=Z(i&&(i.useClass||i.provide));if(!function WD(i){return!!i.deps}(i))return js(d)||qy(d);c=()=>new d(...Ct(i.deps))}return c}function Td(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Wy(i,s){for(const a of i)Array.isArray(a)?Wy(a,s):a&&Ee(a)?Wy(a.\u0275providers,s):s(a)}class Zy{}class Ky{}class KD{resolveComponentFactory(s){throw function Yy(i){const s=Error(`No component factory found for ${ae(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let cf=(()=>{class i{}return i.NULL=new KD,i})();function YD(){return Fa(ir(),he())}function Fa(i,s){return new Sd(jn(i,s))}let Sd=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=YD,i})();function ew(i){return i instanceof Sd?i.nativeElement:i}class lf{}let ag=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function tw(){const i=he(),a=Xn(ir().index,i);return(Br(a)?a:i)[Lt]}(),i})(),df=(()=>{class i{}return i.\u0275prov=et({token:i,providedIn:"root",factory:()=>null}),i})();class Qy{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const nw=new Qy("15.2.1"),Jy={},Xy="ngOriginalError";function ev(i){return i[Xy]}class Ad{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&ev(s);for(;a&&ev(a);)a=ev(a);return a||null}}function La(i){return i instanceof Function?i():i}function sw(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const f=s.length;if(d+f===c||i.charCodeAt(d+f)<=32)return d}a=d+1}}const ow="ng-template";function ob(i,s,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==sw(d.toLowerCase(),s,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function aw(i){return 4===i.type&&i.value!==ow}function ab(i,s,a){return s===(4!==i.type||a?i.value:ow)}function uw(i,s,a){let c=4;const d=i.attrs||[],f=function rv(i){for(let s=0;s<i.length;s++)if(ga(i[s]))return s;return i.length}(d);let v=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!v)if(4&c){if(c=2|1&c,""!==I&&!ab(i,I,a)||""===I&&1===s.length){if(rs(c))return!1;v=!0}}else{const T=8&c?I:s[++E];if(8&c&&null!==i.attrs){if(!ob(i.attrs,T,a)){if(rs(c))return!1;v=!0}continue}const k=ub(8&c?"class":I,d,aw(i),a);if(-1===k){if(rs(c))return!1;v=!0;continue}if(""!==T){let G;G=k>f?"":d[k+1].toLowerCase();const Y=8&c?G:null;if(Y&&-1!==sw(Y,T,0)||2&c&&T!==G){if(rs(c))return!1;v=!0}}}}else{if(!v&&!rs(c)&&!rs(I))return!1;if(v&&rs(I))continue;v=!1,c=I|1&c}}return rs(c)||v}function rs(i){return 0==(1&i)}function ub(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let f=!1;for(;d<s.length;){const v=s[d];if(v===i)return d;if(3===v||6===v)f=!0;else{if(1===v||2===v){let E=s[++d];for(;"string"==typeof E;)E=s[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=f?1:2}return-1}return function cb(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function nv(i,s,a=!1){for(let c=0;c<s.length;c++)if(uw(i,s[c],a))return!0;return!1}function hf(i,s){return i?":not("+s.trim()+")":s}function ug(i){let s=i[0],a=1,c=2,d="",f=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const E=i[++a];d+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!rs(v)&&(s+=hf(f,d),d=""),c=v,f=f||!rs(c);a++}return""!==d&&(s+=hf(f,d)),s}const Ut={};function hw(i){fw(Yt(),he(),xr()+i,!1)}function fw(i,s,a,c){if(!c)if(3==(3&s[Nt])){const f=i.preOrderCheckHooks;null!==f&&Ws(s,f,a)}else{const f=i.preOrderHooks;null!==f&&Mc(s,f,0,a)}Co(a)}function mw(i,s=null,a=null,c){const d=Li(i,s,a,c);return d.resolveInjectorInitializers(),d}function Li(i,s=null,a=null,c,d=new Set){const f=[a||yt,Dd(i)];return c=c||("object"==typeof i?void 0:ae(i)),new Q0(f,s||ka(),c||null,d)}let il=(()=>{class i{static create(a,c){if(Array.isArray(a))return mw({name:""},c,a,"");{const d=a.name??"";return mw({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=xn,i.NULL=new q0,i.\u0275prov=et({token:i,providedIn:"any",factory:()=>je($y)}),i.__NG_ELEMENT_ID__=-1,i})();function ff(i,s=gt.Default){const a=he();return null===a?je(i,s):Jl(ir(),a,Z(i),s)}function pv(){throw new Error("invalid")}function bw(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const f=a[c+1];if(-1!==f){const v=i.data[f];Tc(a[c]),v.contentQueries(2,s[f],f)}}}function hg(i,s,a,c,d,f,v,E,I,T,x){const k=s.blueprint.slice();return k[ei]=d,k[Nt]=76|c,(null!==x||i&&1024&i[Nt])&&(k[Nt]|=1024),aa(k),k[hn]=k[gi]=i,k[Cn]=a,k[Ls]=v||i&&i[Ls],k[Lt]=E||i&&i[Lt],k[dc]=I||i&&i[dc]||null,k[fo]=T||i&&i[fo]||null,k[Bn]=f,k[ms]=function Lo(){return Sy++}(),k[qi]=x,k[pr]=2==s.type?i[pr]:k,k}function xd(i,s,a,c,d){let f=i.data[s];if(null===f)f=function mv(i,s,a,c,d){const f=ca(),v=cu(),I=i.data[s]=function wb(i,s,a,c,d,f){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?f:f&&f.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=I),null!==f&&(v?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I,I.prev=f)),I}(i,s,a,c,d),function zl(){return Tt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=c,f.attrs=d;const v=function uu(){const i=Tt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===v?-1:v.injectorIndex}return Hr(f,!0),f}function pf(i,s,a,c){if(0===a)return-1;const d=s.length;for(let f=0;f<a;f++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function fg(i,s,a){hu(s);try{const c=i.viewQuery;null!==c&&Eg(1,c,a);const d=i.template;null!==d&&vb(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&bw(i,s),i.staticViewQueries&&Eg(2,i.viewQuery,a);const f=i.components;null!==f&&function yb(i,s){for(let a=0;a<s.length;a++)_g(i,s[a])}(s,f)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[Nt]&=-5,xp()}}function pg(i,s,a,c){const d=s[Nt];if(128!=(128&d)){hu(s);try{aa(s),function ys(i){return Tt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&vb(i,s,a,2,c);const v=3==(3&d);if(v){const T=i.preOrderCheckHooks;null!==T&&Ws(s,T,null)}else{const T=i.preOrderHooks;null!==T&&Mc(s,T,0,null),vs(s,0)}if(function jw(i){for(let s=Ma(i);null!==s;s=Kh(s)){if(!s[Vl])continue;const a=s[Ar];for(let c=0;c<a.length;c++){const d=a[c];512&d[Nt]||ua(d[hn],1),d[Nt]|=512}}}(s),function Bw(i){for(let s=Ma(i);null!==s;s=Kh(s))for(let a=gr;a<s.length;a++){const c=s[a],d=c[Ye];bo(c)&&pg(d,c,d.template,c[Cn])}}(s),null!==i.contentQueries&&bw(i,s),v){const T=i.contentCheckHooks;null!==T&&Ws(s,T)}else{const T=i.contentHooks;null!==T&&Mc(s,T,1),vs(s,1)}!function mb(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)Co(~d);else{const f=d,v=a[++c],E=a[++c];ql(v,f),E(2,s[f])}}}finally{Co(-1)}}(i,s);const E=i.components;null!==E&&function gv(i,s){for(let a=0;a<s.length;a++)$w(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&Eg(2,I,c),v){const T=i.viewCheckHooks;null!==T&&Ws(s,T)}else{const T=i.viewHooks;null!==T&&Mc(s,T,2),vs(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[Nt]&=-41,512&s[Nt]&&(s[Nt]&=-513,ua(s[hn],-1))}finally{xp()}}}function vb(i,s,a,c,d){const f=xr(),v=2&c;try{Co(-1),v&&s.length>un&&fw(i,s,un,!1),$r(v?2:0,d),a(c,d)}finally{Co(f),$r(v?3:1,d)}}function yv(i,s,a){if(na(s)){const d=s.directiveEnd;for(let f=s.directiveStart;f<d;f++){const v=i.data[f];v.contentQueries&&v.contentQueries(1,a[f],f)}}}function gg(i,s,a){au()&&(function Nw(i,s,a,c){const d=a.directiveStart,f=a.directiveEnd;vi(a)&&function Ib(i,s,a){const c=jn(s,i),d=ao(a),f=i[Ls],v=mf(i,hg(i,d,null,a.onPush?32:16,c,s,f,f.createRenderer(c,a),null,null,null));i[s.index]=v}(s,a,i.data[d+a.componentOffset]),i.firstCreatePass||Ro(a,s),On(c,s);const v=a.initialInputs;for(let E=d;E<f;E++){const I=i.data[E],T=Ri(s,i,E,a);On(T,s),null!==v&&Ev(0,E-d,T,I,0,v),jr(I)&&(Xn(a.index,s)[Cn]=Ri(s,i,E,a))}}(i,s,a,jn(a,s)),64==(64&a.flags)&&wv(i,s,a))}function Va(i,s,a=jn){const c=s.localNames;if(null!==c){let d=s.index+1;for(let f=0;f<c.length;f+=2){const v=c[f+1],E=-1===v?a(s,i):i[v];i[d++]=E}}}function ao(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=vv(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function vv(i,s,a,c,d,f,v,E,I,T){const x=un+c,k=x+d,G=function Cw(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:Ut);return a}(x,k),Y="function"==typeof T?T():T;return G[Ye]={type:i,blueprint:G,template:a,queries:null,viewQuery:E,declTNode:s,data:G.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:Y,incompleteFirstPass:!1}}function Tw(i,s,a,c){const d=Db(s);null===a?d.push(c):(d.push(a),i.firstCreatePass&&yf(i).push(c,d.length-1))}function sl(i,s,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const f=i[d];null===c?Sw(a,s,d,f):c.hasOwnProperty(d)&&Sw(a,s,c[d],f)}return a}function Sw(i,s,a,c){i.hasOwnProperty(a)?i[a].push(s,c):i[a]=[s,c]}function Ua(i,s){const a=Xn(s,i);16&a[Nt]||(a[Nt]|=32)}function mg(i,s,a,c){if(au()){const d=null===c?null:{"":-1},f=function Pw(i,s){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let f=0;f<a.length;f++){const v=a[f];if(nv(s,v.selectors,!1))if(c||(c=[]),jr(v))if(null!==v.findHostDirectiveDefs){const E=[];d=d||new Map,v.findHostDirectiveDefs(v,E,d),c.unshift(...E,v),Rd(i,s,E.length)}else c.unshift(v),Rd(i,s,0);else d=d||new Map,v.findHostDirectiveDefs?.(v,c,d),c.push(v)}return null===c?null:[c,d]}(i,a);let v,E;null===f?v=E=null:[v,E]=f,null!==v&&_v(i,s,a,v,d,E),d&&function kw(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const f=a[s[d+1]];if(null==f)throw new le(-301,!1);c.push(s[d],f)}}}(a,c,d)}a.mergedAttrs=Qi(a.mergedAttrs,a.attrs)}function _v(i,s,a,c,d,f){for(let T=0;T<c.length;T++)Ea(Ro(a,s),i,c[T].type);!function Lw(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}(a,i.data.length,c.length);for(let T=0;T<c.length;T++){const x=c[T];x.providersResolver&&x.providersResolver(x)}let v=!1,E=!1,I=pf(i,s,c.length,null);for(let T=0;T<c.length;T++){const x=c[T];a.mergedAttrs=Qi(a.mergedAttrs,x.hostAttrs),Vw(i,a,s,I,x),Fw(I,x,d),null!==x.contentQueries&&(a.flags|=4),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(a.flags|=64);const k=x.type.prototype;!v&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),v=!0),!E&&(k.ngOnChanges||k.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),I++}!function ku(i,s,a){const d=s.directiveEnd,f=i.data,v=s.attrs,E=[];let I=null,T=null;for(let x=s.directiveStart;x<d;x++){const k=f[x],G=a?a.get(k):null,pe=G?G.outputs:null;I=sl(k.inputs,x,I,G?G.inputs:null),T=sl(k.outputs,x,T,pe);const Le=null===I||null===v||aw(s)?null:Uw(I,x,v);E.push(Le)}null!==I&&(I.hasOwnProperty("class")&&(s.flags|=8),I.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=E,s.inputs=I,s.outputs=T}(i,a,f)}function wv(i,s,a){const c=a.directiveStart,d=a.directiveEnd,f=a.index,v=function bc(){return Tt.lFrame.currentDirectiveIndex}();try{Co(f);for(let E=c;E<d;E++){const I=i.data[E],T=s[E];Cc(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&Ow(I,T)}}finally{Co(-1),Cc(v)}}function Ow(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Rd(i,s,a){s.componentOffset=a,(i.components||(i.components=[])).push(s.index)}function Fw(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;jr(s)&&(a[""]=i)}}function Vw(i,s,a,c,d){i.data[c]=d;const f=d.factory||(d.factory=js(d.type)),v=new _s(f,jr(d),ff);i.blueprint[c]=v,a[c]=v,function xw(i,s,a,c,d){const f=d.hostBindings;if(f){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const E=~s.index;(function Rw(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(v)!=E&&v.push(E),v.push(a,c,f)}}(i,s,c,pf(i,a,d.hostVars,Ut),d)}function uo(i,s,a,c,d,f){const v=jn(i,s);!function yg(i,s,a,c,d,f,v){if(null==f)i.removeAttribute(s,d,a);else{const E=null==v?De(f):v(f,c||"",d);i.setAttribute(s,d,E,a)}}(s[Lt],v,f,i.value,a,c,d)}function Ev(i,s,a,c,d,f){const v=f[s];if(null!==v){const E=c.setInput;for(let I=0;I<v.length;){const T=v[I++],x=v[I++],k=v[I++];null!==E?c.setInput(a,k,T,x):a[x]=k}}}function Uw(i,s,a){let c=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(i.hasOwnProperty(f)){null===c&&(c=[]);const v=i[f];for(let E=0;E<v.length;E+=2)if(v[E]===s){c.push(f,v[E+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function vg(i,s,a,c){return[i,!0,!1,s,null,0,c,a,null,null]}function $w(i,s){const a=Xn(s,i);if(bo(a)){const c=a[Ye];48&a[Nt]?pg(c,a,c.template,a[Cn]):a[zi]>0&&gf(a)}}function gf(i){for(let c=Ma(i);null!==c;c=Kh(c))for(let d=gr;d<c.length;d++){const f=c[d];if(bo(f))if(512&f[Nt]){const v=f[Ye];pg(v,f,v.template,f[Cn])}else f[zi]>0&&gf(f)}const a=i[Ye].components;if(null!==a)for(let c=0;c<a.length;c++){const d=Xn(a[c],i);bo(d)&&d[zi]>0&&gf(d)}}function _g(i,s){const a=Xn(s,i),c=a[Ye];(function Hw(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),fg(c,a,a[Cn])}function mf(i,s){return i[gs]?i[hc][Sr]=s:i[gs]=s,i[hc]=s,s}function wg(i){for(;i;){i[Nt]|=32;const s=Ii(i);if(ra(i)&&!s)return i;i=s}return null}function kr(i,s,a,c=!0){const d=s[Ls];d.begin&&d.begin();try{pg(i,s,i.template,a)}catch(v){throw c&&Ig(s,v),v}finally{d.end&&d.end()}}function Eg(i,s,a){Tc(0),s(i,a)}function Db(i){return i[pi]||(i[pi]=[])}function yf(i){return i.cleanup||(i.cleanup=[])}function Ig(i,s){const a=i[fo],c=a?a.get(Ad,null):null;c&&c.handleError(s)}function Nd(i,s,a,c,d){for(let f=0;f<a.length;){const v=a[f++],E=a[f++],I=s[v],T=i.data[v];null!==T.setInput?T.setInput(I,d,c,E):I[E]=d}}function Od(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,f=0;if(null!==s)for(let v=0;v<s.length;v++){const E=s[v];"number"==typeof E?f=E:1==f?d=se(d,E):2==f&&(c=se(c,E+": "+s[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function Dg(i,s,a,c,d=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&c.push(Ln(f)),yi(f))for(let E=gr;E<f.length;E++){const I=f[E],T=I[Ye].firstChild;null!==T&&Dg(I[Ye],I,T,c)}const v=a.type;if(8&v)Dg(i,s,a.child,c);else if(32&v){const E=Aa(a,s);let I;for(;I=E();)c.push(I)}else if(16&v){const E=zp(s,a);if(Array.isArray(E))c.push(...E);else{const I=Ii(s[pr]);Dg(I[Ye],I,E,c,!0)}}a=d?a.projectionNext:a.next}return c}class bg{get rootNodes(){const s=this._lView,a=s[Ye];return Dg(a,s,a.firstChild,[])}constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Cn]}set context(s){this._lView[Cn]=s}get destroyed(){return 128==(128&this._lView[Nt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[hn];if(yi(s)){const a=s[Us],c=a?a.indexOf(this):-1;c>-1&&(Qh(s,c),No(a,c))}this._attachedToViewContainer=!1}Hp(this._lView[Ye],this._lView)}onDestroy(s){Tw(this._lView[Ye],this._lView,null,s)}markForCheck(){wg(this._cdRefInjectingView||this._lView)}detach(){this._lView[Nt]&=-65}reattach(){this._lView[Nt]|=64}detectChanges(){kr(this._lView[Ye],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function pd(i,s){Oa(i,s,s[Lt],2,null,null)}(this._lView[Ye],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new le(902,!1);this._appRef=s}}class IA extends bg{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;kr(s[Ye],s,s[Cn],!1)}checkNoChanges(){}get context(){return null}}class bb extends cf{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Kt(s);return new Cg(a,this.ngModule)}}function Cb(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class bA{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){c=Dt(c);const d=this.injector.get(s,Jy,c);return d!==Jy||a===Jy?d:this.parentInjector.get(s,a,c)}}class Cg extends Ky{get inputs(){return Cb(this.componentDef.inputs)}get outputs(){return Cb(this.componentDef.outputs)}constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function lw(i){return i.map(ug).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}create(s,a,c,d){let f=(d=d||this.ngModule)instanceof nl?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const v=f?new bA(s,f):s,E=v.get(lf,null);if(null===E)throw new le(407,!1);const I=v.get(df,null),T=E.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",k=c?function _b(i,s,a){return i.selectRootElement(s,a===zt.ShadowDom)}(T,c,this.componentDef.encapsulation):xa(T,x,function DA(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(x)),G=this.componentDef.onPush?288:272,Y=vv(0,null,null,1,0,null,null,null,null,null),pe=hg(null,Y,null,G,null,null,E,T,I,v,null);let Le,Ze;hu(pe);try{const at=this.componentDef;let bt,Me=null;at.findHostDirectiveDefs?(bt=[],Me=new Map,at.findHostDirectiveDefs(at,bt,Me),bt.push(at)):bt=[at];const At=function Ab(i,s){const a=i[Ye],c=un;return i[c]=s,xd(a,c,2,"#host",null)}(pe,k),kn=function Mb(i,s,a,c,d,f,v,E){const I=d[Ye];!function xb(i,s,a,c){for(const d of i)s.mergedAttrs=Qi(s.mergedAttrs,d.hostAttrs);null!==s.mergedAttrs&&(Od(s,s.mergedAttrs,!0),null!==a&&Pa(c,a,s))}(c,i,s,v);const T=f.createRenderer(s,a),x=hg(d,ao(a),null,a.onPush?32:16,d[i.index],i,f,T,E||null,null,null);return I.firstCreatePass&&Rd(I,i,c.length-1),mf(d,x),d[i.index]=x}(At,k,at,bt,pe,E,T);Ze=Do(Y,un),k&&function _f(i,s,a,c){if(c)Tn(i,a,["ng-version",nw.full]);else{const{attrs:d,classes:f}=function dw(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let f=i[c];if("string"==typeof f)2===d?""!==f&&s.push(f,i[++c]):8===d&&a.push(f);else{if(!rs(d))break;d=f}c++}return{attrs:s,classes:a}}(s.selectors[0]);d&&Tn(i,a,d),f&&f.length>0&&Ss(i,a,f.join(" "))}}(T,at,k,c),void 0!==a&&function Tg(i,s,a){const c=i.projection=[];for(let d=0;d<s.length;d++){const f=a[d];c.push(null!=f?Array.from(f):null)}}(Ze,this.ngContentSelectors,a),Le=function Iv(i,s,a,c,d,f){const v=ir(),E=d[Ye],I=jn(v,d);_v(E,d,v,a,null,c);for(let x=0;x<a.length;x++)On(Ri(d,E,v.directiveStart+x,v),d);wv(E,d,v),I&&On(I,d);const T=Ri(d,E,v.directiveStart+v.componentOffset,v);if(i[Cn]=d[Cn]=T,null!==f)for(const x of f)x(T,s);return yv(E,v,i),T}(kn,at,bt,Me,pe,[Pd]),fg(Y,pe,null)}finally{xp()}return new Tb(this.componentType,Le,Fa(Ze,pe),pe,Ze)}}class Tb extends Zy{constructor(s,a,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new IA(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){const f=this._rootLView;Nd(f[Ye],f,d,s,a),Ua(f,this._tNode.index)}}get injector(){return new _i(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function Pd(){const i=ir();da(he()[Ye],i)}function wf(i){let s=function kd(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const c=[i];for(;s;){let d;if(jr(i))d=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new le(903,!1);d=s.\u0275dir}if(d){if(a){c.push(d);const v=i;v.inputs=Ef(i.inputs),v.declaredInputs=Ef(i.declaredInputs),v.outputs=Ef(i.outputs);const E=d.hostBindings;E&&Gw(i,E);const I=d.viewQuery,T=d.contentQueries;if(I&&Nb(i,I),T&&Sg(i,T),de(i.inputs,d.inputs),de(i.declaredInputs,d.declaredInputs),de(i.outputs,d.outputs),jr(d)&&d.data.animation){const x=i.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let v=0;v<f.length;v++){const E=f[v];E&&E.ngInherit&&E(i),E===wf&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Rb(i){let s=0,a=null;for(let c=i.length-1;c>=0;c--){const d=i[c];d.hostVars=s+=d.hostVars,d.hostAttrs=Qi(d.hostAttrs,a=Qi(a,d.hostAttrs))}}(c)}function Ef(i){return i===Dn?{}:i===yt?[]:i}function Nb(i,s){const a=i.viewQuery;i.viewQuery=a?(c,d)=>{s(c,d),a(c,d)}:s}function Sg(i,s){const a=i.contentQueries;i.contentQueries=a?(c,d,f)=>{s(c,d,f),a(c,d,f)}:s}function Gw(i,s){const a=i.hostBindings;i.hostBindings=a?(c,d)=>{s(c,d),a(c,d)}:s}function Fu(i){return!!Cv(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function Cv(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function oi(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Sv(i,s,a,c){const d=he();return oi(d,qs(),s)&&(Yt(),uo(fn(),d,i,s,a,c)),Sv}function Lb(i,s,a,c,d,f,v,E){const I=he(),T=Yt(),x=i+un,k=T.firstCreatePass?function Zw(i,s,a,c,d,f,v,E,I){const T=s.consts,x=xd(s,i,4,v||null,Zi(T,E));mg(s,a,x,Zi(T,I)),da(s,x);const k=x.tViews=vv(2,x,c,d,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,x),k.queries=s.queries.embeddedTView(x)),x}(x,T,I,s,a,c,d,f,v):T.data[x];Hr(k,!1);const G=I[Lt].createComment("");Hc(T,I,G,k),On(G,I),mf(I,I[x]=vg(G,I,G,k)),fc(k)&&gg(T,I,k),null!=v&&Va(I,k,E)}function Kw(i,s,a){const c=he();return oi(c,qs(),s)&&function gn(i,s,a,c,d,f,v,E){const I=jn(s,a);let x,T=s.inputs;!E&&null!=T&&(x=T[c])?(Nd(i,a,x,c,d),vi(s)&&Ua(a,s.index)):3&s.type&&(c=function Aw(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=v?v(d,s.value||"",c):d,f.setProperty(I,c,d))}(Yt(),fn(),c,i,s,c[Lt],a,!1),Kw}function xv(i,s,a,c,d){const v=d?"class":"style";Nd(i,a,s.inputs[v],v,c)}function Ng(i,s,a,c){const d=he(),f=Yt(),v=un+i,E=d[Lt],I=f.firstCreatePass?function Yw(i,s,a,c,d,f){const v=s.consts,I=xd(s,i,2,c,Zi(v,d));return mg(s,a,I,Zi(v,f)),null!==I.attrs&&Od(I,I.attrs,!1),null!==I.mergedAttrs&&Od(I,I.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,I),I}(v,f,d,s,a,c):f.data[v],T=d[v]=xa(E,s,function Rp(){return Tt.lFrame.currentNamespace}()),x=fc(I);return Hr(I,!0),Pa(E,T,I),32!=(32&I.flags)&&Hc(f,d,T,I),0===function ou(){return Tt.lFrame.elementDepthCount}()&&On(T,d),function _c(){Tt.lFrame.elementDepthCount++}(),x&&(gg(f,d,I),yv(f,I,d)),null!==c&&Va(d,I),Ng}function Af(){let i=ir();cu()?function lu(){Tt.lFrame.isParent=!1}():(i=i.parent,Hr(i,!1));const s=i;!function wc(){Tt.lFrame.elementDepthCount--}();const a=Yt();return a.firstCreatePass&&(da(a,i),na(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Ql(i){return 0!=(8&i.flags)}(s)&&xv(a,s,he(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Ph(i){return 0!=(16&i.flags)}(s)&&xv(a,s,he(),s.stylesWithoutHost,!1),Af}function Mf(i,s,a,c){return Ng(i,s,a,c),Af(),Mf}function Vb(){return he()}function kg(i){return!!i&&"function"==typeof i.then}function Jw(i){return!!i&&"function"==typeof i.subscribe}const Nv=Jw;function Ov(i,s,a,c){const d=he(),f=Yt(),v=ir();return function Xw(i,s,a,c,d,f,v){const E=fc(c),T=i.firstCreatePass&&yf(i),x=s[Cn],k=Db(s);let G=!0;if(3&c.type||v){const Le=jn(c,s),Ze=v?v(Le):Le,at=k.length,bt=v?At=>v(Ln(At[c.index])):c.index;let Me=null;if(!v&&E&&(Me=function kv(i,s,a,c){const d=i.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const v=d[f];if(v===a&&d[f+1]===c){const E=s[pi],I=d[f+2];return E.length>I?E[I]:null}"string"==typeof v&&(f+=2)}return null}(i,s,d,c.index)),null!==Me)(Me.__ngLastListenerFn__||Me).__ngNextListenerFn__=f,Me.__ngLastListenerFn__=f,G=!1;else{f=eE(c,s,x,f,!1);const At=a.listen(Ze,d,f);k.push(f,At),T&&T.push(d,bt,at,at+1)}}else f=eE(c,s,x,f,!1);const Y=c.outputs;let pe;if(G&&null!==Y&&(pe=Y[d])){const Le=pe.length;if(Le)for(let Ze=0;Ze<Le;Ze+=2){const kn=s[pe[Ze]][pe[Ze+1]].subscribe(f),rr=k.length;k.push(f,kn),T&&T.push(d,c.index,rr,-(rr+1))}}}(f,d,d[Lt],v,i,s,c),Ov}function Fv(i,s,a,c){try{return $r(6,s,a),!1!==a(c)}catch(d){return Ig(i,d),!1}finally{$r(7,s,a)}}function eE(i,s,a,c,d){return function f(v){if(v===Function)return c;wg(i.componentOffset>-1?Xn(i.index,s):s);let I=Fv(s,a,c,v),T=f.__ngNextListenerFn__;for(;T;)I=Fv(s,a,T,v)&&I,T=T.__ngNextListenerFn__;return d&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function $d(i=1){return function Iy(i){return(Tt.lFrame.contextLView=function Kl(i,s){for(;i>0;)s=s[gi],i--;return s}(i,Tt.lFrame.contextLView))[Cn]}(i)}function Rf(i,s){return i<<17|s<<2}function ju(i){return i>>17&32767}function Bv(i){return 2|i}function $u(i){return(131068&i)>>2}function Ug(i,s){return-131069&i|s<<2}function jv(i){return 1|i}function aE(i,s,a,c,d){const f=i[a+1],v=null===s;let E=c?ju(f):$u(f),I=!1;for(;0!==E&&(!1===I||v);){const x=i[E+1];Hd(i[E],s)&&(I=!0,i[E+1]=c?jv(x):Bv(x)),E=c?ju(x):$u(x)}I&&(i[a+1]=c?Bv(f):jv(f))}function Hd(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Oi(i,s)>=0}function Bg(i,s){return function co(i,s,a,c){const d=he(),f=Yt(),v=function Mi(i){const s=Tt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function Fr(i,s,a,c){const d=i.data;if(null===d[a+1]){const f=d[xr()],v=function hE(i,s){return s>=i.expandoStartIndex}(i,a);(function dt(i,s){return 0!=(i.flags&(s?8:16))})(f,c)&&null===s&&!v&&(s=!1),s=function zv(i,s,a,c){const d=function Ki(i){const s=Tt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=c?s.residualClasses:s.residualStyles;if(null===d)0===(c?s.classBindings:s.styleBindings)&&(a=Nf(a=fE(null,i,s,a,c),s.attrs,c),f=null);else{const v=s.directiveStylingLast;if(-1===v||i[v]!==d)if(a=fE(d,i,s,a,c),null===f){let I=function Wb(i,s,a){const c=a?s.classBindings:s.styleBindings;if(0!==$u(c))return i[ju(c)]}(i,s,c);void 0!==I&&Array.isArray(I)&&(I=fE(null,i,s,I[1],c),I=Nf(I,s.attrs,c),function Zb(i,s,a,c){i[ju(a?s.classBindings:s.styleBindings)]=c}(i,s,c,I))}else f=function lo(i,s,a){let c;const d=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<d;f++)c=Nf(c,i[f].hostAttrs,a);return Nf(c,s.attrs,a)}(i,s,c)}return void 0!==f&&(c?s.residualClasses=f:s.residualStyles=f),a}(d,f,s,c),function oE(i,s,a,c,d,f){let v=f?s.classBindings:s.styleBindings,E=ju(v),I=$u(v);i[c]=a;let x,T=!1;if(Array.isArray(a)?(x=a[1],(null===x||Oi(a,x)>0)&&(T=!0)):x=a,d)if(0!==I){const G=ju(i[E+1]);i[c+1]=Rf(G,E),0!==G&&(i[G+1]=Ug(i[G+1],c)),i[E+1]=function Uv(i,s){return 131071&i|s<<17}(i[E+1],c)}else i[c+1]=Rf(E,0),0!==E&&(i[E+1]=Ug(i[E+1],c)),E=c;else i[c+1]=Rf(I,0),0===E?E=c:i[I+1]=Ug(i[I+1],c),I=c;T&&(i[c+1]=Bv(i[c+1])),aE(i,x,c,!0),aE(i,x,c,!1),function $b(i,s,a,c,d){const f=d?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Oi(f,s)>=0&&(a[c+1]=jv(a[c+1]))}(s,x,i,c,f),v=Rf(E,I),f?s.classBindings=v:s.styleBindings=v}(d,f,s,a,v,c)}}(f,i,v,c),s!==Ut&&oi(d,v,s)&&function $a(i,s,a,c,d,f,v,E){if(!(3&s.type))return;const I=i.data,T=I[E+1],x=function ul(i){return 1==(1&i)}(T)?tn(I,s,a,d,$u(T),v):void 0;$g(x)||($g(f)||function MA(i){return 2==(2&i)}(T)&&(f=tn(I,null,a,d,E,v)),function qp(i,s,a,c,d){if(s)d?i.addClass(a,c):i.removeClass(a,c);else{let f=-1===c.indexOf("-")?void 0:Pi.DashCase;null==d?i.removeStyle(a,c,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=Pi.Important),i.setStyle(a,c,d,f))}}(c,v,Gs(xr(),a),d,f))}(f,f.data[xr()],d,d[Lt],i,d[v+1]=function Ha(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ae(_(i)))),i}(s,a),c,v)}(i,s,null,!0),Bg}function fE(i,s,a,c,d){let f=null;const v=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<v&&(f=s[E],c=Nf(c,f.hostAttrs,d),f!==i);)E++;return null!==i&&(a.directiveStylingLast=E),c}function Nf(i,s,a){const c=a?1:2;let d=-1;if(null!==s)for(let f=0;f<s.length;f++){const v=s[f];"number"==typeof v?d=v:d===c&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Rr(i,v,!!a||s[++f]))}return void 0===i?null:i}function tn(i,s,a,c,d,f){const v=null===s;let E;for(;d>0;){const I=i[d],T=Array.isArray(I),x=T?I[1]:I,k=null===x;let G=a[d+1];G===Ut&&(G=k?yt:void 0);let Y=k?Su(G,c):x===c?G:void 0;if(T&&!$g(Y)&&(Y=Su(I,c)),$g(Y)&&(E=Y,v))return E;const pe=i[d+1];d=v?ju(pe):$u(pe)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(E=Su(I,c))}return E}function $g(i){return void 0!==i}function Hg(i,s=""){const a=he(),c=Yt(),d=i+un,f=c.firstCreatePass?xd(c,d,1,s,null):c.data[d],v=a[d]=function hd(i,s){return i.createText(s)}(a[Lt],s);Hc(c,a,v,f),Hr(f,!1)}function Rt(i){return ll("",i,""),Rt}function ll(i,s,a){const c=he(),d=function Vd(i,s,a,c){return oi(i,qs(),a)?s+De(a)+c:Ut}(c,i,s,a);return d!==Ut&&function Ba(i,s,a){const c=Gs(s,i);!function Bc(i,s,a){i.setValue(s,a)}(i[Lt],c,a)}(c,xr(),d),ll}const Ga=void 0;var Xb=["en",[["a","p"],["AM","PM"],Ga],[["AM","PM"],Ga,Ga],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ga,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ga,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ga,"{1} 'at' {0}",Ga],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function bE(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Wo={};function dl(i){const s=function SE(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=kf(s);if(a)return a;const c=s.split("-")[0];if(a=kf(c),a)return a;if("en"===c)return Xb;throw new le(701,!1)}function CE(i){return dl(i)[It.PluralCase]}function kf(i){return i in Wo||(Wo[i]=Mt.ng&&Mt.ng.common&&Mt.ng.common.locales&&Mt.ng.common.locales[i]),Wo[i]}var It=(()=>((It=It||{})[It.LocaleId=0]="LocaleId",It[It.DayPeriodsFormat=1]="DayPeriodsFormat",It[It.DayPeriodsStandalone=2]="DayPeriodsStandalone",It[It.DaysFormat=3]="DaysFormat",It[It.DaysStandalone=4]="DaysStandalone",It[It.MonthsFormat=5]="MonthsFormat",It[It.MonthsStandalone=6]="MonthsStandalone",It[It.Eras=7]="Eras",It[It.FirstDayOfWeek=8]="FirstDayOfWeek",It[It.WeekendRange=9]="WeekendRange",It[It.DateFormat=10]="DateFormat",It[It.TimeFormat=11]="TimeFormat",It[It.DateTimeFormat=12]="DateTimeFormat",It[It.NumberSymbols=13]="NumberSymbols",It[It.NumberFormats=14]="NumberFormats",It[It.CurrencyCode=15]="CurrencyCode",It[It.CurrencySymbol=16]="CurrencySymbol",It[It.CurrencyName=17]="CurrencyName",It[It.Currencies=18]="Currencies",It[It.Directionality=19]="Directionality",It[It.PluralCase=20]="PluralCase",It[It.ExtraData=21]="ExtraData",It))();const zu="en-US";let ME=zu;function Sn(i,s,a,c,d){if(i=Z(i),Array.isArray(i))for(let f=0;f<i.length;f++)Sn(i[f],s,a,c,d);else{const f=Yt(),v=he();let E=tl(i)?i:Z(i.provide),I=J0(i);const T=ir(),x=1048575&T.providerIndexes,k=T.directiveStart,G=T.providerIndexes>>20;if(tl(i)||!i.multi){const Y=new _s(I,d,ff),pe=yl(E,s,d?x:x+G,k);-1===pe?(Ea(Ro(T,v),f,E),Yd(f,i,s.length),s.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(Y),v.push(Y)):(a[pe]=Y,v[pe]=Y)}else{const Y=yl(E,s,x+G,k),pe=yl(E,s,x,x+G),Ze=pe>=0&&a[pe];if(d&&!Ze||!d&&!(Y>=0&&a[Y])){Ea(Ro(T,v),f,E);const at=function dC(i,s,a,c,d){const f=new _s(i,a,ff);return f.multi=[],f.index=s,f.componentProviders=0,Qd(f,d,c&&!a),f}(d?JE:lC,a.length,d,c,I);!d&&Ze&&(a[pe].providerFactory=at),Yd(f,i,s.length,0),s.push(E),T.directiveStart++,T.directiveEnd++,d&&(T.providerIndexes+=1048576),a.push(at),v.push(at)}else Yd(f,i,Y>-1?Y:pe,Qd(a[d?pe:Y],I,!d&&c));!d&&c&&Ze&&a[pe].componentProviders++}}}function Yd(i,s,a,c){const d=tl(s),f=function GD(i){return!!i.useClass}(s);if(d||f){const I=(f?Z(s.useClass):s).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!d&&s.multi){const x=T.indexOf(a);-1===x?T.push(a,[c,I]):T[x+1].push(c,I)}else T.push(a,I)}}}function Qd(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function yl(i,s,a,c){for(let d=a;d<c;d++)if(s[d]===i)return d;return-1}function lC(i,s,a,c){return f_(this.multi,[])}function JE(i,s,a,c){const d=this.multi;let f;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=Ri(a,a[Ye],this.providerFactory.index,c);f=E.slice(0,v),f_(d,f);for(let I=v;I<E.length;I++)f.push(E[I])}else f=[],f_(d,f);return f}function f_(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function XE(i,s=[]){return a=>{a.providersResolver=(c,d)=>function QE(i,s,a){const c=Yt();if(c.firstCreatePass){const d=jr(i);Sn(a,c.data,c.blueprint,d,!0),Sn(s,c.data,c.blueprint,d,!1)}}(c,d?d(i):i,s)}}class Jd{}class Xd{}function Wu(i,s){return new p_(i,s??null)}class p_ extends Jd{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new bb(this);const c=fr(s);this._bootstrapComponents=La(c.bootstrap),this._r3Injector=Li(s,a,[{provide:Jd,useValue:this},{provide:cf,useValue:this.componentFactoryResolver}],ae(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class mm extends Xd{constructor(s){super(),this.moduleType=s}create(s){return new p_(this.moduleType,s)}}class eh extends Jd{constructor(s,a,c){super(),this.componentFactoryResolver=new bb(this),this.instance=null;const d=new Q0([...s,{provide:Jd,useValue:this},{provide:cf,useValue:this.componentFactoryResolver}],a||ka(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function g_(i,s,a=null){return new eh(i,s,a).injector}let fC=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=bd(0,a.type),d=c.length>0?g_([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=et({token:i,providedIn:"environment",factory:()=>new i(je(nl))}),i})();function m_(i){i.getStandaloneInjector=s=>s.get(fC).getOrCreateStandaloneInjector(i)}function Dm(i){return s=>{setTimeout(i,void 0,s)}}const Rs=class fI extends g.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,f=a||(()=>null),v=c;if(s&&"object"==typeof s){const I=s;d=I.next?.bind(I),f=I.error?.bind(I),v=I.complete?.bind(I)}this.__isAsync&&(f=Dm(f),d&&(d=Dm(d)),v&&(v=Dm(v)));const E=super.subscribe({next:d,error:f,complete:v});return s instanceof K.w0&&s.add(E),E}};function b_(){return this._results[Symbol.iterator]()}class bm{get changes(){return this._changes||(this._changes=new Rs)}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=bm.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=b_)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=function zr(i){return i.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function od(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],f=s[c];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Ku=(()=>{class i{}return i.__NG_ELEMENT_ID__=vl,i})();const pI=Ku,gI=class extends pI{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,d=hg(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);d[po]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[mi];return null!==v&&(d[mi]=v.createEmbeddedView(c)),fg(c,d,s),new bg(d)}};function vl(){return Zf(ir(),he())}function Zf(i,s){return 4&i.type?new gI(s,i,Fa(i,s)):null}let Kf=(()=>{class i{}return i.__NG_ELEMENT_ID__=mI,i})();function mI(){return C_(ir(),he())}const yI=Kf,Yf=class extends yI{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return Fa(this._hostTNode,this._hostLView)}get injector(){return new _i(this._hostTNode,this._hostLView)}get parentInjector(){const s=yu(this._hostTNode,this._hostLView);if(xc(s)){const a=gu(s,this._hostLView),c=ma(s);return new _i(a[Ye].data[c+8],a)}return new _i(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Ui(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-gr}createEmbeddedView(s,a,c){let d,f;"number"==typeof c?d=c:null!=c&&(d=c.index,f=c.injector);const v=s.createEmbeddedView(a||{},f);return this.insert(v,d),v}createComponent(s,a,c,d,f){const v=s&&!function bu(i){return"function"==typeof i}(s);let E;if(v)E=a;else{const k=a||{};E=k.index,c=k.injector,d=k.projectableNodes,f=k.environmentInjector||k.ngModuleRef}const I=v?s:new Cg(Kt(s)),T=c||this.parentInjector;if(!f&&null==I.ngModule){const G=(v?T:this.parentInjector).get(nl,null);G&&(f=G)}const x=I.create(T,d,void 0,f);return this.insert(x.hostView,E),x}insert(s,a){const c=s._lView,d=c[Ye];if(function iu(i){return yi(i[hn])}(c)){const x=this.indexOf(s);if(-1!==x)this.detach(x);else{const k=c[hn],G=new Yf(k,k[Bn],k[hn]);G.detach(G.indexOf(s))}}const f=this._adjustIndex(a),v=this._lContainer;!function Ny(i,s,a,c){const d=gr+c,f=a.length;c>0&&(a[d-1][Sr]=s),c<f-gr?(s[Sr]=a[d],Cu(a,gr+c,s)):(a.push(s),s[Sr]=null),s[hn]=a;const v=s[po];null!==v&&a!==v&&function Oy(i,s){const a=i[Ar];s[pr]!==s[hn][hn][pr]&&(i[Vl]=!0),null===a?i[Ar]=[s]:a.push(s)}(v,s);const E=s[mi];null!==E&&E.insertView(i),s[Nt]|=64}(d,c,v,f);const E=Kr(f,v),I=c[Lt],T=$c(I,v[go]);return null!==T&&function $p(i,s,a,c,d,f){c[ei]=d,c[Bn]=s,Oa(i,c,a,1,d,f)}(d,v[Bn],I,c,T,E),s.attachToViewContainerRef(),Cu(Cm(v),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Ui(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=Qh(this._lContainer,a);c&&(No(Cm(this._lContainer),a),Hp(c[Ye],c))}detach(s){const a=this._adjustIndex(s,-1),c=Qh(this._lContainer,a);return c&&null!=No(Cm(this._lContainer),a)?new bg(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function Ui(i){return i[Us]}function Cm(i){return i[Us]||(i[Us]=[])}function C_(i,s){let a;const c=s[i.index];if(yi(c))a=c;else{let d;if(8&i.type)d=Ln(c);else{const f=s[Lt];d=f.createComment("");const v=jn(i,s);Ra(f,$c(f,v),d,function Ly(i,s){return i.nextSibling(s)}(f,v),!1)}s[i.index]=a=vg(c,s,d,i),mf(s,a)}return new Yf(a,i,s)}class Yu{constructor(s){this.queryList=s,this.matches=null}clone(){return new Yu(this.queryList)}setDirty(){this.queryList.setDirty()}}class T_{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let f=0;f<c;f++){const v=a.getByIndex(f);d.push(this.queries[v.indexInDeclarationView].clone())}return new T_(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Mm(s,a).matches&&this.queries[a].setDirty()}}class vI{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class Qf{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,f=this.getByIndex(c).embeddedTView(s,d);f&&(f.indexInDeclarationView=c,null!==a?a.push(f):a=[f])}return null!==a?new Qf(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class S_{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new S_(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(s,a,wC(a,f)),this.matchTNodeWithReadOption(s,a,Qs(a,s,f,!1,!1))}else c===Ku?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Qs(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Sd||d===Kf||d===Ku&&4&a.type)this.addMatch(a.index,-2);else{const f=Qs(a,s,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function wC(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function EC(i,s,a,c){return-1===a?function _I(i,s){return 11&i.type?Fa(i,s):4&i.type?Zf(i,s):null}(s,i):-2===a?function Tm(i,s,a){return a===Sd?Fa(s,i):a===Ku?Zf(s,i):a===Kf?C_(s,i):void 0}(i,s,c):Ri(i,i[Ye],a,s)}function wI(i,s,a,c){const d=s[mi].queries[c];if(null===d.matches){const f=i.data,v=a.matches,E=[];for(let I=0;I<v.length;I+=2){const T=v[I];E.push(T<0?null:EC(s,f[T],v[I+1],a.metadata.read))}d.matches=E}return d.matches}function Sm(i,s,a,c){const d=i.queries.getByIndex(a),f=d.matches;if(null!==f){const v=wI(i,s,d,a);for(let E=0;E<f.length;E+=2){const I=f[E];if(I>0)c.push(v[E/2]);else{const T=f[E+1],x=s[-I];for(let k=gr;k<x.length;k++){const G=x[k];G[po]===G[hn]&&Sm(G[Ye],G,T,c)}if(null!==x[Ar]){const k=x[Ar];for(let G=0;G<k.length;G++){const Y=k[G];Sm(Y[Ye],Y,T,c)}}}}}return c}function wr(i){const s=he(),a=Yt(),c=Wl();Tc(c+1);const d=Mm(a,c);if(i.dirty&&function oa(i){return 4==(4&i[Nt])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const f=d.crossesNgTemplate?Sm(a,s,c,[]):wI(a,s,d,c);i.reset(f,ew),i.notifyOnChanges()}return!0}return!1}function Wa(i,s,a,c){const d=Yt();if(d.firstCreatePass){const f=ir();(function Yn(i,s,a){null===i.queries&&(i.queries=new Qf),i.queries.track(new S_(s,a))})(d,new vI(s,a,c),f.index),function _l(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function xe(i,s,a){const c=new bm(4==(4&a));Tw(i,s,c,c.destroy),null===s[mi]&&(s[mi]=new T_),s[mi].queries.push(new Yu(c))}(d,he(),a)}function Am(){return function IC(i,s){return i[mi].queries[s].queryList}(he(),Wl())}function Mm(i,s){return i.queries.getByIndex(s)}function M_(i){return!!fr(i)}function Ju(...i){}const V_=new on("Application Initializer");let Pm=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Ju,this.reject=Ju,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(kg(f))a.push(f);else if(Nv(f)){const v=new Promise((E,I)=>{f.subscribe({complete:E,error:I})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(je(V_,8))},i.\u0275prov=et({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const ur=new on("AppId",{providedIn:"root",factory:function bI(){return`${Vn()}${Vn()}${Vn()}`}});function Vn(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Xu=new on("Platform Initializer"),U_=new on("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),B_=new on("appBootstrapListener");let Fm=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=et({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const os=new on("LocaleId",{providedIn:"root",factory:()=>tt(os,gt.Optional|gt.SkipSelf)||function Cl(){return typeof $localize<"u"&&$localize.locale||zu}()}),rp=new on("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class j_{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Sl=(()=>{class i{compileModuleSync(a){return new mm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),f=La(fr(a).declarations).reduce((v,E)=>{const I=Kt(E);return I&&v.push(new Cg(I)),v},[]);return new j_(c,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=et({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const PC=(()=>Promise.resolve(0))();function G_(i){typeof Zone>"u"?PC.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Er{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Rs(!1),this.onMicrotaskEmpty=new Rs(!1),this.onStable=new Rs(!1),this.onError=new Rs(!1),typeof Zone>"u")throw new le(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function TI(){let i=Mt.requestAnimationFrame,s=Mt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Jt(i){const s=()=>{!function AI(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Mt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,an(i),i.isCheckStableRunning=!0,Um(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),an(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,f,v,E)=>{try{return Al(i),a.invokeTask(d,f,v,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),Bm(i)}},onInvoke:(a,c,d,f,v,E,I)=>{try{return Al(i),a.invoke(d,f,v,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),Bm(i)}},onHasTask:(a,c,d,f)=>{a.hasTask(d,f),c===d&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,an(i),Um(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,c,d,f)=>(a.handleError(d,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Er.isInAngularZone())throw new le(909,!1)}static assertNotInAngularZone(){if(Er.isInAngularZone())throw new le(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const f=this._inner,v=f.scheduleEventTask("NgZoneEvent: "+d,s,SI,Ju,Ju);try{return f.runTask(v,a,c)}finally{f.cancelTask(v)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const SI={};function Um(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function an(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function Al(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Bm(i){i._nesting--,Um(i)}class z_{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Rs,this.onMicrotaskEmpty=new Rs,this.onStable=new Rs,this.onError=new Rs}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const q_=new on(""),jm=new on("");let Z_,MI=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Z_||(function xI(i){Z_=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Er.assertNotInAngularZone(),G_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())G_(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==f),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(je(Er),je(W_),je(jm))},i.\u0275prov=et({token:i,factory:i.\u0275fac}),i})(),W_=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Z_?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=et({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),ec=null;const RI=new on("AllowMultipleToken"),$m=new on("PlatformDestroyListeners"),Ka=!1;class ah{constructor(s,a){this.name=s,this.token=a}}function dn(i,s,a=[]){const c=`Platform: ${s}`,d=new on(c);return(f=[])=>{let v=Ir();if(!v||v.injector.get(RI,!1)){const E=[...a,...f,{provide:d,useValue:!0}];i?i(E):function LC(i){if(ec&&!ec.get(RI,!1))throw new le(400,!1);ec=i;const s=i.get(K_);(function op(i){const s=i.get(Xu,null);s&&s.forEach(a=>a())})(i)}(function Ml(i=[],s){return il.create({name:s,providers:[{provide:Y0,useValue:"platform"},{provide:$m,useValue:new Set([()=>ec=null])},...i]})}(E,c))}return function OI(i){const s=Ir();if(!s)throw new le(401,!1);return s}()}}function Ir(){return ec?.get(K_)??null}let K_=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function PI(i,s){let a;return a="noop"===i?new z_:("zone.js"===i?void 0:i)||new Er(s),a}(c?.ngZone,function Mn(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),f=[{provide:Er,useValue:d}];return d.run(()=>{const v=il.create({providers:f,parent:this.injector,name:a.moduleType.name}),E=a.create(v),I=E.injector.get(Ad,null);if(!I)throw new le(402,!1);return d.runOutsideAngular(()=>{const T=d.onError.subscribe({next:x=>{I.handleError(x)}});E.onDestroy(()=>{xl(this._modules,E),T.unsubscribe()})}),function Hm(i,s,a){try{const c=a();return kg(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(I,d,()=>{const T=E.injector.get(Pm);return T.runInitializers(),T.donePromise.then(()=>(function Xv(i){Ke(i,"Expected localeId to be defined"),"string"==typeof i&&(ME=i.toLowerCase().replace(/_/g,"-"))}(E.injector.get(os,zu)||zu),this._moduleDoBootstrap(E),E))})})}bootstrapModule(a,c=[]){const d=tc({},c);return function NI(i,s,a){const c=new mm(a);return Promise.resolve(c)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const c=a.injector.get(nc);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new le(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new le(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get($m,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(je(il))},i.\u0275prov=et({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function tc(i,s){return Array.isArray(s)?s.reduce(tc,i):{...i,...s}}let nc=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new O.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new O.y(E=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Er.assertNotInAngularZone(),G_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{Er.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{I.unsubscribe(),T.unsubscribe()}});this.isStable=(0,X.T)(f,v.pipe((0,ee.B)()))}bootstrap(a,c){const d=a instanceof Ky;if(!this._injector.get(Pm).done){!d&&Un(a);throw new le(405,Ka)}let v;v=d?a:this._injector.get(cf).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const E=function FC(i){return i.isBoundToModule}(v)?void 0:this._injector.get(Jd),T=v.create(il.NULL,[],c||v.selector,E),x=T.location.nativeElement,k=T.injector.get(q_,null);return k?.registerApplication(x),T.onDestroy(()=>{this.detachView(T.hostView),xl(this.components,T),k?.unregisterApplication(x)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new le(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;xl(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(B_,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>xl(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new le(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(je(Er),je(nl),je(Ad))},i.\u0275prov=et({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function xl(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}function FI(){return!1}let Q_=(()=>{class i{}return i.__NG_ELEMENT_ID__=Gm,i})();function Gm(i){return function J_(i,s,a){if(vi(i)&&!a){const c=Xn(i.index,s);return new bg(c,c)}return 47&i.type?new bg(s[pr],s):null}(ir(),he(),16==(16&i))}class s0{constructor(){}supports(s){return Fu(s)}create(s){return new BI(s)}}const hh=(i,s)=>s;class BI{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||hh}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,f=null;for(;a||c;){const v=!c||a&&a.currentIndex<HI(c,d,f)?a:c,E=HI(v,d,f),I=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{f||(f=[]);const T=E-d,x=I-d;if(T!=x){for(let G=0;G<T;G++){const Y=G<f.length?f[G]:f[G]=0,pe=Y+G;x<=pe&&pe<T&&(f[G]=Y+1)}f[v.previousIndex]=x-T}}E!==I&&s(v,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Fu(s))throw new le(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,f,v,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)f=s[E],v=this._trackByFn(E,f),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,f,v,E)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,v,E),c=!0),a=a._next}else d=0,function xg(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,E=>{v=this._trackByFn(d,E),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,E,v,d)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,v,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,d)):s=this._addAfter(new jI(a,c),f,d),s}_verifyReinsertion(s,a,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?s=this._reinsertAfter(f,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,f=s._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new $I),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $I),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class jI{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class hp{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class $I{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new hp,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function HI(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class Pn{constructor(){}supports(s){return s instanceof Map||Cv(s)}create(){return new Km}}class Km{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Cv(s)))throw new le(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const f=d._prev,v=d._next;return f&&(f._next=v),v&&(v._prev=f),d._next=null,d._prev=null,d}const c=new Ym(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class Ym{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function o0(){return new a0([new s0])}let a0=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||o0()),deps:[[i,new C,new Au]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new le(901,!1)}}return i.\u0275prov=et({token:i,providedIn:"root",factory:o0}),i})();function GI(){return new Jm([new Pn])}let Jm=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||GI()),deps:[[i,new C,new Au]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new le(901,!1)}}return i.\u0275prov=et({token:i,providedIn:"root",factory:GI}),i})();const zI=dn(null,"core",[]);let ph=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(je(nc))},i.\u0275mod=bn({type:i}),i.\u0275inj=mn({}),i})();function u0(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(ht,Ie,P)=>{P.d(Ie,{Z:()=>He});var g=P(2090),K=P(4859),O=P(9681),X=P(1877);class ee{constructor(le,be){this._delegate=le,this.firebase=be,(0,O._addComponent)(le,new K.wA("app-compat",()=>this,"PUBLIC")),this.container=le.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(le){this._delegate.automaticDataCollectionEnabled=le}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(le=>{this._delegate.checkDestroyed(),le()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(le,be=O._DEFAULT_ENTRY_NAME){var De;this._delegate.checkDestroyed();const ke=this._delegate.container.getProvider(le);return!ke.isInitialized()&&"EXPLICIT"===(null===(De=ke.getComponent())||void 0===De?void 0:De.instantiationMode)&&ke.initialize(),ke.getImmediate({identifier:be})}_removeServiceInstance(le,be=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(le).clearInstance(be)}_addComponent(le){(0,O._addComponent)(this._delegate,le)}_addOrOverwriteComponent(le){(0,O._addOrOverwriteComponent)(this._delegate,le)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),j=function se(){const st=function ae(st){const le={},be={__esModule:!0,initializeApp:function we(Re,V={}){const ye=O.initializeApp(Re,V);if((0,g.r3)(le,ye.name))return le[ye.name];const Ve=new st(ye,be);return le[ye.name]=Ve,Ve},app:ke,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function Te(Re){const V=Re.name,ye=V.replace("-compat","");if(O._registerComponent(Re)&&"PUBLIC"===Re.type){const Ve=(ze=ke())=>{if("function"!=typeof ze[ye])throw de.create("invalid-app-argument",{appName:V});return ze[ye]()};void 0!==Re.serviceProps&&(0,g.ZB)(Ve,Re.serviceProps),be[ye]=Ve,st.prototype[ye]=function(...ze){return this._getService.bind(this,V).apply(this,Re.multipleInstances?ze:[])}}return"PUBLIC"===Re.type?be[ye]:null},removeApp:function De(Re){delete le[Re]},useAsService:function Ne(Re,V){return"serverAuth"===V?null:V},modularAPIs:O}};function ke(Re){if(!(0,g.r3)(le,Re=Re||O._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:Re});return le[Re]}return be.default=be,Object.defineProperty(be,"apps",{get:function ve(){return Object.keys(le).map(Re=>le[Re])}}),ke.App=st,be}(ee);return st.INTERNAL=Object.assign(Object.assign({},st.INTERNAL),{createFirebaseNamespace:se,extendNamespace:function le(be){(0,g.ZB)(st,be)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),st}(),B=new X.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){B.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const st=self.firebase.SDK_VERSION;st&&st.indexOf("LITE")>=0&&B.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const He=j;!function Ee(st){(0,O.registerVersion)("@firebase/app-compat","0.2.3",st)}()},9681:(ht,Ie,P)=>{P.r(Ie),P.d(Ie,{FirebaseError:()=>X.ZR,SDK_VERSION:()=>Xr,_DEFAULT_ENTRY_NAME:()=>Fe,_addComponent:()=>rn,_addOrOverwriteComponent:()=>_t,_apps:()=>Ke,_clearComponents:()=>mn,_components:()=>Ge,_getProvider:()=>et,_registerComponent:()=>Qt,_removeServiceInstance:()=>xt,deleteApp:()=>Fs,getApp:()=>di,getApps:()=>Cr,initializeApp:()=>fs,onLog:()=>gt,registerVersion:()=>Ur,setLogLevel:()=>$i});var g=P(5861),K=P(4859),O=P(1877),X=P(2090),ee=P(8766);class te{constructor(_e){this.container=_e}getPlatformInfoString(){return this.container.getProviders().map(tt=>{if(function de(je){return"VERSION"===je.getComponent()?.type}(tt)){const Dt=tt.getImmediate();return`${Dt.library}/${Dt.version}`}return null}).filter(tt=>tt).join(" ")}}const ae="@firebase/app",j=new O.Yd("@firebase/app"),Fe="[DEFAULT]",Be={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ke=new Map,Ge=new Map;function rn(je,_e){try{je.container.addComponent(_e)}catch(tt){j.debug(`Component ${_e.name} failed to register with FirebaseApp ${je.name}`,tt)}}function _t(je,_e){je.container.addOrOverwriteComponent(_e)}function Qt(je){const _e=je.name;if(Ge.has(_e))return j.debug(`There were multiple attempts to register component ${_e}.`),!1;Ge.set(_e,je);for(const tt of Ke.values())rn(tt,je);return!0}function et(je,_e){const tt=je.container.getProvider("heartbeat").getImmediate({optional:!0});return tt&&tt.triggerHeartbeat(),je.container.getProvider(_e)}function xt(je,_e,tt=Fe){et(je,_e).clearInstance(tt)}function mn(){Ge.clear()}const yn=new X.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class wn{constructor(_e,tt,Dt){this._isDeleted=!1,this._options=Object.assign({},_e),this._config=Object.assign({},tt),this._name=tt.name,this._automaticDataCollectionEnabled=tt.automaticDataCollectionEnabled,this._container=Dt,this.container.addComponent(new K.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this.checkDestroyed(),this._automaticDataCollectionEnabled=_e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_e){this._isDeleted=_e}checkDestroyed(){if(this.isDeleted)throw yn.create("app-deleted",{appName:this._name})}}const Xr="9.17.1";function fs(je,_e={}){let tt=je;"object"!=typeof _e&&(_e={name:_e});const Dt=Object.assign({name:Fe,automaticDataCollectionEnabled:!1},_e),Ct=Dt.name;if("string"!=typeof Ct||!Ct)throw yn.create("bad-app-name",{appName:String(Ct)});if(tt||(tt=(0,X.aH)()),!tt)throw yn.create("no-options");const kt=Ke.get(Ct);if(kt){if((0,X.vZ)(tt,kt.options)&&(0,X.vZ)(Dt,kt.config))return kt;throw yn.create("duplicate-app",{appName:Ct})}const U=new K.H0(Ct);for(const z of Ge.values())U.addComponent(z);const L=new wn(tt,Dt,U);return Ke.set(Ct,L),L}function di(je=Fe){const _e=Ke.get(je);if(!_e&&je===Fe)return fs();if(!_e)throw yn.create("no-app",{appName:je});return _e}function Cr(){return Array.from(Ke.values())}function Fs(je){return cn.apply(this,arguments)}function cn(){return(cn=(0,g.Z)(function*(je){const _e=je.name;Ke.has(_e)&&(Ke.delete(_e),yield Promise.all(je.container.getProviders().map(tt=>tt.delete())),je.isDeleted=!0)})).apply(this,arguments)}function Ur(je,_e,tt){var Dt;let Ct=null!==(Dt=Be[je])&&void 0!==Dt?Dt:je;tt&&(Ct+=`-${tt}`);const kt=Ct.match(/\s|\//),U=_e.match(/\s|\//);if(kt||U){const L=[`Unable to register library "${Ct}" with version "${_e}":`];return kt&&L.push(`library name "${Ct}" contains illegal characters (whitespace or "/")`),kt&&U&&L.push("and"),U&&L.push(`version name "${_e}" contains illegal characters (whitespace or "/")`),void j.warn(L.join(" "))}Qt(new K.wA(`${Ct}-version`,()=>({library:Ct,version:_e}),"VERSION"))}function gt(je,_e){if(null!==je&&"function"!=typeof je)throw yn.create("invalid-log-argument");(0,O.Am)(je,_e)}function $i(je){(0,O.Ub)(je)}const hi="firebase-heartbeat-database",En=1,Tr="firebase-heartbeat-store";let ps=null;function Mt(){return ps||(ps=(0,ee.X3)(hi,En,{upgrade:(je,_e)=>{0===_e&&je.createObjectStore(Tr)}}).catch(je=>{throw yn.create("idb-open",{originalErrorMessage:je.message})})),ps}function wt(){return(wt=(0,g.Z)(function*(je){try{return(yield Mt()).transaction(Tr).objectStore(Tr).get(In(je))}catch(_e){if(_e instanceof X.ZR)j.warn(_e.message);else{const tt=yn.create("idb-get",{originalErrorMessage:_e?.message});j.warn(tt.message)}}})).apply(this,arguments)}function Hi(je,_e){return xn.apply(this,arguments)}function xn(){return(xn=(0,g.Z)(function*(je,_e){try{const Dt=(yield Mt()).transaction(Tr,"readwrite");return yield Dt.objectStore(Tr).put(_e,In(je)),Dt.done}catch(tt){if(tt instanceof X.ZR)j.warn(tt.message);else{const Dt=yn.create("idb-set",{originalErrorMessage:tt?.message});j.warn(Dt.message)}}})).apply(this,arguments)}function In(je){return`${je.name}!${je.options.appId}`}class Qo{constructor(_e){this.container=_e,this._heartbeatsCache=null;const tt=this.container.getProvider("app").getImmediate();this._storage=new Zt(tt),this._heartbeatsCachePromise=this._storage.read().then(Dt=>(this._heartbeatsCache=Dt,Dt))}triggerHeartbeat(){var _e=this;return(0,g.Z)(function*(){const Dt=_e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Ct=sn();if(null===_e._heartbeatsCache&&(_e._heartbeatsCache=yield _e._heartbeatsCachePromise),_e._heartbeatsCache.lastSentHeartbeatDate!==Ct&&!_e._heartbeatsCache.heartbeats.some(kt=>kt.date===Ct))return _e._heartbeatsCache.heartbeats.push({date:Ct,agent:Dt}),_e._heartbeatsCache.heartbeats=_e._heartbeatsCache.heartbeats.filter(kt=>{const U=new Date(kt.date).valueOf();return Date.now()-U<=2592e6}),_e._storage.overwrite(_e._heartbeatsCache)})()}getHeartbeatsHeader(){var _e=this;return(0,g.Z)(function*(){if(null===_e._heartbeatsCache&&(yield _e._heartbeatsCachePromise),null===_e._heartbeatsCache||0===_e._heartbeatsCache.heartbeats.length)return"";const tt=sn(),{heartbeatsToSend:Dt,unsentEntries:Ct}=function Gi(je,_e=1024){const tt=[];let Dt=je.slice();for(const Ct of je){const kt=tt.find(U=>U.agent===Ct.agent);if(kt){if(kt.dates.push(Ct.date),dr(tt)>_e){kt.dates.pop();break}}else if(tt.push({agent:Ct.agent,dates:[Ct.date]}),dr(tt)>_e){tt.pop();break}Dt=Dt.slice(1)}return{heartbeatsToSend:tt,unsentEntries:Dt}}(_e._heartbeatsCache.heartbeats),kt=(0,X.L)(JSON.stringify({version:2,heartbeats:Dt}));return _e._heartbeatsCache.lastSentHeartbeatDate=tt,Ct.length>0?(_e._heartbeatsCache.heartbeats=Ct,yield _e._storage.overwrite(_e._heartbeatsCache)):(_e._heartbeatsCache.heartbeats=[],_e._storage.overwrite(_e._heartbeatsCache)),kt})()}}function sn(){return(new Date).toISOString().substring(0,10)}class Zt{constructor(_e){this.app=_e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,g.Z)(function*(){return!!(0,X.hl)()&&(0,X.eu)().then(()=>!0).catch(()=>!1)})()}read(){var _e=this;return(0,g.Z)(function*(){return(yield _e._canUseIndexedDBPromise)&&(yield function mt(je){return wt.apply(this,arguments)}(_e.app))||{heartbeats:[]}})()}overwrite(_e){var tt=this;return(0,g.Z)(function*(){var Dt;if(yield tt._canUseIndexedDBPromise){const kt=yield tt.read();return Hi(tt.app,{lastSentHeartbeatDate:null!==(Dt=_e.lastSentHeartbeatDate)&&void 0!==Dt?Dt:kt.lastSentHeartbeatDate,heartbeats:_e.heartbeats})}})()}add(_e){var tt=this;return(0,g.Z)(function*(){var Dt;if(yield tt._canUseIndexedDBPromise){const kt=yield tt.read();return Hi(tt.app,{lastSentHeartbeatDate:null!==(Dt=_e.lastSentHeartbeatDate)&&void 0!==Dt?Dt:kt.lastSentHeartbeatDate,heartbeats:[...kt.heartbeats,..._e.heartbeats]})}})()}}function dr(je){return(0,X.L)(JSON.stringify({version:2,heartbeats:je})).length}!function Ti(je){Qt(new K.wA("platform-logger",_e=>new te(_e),"PRIVATE")),Qt(new K.wA("heartbeat",_e=>new Qo(_e),"PRIVATE")),Ur(ae,"0.9.3",je),Ur(ae,"0.9.3","esm2017"),Ur("fire-js","")}("")},4859:(ht,Ie,P)=>{P.d(Ie,{H0:()=>ae,wA:()=>O});var g=P(5861),K=P(2090);class O{constructor(j,B,Z){this.name=j,this.instanceFactory=B,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(j){return this.instantiationMode=j,this}setMultipleInstances(j){return this.multipleInstances=j,this}setServiceProps(j){return this.serviceProps=j,this}setInstanceCreatedCallback(j){return this.onInstanceCreated=j,this}}const X="[DEFAULT]";class ee{constructor(j,B){this.name=j,this.container=B,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(j){const B=this.normalizeInstanceIdentifier(j);if(!this.instancesDeferred.has(B)){const Z=new K.BH;if(this.instancesDeferred.set(B,Z),this.isInitialized(B)||this.shouldAutoInitialize())try{const Ue=this.getOrInitializeService({instanceIdentifier:B});Ue&&Z.resolve(Ue)}catch{}}return this.instancesDeferred.get(B).promise}getImmediate(j){var B;const Z=this.normalizeInstanceIdentifier(j?.identifier),Ue=null!==(B=j?.optional)&&void 0!==B&&B;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(Ue)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(Ee){if(Ue)return null;throw Ee}}getComponent(){return this.component}setComponent(j){if(j.name!==this.name)throw Error(`Mismatching Component ${j.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=j,this.shouldAutoInitialize()){if(function de(se){return"EAGER"===se.instantiationMode}(j))try{this.getOrInitializeService({instanceIdentifier:X})}catch{}for(const[B,Z]of this.instancesDeferred.entries()){const Ue=this.normalizeInstanceIdentifier(B);try{const Ee=this.getOrInitializeService({instanceIdentifier:Ue});Z.resolve(Ee)}catch{}}}}clearInstance(j=X){this.instancesDeferred.delete(j),this.instancesOptions.delete(j),this.instances.delete(j)}delete(){var j=this;return(0,g.Z)(function*(){const B=Array.from(j.instances.values());yield Promise.all([...B.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...B.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(j=X){return this.instances.has(j)}getOptions(j=X){return this.instancesOptions.get(j)||{}}initialize(j={}){const{options:B={}}=j,Z=this.normalizeInstanceIdentifier(j.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ue=this.getOrInitializeService({instanceIdentifier:Z,options:B});for(const[Ee,He]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(Ee)&&He.resolve(Ue);return Ue}onInit(j,B){var Z;const Ue=this.normalizeInstanceIdentifier(B),Ee=null!==(Z=this.onInitCallbacks.get(Ue))&&void 0!==Z?Z:new Set;Ee.add(j),this.onInitCallbacks.set(Ue,Ee);const He=this.instances.get(Ue);return He&&j(He,Ue),()=>{Ee.delete(j)}}invokeOnInitCallbacks(j,B){const Z=this.onInitCallbacks.get(B);if(Z)for(const Ue of Z)try{Ue(j,B)}catch{}}getOrInitializeService({instanceIdentifier:j,options:B={}}){let Z=this.instances.get(j);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(se=j,se===X?void 0:se),options:B}),this.instances.set(j,Z),this.instancesOptions.set(j,B),this.invokeOnInitCallbacks(Z,j),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,j,Z)}catch{}var se;return Z||null}normalizeInstanceIdentifier(j=X){return this.component?this.component.multipleInstances?j:X:j}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor(j){this.name=j,this.providers=new Map}addComponent(j){const B=this.getProvider(j.name);if(B.isComponentSet())throw new Error(`Component ${j.name} has already been registered with ${this.name}`);B.setComponent(j)}addOrOverwriteComponent(j){this.getProvider(j.name).isComponentSet()&&this.providers.delete(j.name),this.addComponent(j)}getProvider(j){if(this.providers.has(j))return this.providers.get(j);const B=new ee(j,this);return this.providers.set(j,B),B}getProviders(){return Array.from(this.providers.values())}}},1877:(ht,Ie,P)=>{P.d(Ie,{Am:()=>se,Ub:()=>ae,Yd:()=>de,in:()=>K});const g=[];var K=(()=>{return(j=K||(K={}))[j.DEBUG=0]="DEBUG",j[j.VERBOSE=1]="VERBOSE",j[j.INFO=2]="INFO",j[j.WARN=3]="WARN",j[j.ERROR=4]="ERROR",j[j.SILENT=5]="SILENT",K;var j})();const O={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},X=K.INFO,ee={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},te=(j,B,...Z)=>{if(B<j.logLevel)return;const Ue=(new Date).toISOString(),Ee=ee[B];if(!Ee)throw new Error(`Attempted to log a message with an invalid logType (value: ${B})`);console[Ee](`[${Ue}]  ${j.name}:`,...Z)};class de{constructor(B){this.name=B,this._logLevel=X,this._logHandler=te,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(B){if(!(B in K))throw new TypeError(`Invalid value "${B}" assigned to \`logLevel\``);this._logLevel=B}setLogLevel(B){this._logLevel="string"==typeof B?O[B]:B}get logHandler(){return this._logHandler}set logHandler(B){if("function"!=typeof B)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=B}get userLogHandler(){return this._userLogHandler}set userLogHandler(B){this._userLogHandler=B}debug(...B){this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...B),this._logHandler(this,K.DEBUG,...B)}log(...B){this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...B),this._logHandler(this,K.VERBOSE,...B)}info(...B){this._userLogHandler&&this._userLogHandler(this,K.INFO,...B),this._logHandler(this,K.INFO,...B)}warn(...B){this._userLogHandler&&this._userLogHandler(this,K.WARN,...B),this._logHandler(this,K.WARN,...B)}error(...B){this._userLogHandler&&this._userLogHandler(this,K.ERROR,...B),this._logHandler(this,K.ERROR,...B)}}function ae(j){g.forEach(B=>{B.setLogLevel(j)})}function se(j,B){for(const Z of g){let Ue=null;B&&B.level&&(Ue=O[B.level]),Z.userLogHandler=null===j?null:(Ee,He,...st)=>{const le=st.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch{return null}}).filter(be=>be).join(" ");He>=(Ue??Ee.logLevel)&&j({level:K[He].toLowerCase(),message:le,args:st,type:Ee.name})}}}},259:(ht,Ie,P)=>{P.d(Ie,{C6:()=>g.getApps,Mq:()=>g.getApp});var g=P(9681);(0,g.registerVersion)("firebase","9.17.1","app")},9260:(ht,Ie,P)=>{P.d(Ie,{Z:()=>g.Z});var g=P(3942);g.Z.registerVersion("firebase","9.17.1","app-compat")},407:(ht,Ie,P)=>{P.r(Ie);var g=P(5861),K=P(3942),O=P(2090),X=P(9681),ee=P(1877),te=P(655),de=P(4859);const se={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Z_EMAIL_SIGNIN="EMAIL_SIGNIN",Z_PASSWORD_RESET="PASSWORD_RESET",Z_RECOVER_EMAIL="RECOVER_EMAIL",Z_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",Z_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",Z_VERIFY_EMAIL="VERIFY_EMAIL";const He=function Ue(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},st=function Ee(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},le=new O.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),De=new ee.Yd("@firebase/auth");function ke(y,...h){De.logLevel<=ee.in.ERROR&&De.error(`Auth (${X.SDK_VERSION}): ${y}`,...h)}function we(y,...h){throw Re(y,...h)}function ve(y,...h){return Re(y,...h)}function Te(y,h,p){const _=Object.assign(Object.assign({},st()),{[h]:p});return new O.LL("auth","Firebase",_).create(h,{appName:y.name})}function Ne(y,h,p){if(!(h instanceof p))throw p.name!==h.constructor.name&&we(y,"argument-error"),Te(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Re(y,...h){if("string"!=typeof y){const p=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=y.name),y._errorFactory.create(p,..._)}return le.create(y,...h)}function V(y,h,...p){if(!y)throw Re(h,...p)}function ye(y){const h="INTERNAL ASSERTION FAILED: "+y;throw ke(h),new Error(h)}function Ve(y,h){y||ye(h)}const ze=new Map;function ft(y){Ve(y instanceof Function,"Expected a class definition");let h=ze.get(y);return h?(Ve(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,ze.set(y,h),h)}function ue(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function ge(){return"http:"===Se()||"https:"===Se()}function Se(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Ke{constructor(h,p){this.shortDelay=h,this.longDelay=p,Ve(p>h,"Short delay should be less than long delay!"),this.isMobile=(0,O.uI)()||(0,O.b$)()}get(){return function Fe(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(ge()||(0,O.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ge(y,h){Ve(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return h?`${p}${h.startsWith("/")?h.slice(1):h}`:p}class rn{static initialize(h,p,_){this.fetchImpl=h,p&&(this.headersImpl=p),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ye("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ye("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ye("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const _t={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Qt=new Ke(3e4,6e4);function et(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function xt(y,h,p,_){return mn.apply(this,arguments)}function mn(){return(mn=(0,g.Z)(function*(y,h,p,_,S={}){return _n(y,S,(0,g.Z)(function*(){let R={},q={};_&&("GET"===h?q=_:R={body:JSON.stringify(_)});const oe=(0,O.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),Oe=yield y._getAdditionalHeaders();return Oe["Content-Type"]="application/json",y.languageCode&&(Oe["X-Firebase-Locale"]=y.languageCode),rn.fetch()(fs(y,y.config.apiHost,p,oe),Object.assign({method:h,headers:Oe,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function _n(y,h,p){return yn.apply(this,arguments)}function yn(){return(yn=(0,g.Z)(function*(y,h,p){y._canInitEmulator=!1;const _=Object.assign(Object.assign({},_t),h);try{const S=new di(y),R=yield Promise.race([p(),S.promise]);S.clearNetworkTimeout();const q=yield R.json();if("needConfirmation"in q)throw Cr(y,"account-exists-with-different-credential",q);if(R.ok&&!("errorMessage"in q))return q;{const oe=R.ok?q.errorMessage:q.error.message,[Oe,Xe]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Oe)throw Cr(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===Oe)throw Cr(y,"email-already-in-use",q);if("USER_DISABLED"===Oe)throw Cr(y,"user-disabled",q);const Et=_[Oe]||Oe.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw Te(y,Et,Xe);we(y,Et)}}catch(S){if(S instanceof O.ZR)throw S;we(y,"network-request-failed")}})).apply(this,arguments)}function wn(y,h,p,_){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,g.Z)(function*(y,h,p,_,S={}){const R=yield xt(y,h,p,_,S);return"mfaPendingCredential"in R&&we(y,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function fs(y,h,p,_){const S=`${h}${p}?${_}`;return y.config.emulator?Ge(y.config,S):`${y.config.apiScheme}://${S}`}class di{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((p,_)=>{this.timer=setTimeout(()=>_(ve(this.auth,"network-request-failed")),Qt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cr(y,h,p){const _={appName:y.name};p.email&&(_.email=p.email),p.phoneNumber&&(_.phoneNumber=p.phoneNumber);const S=ve(y,h,_);return S.customData._tokenResponse=p,S}function cn(){return(cn=(0,g.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function gt(){return(gt=(0,g.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function hi(){return(hi=(0,g.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function En(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function Mt(){return(Mt=(0,g.Z)(function*(y,h=!1){const p=(0,O.m9)(y),_=yield p.getIdToken(h),S=wt(_);V(S&&S.exp&&S.auth_time&&S.iat,p.auth,"internal-error");const R="object"==typeof S.firebase?S.firebase:void 0,q=R?.sign_in_provider;return{claims:S,token:_,authTime:En(mt(S.auth_time)),issuedAtTime:En(mt(S.iat)),expirationTime:En(mt(S.exp)),signInProvider:q||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function mt(y){return 1e3*Number(y)}function wt(y){const[h,p,_]=y.split(".");if(void 0===h||void 0===p||void 0===_)return ke("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,O.tV)(p);return S?JSON.parse(S):(ke("Failed to decode base64 JWT payload"),null)}catch(S){return ke("Caught error parsing JWT payload as JSON",S?.toString()),null}}function xn(y,h){return In.apply(this,arguments)}function In(){return(In=(0,g.Z)(function*(y,h,p=!1){if(p)return h;try{return yield h}catch(_){throw _ instanceof O.ZR&&function fi({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}(_)&&y.auth.currentUser===y&&(yield y.auth.signOut()),_}})).apply(this,arguments)}class lr{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var p;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const S=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(h=!1){var p=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,g.Z)(function*(){yield p.iteration()}),_)}iteration(){var h=this;return(0,g.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(p){return void("auth/network-request-failed"===p?.code&&h.schedule(!0))}h.schedule()})()}}class Qo{constructor(h,p){this.createdAt=h,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=En(this.lastLoginAt),this.creationTime=En(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function sn(y){return Gi.apply(this,arguments)}function Gi(){return Gi=(0,g.Z)(function*(y){var h;const p=y.auth,_=yield y.getIdToken(),S=yield xn(y,function $i(y,h){return hi.apply(this,arguments)}(p,{idToken:_}));V(S?.users.length,p,"internal-error");const R=S.users[0];y._notifyReloadListener(R);const q=null!==(h=R.providerUserInfo)&&void 0!==h&&h.length?function je(y){return y.map(h=>{var{providerId:p}=h,_=(0,te._T)(h,["providerId"]);return{providerId:p,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}(R.providerUserInfo):[],oe=function Ti(y,h){return[...y.filter(_=>!h.some(S=>S.providerId===_.providerId)),...h]}(y.providerData,q),Et=!!y.isAnonymous&&!(y.email&&R.passwordHash||oe?.length),pt={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:oe,metadata:new Qo(R.createdAt,R.lastLoginAt),isAnonymous:Et};Object.assign(y,pt)}),Gi.apply(this,arguments)}function dr(){return(dr=(0,g.Z)(function*(y){const h=(0,O.m9)(y);yield sn(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function tt(){return(tt=(0,g.Z)(function*(y,h){const p=yield _n(y,{},(0,g.Z)(function*(){const _=(0,O.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:S,apiKey:R}=y.config,q=fs(y,S,"/v1/token",`key=${R}`),oe=yield y._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",rn.fetch()(q,{method:"POST",headers:oe,body:_})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class Dt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){V(h.idToken,"internal-error"),V(typeof h.idToken<"u","internal-error"),V(typeof h.refreshToken<"u","internal-error");const p="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function Hi(y){const h=wt(y);return V(h,"internal-error"),V(typeof h.exp<"u","internal-error"),V(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,p)}getToken(h,p=!1){var _=this;return(0,g.Z)(function*(){return V(!_.accessToken||_.refreshToken,h,"user-token-expired"),p||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,p){var _=this;return(0,g.Z)(function*(){const{accessToken:S,refreshToken:R,expiresIn:q}=yield function _e(y,h){return tt.apply(this,arguments)}(h,p);_.updateTokensAndExpiration(S,R,Number(q))})()}updateTokensAndExpiration(h,p,_){this.refreshToken=p||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,p){const{refreshToken:_,accessToken:S,expirationTime:R}=p,q=new Dt;return _&&(V("string"==typeof _,"internal-error",{appName:h}),q.refreshToken=_),S&&(V("string"==typeof S,"internal-error",{appName:h}),q.accessToken=S),R&&(V("number"==typeof R,"internal-error",{appName:h}),q.expirationTime=R),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Dt,this.toJSON())}_performRefresh(){return ye("not implemented")}}function Ct(y,h){V("string"==typeof y||typeof y>"u","internal-error",{appName:h})}class kt{constructor(h){var{uid:p,auth:_,stsTokenManager:S}=h,R=(0,te._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=_,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new Qo(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var p=this;return(0,g.Z)(function*(){const _=yield xn(p,p.stsTokenManager.getToken(p.auth,h));return V(_,p.auth,"internal-error"),p.accessToken!==_&&(p.accessToken=_,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),_})()}getIdTokenResult(h){return function ps(y){return Mt.apply(this,arguments)}(this,h)}reload(){return function Zt(y){return dr.apply(this,arguments)}(this)}_assign(h){this!==h&&(V(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(p=>Object.assign({},p)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new kt(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,p=!1){var _=this;return(0,g.Z)(function*(){let S=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),S=!0),p&&(yield sn(_)),yield _.auth._persistUserIfCurrent(_),S&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,g.Z)(function*(){const p=yield h.getIdToken();return yield xn(h,function Fs(y,h){return cn.apply(this,arguments)}(h.auth,{idToken:p})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,p){var _,S,R,q,oe,Oe,Xe,Et;const pt=null!==(_=p.displayName)&&void 0!==_?_:void 0,tr=null!==(S=p.email)&&void 0!==S?S:void 0,Pr=null!==(R=p.phoneNumber)&&void 0!==R?R:void 0,Wc=null!==(q=p.photoURL)&&void 0!==q?q:void 0,Jp=null!==(oe=p.tenantId)&&void 0!==oe?oe:void 0,Go=null!==(Oe=p._redirectEventId)&&void 0!==Oe?Oe:void 0,ts=null!==(Xe=p.createdAt)&&void 0!==Xe?Xe:void 0,zo=null!==(Et=p.lastLoginAt)&&void 0!==Et?Et:void 0,{uid:Zc,emailVerified:Kc,isAnonymous:Yc,providerData:Xp,stsTokenManager:Qc}=p;V(Zc&&Qc,h,"internal-error");const H0=Dt.fromJSON(this.name,Qc);V("string"==typeof Zc,h,"internal-error"),Ct(pt,h.name),Ct(tr,h.name),V("boolean"==typeof Kc,h,"internal-error"),V("boolean"==typeof Yc,h,"internal-error"),Ct(Pr,h.name),Ct(Wc,h.name),Ct(Jp,h.name),Ct(Go,h.name),Ct(ts,h.name),Ct(zo,h.name);const Jc=new kt({uid:Zc,auth:h,email:tr,emailVerified:Kc,displayName:pt,isAnonymous:Yc,photoURL:Wc,phoneNumber:Pr,tenantId:Jp,stsTokenManager:H0,createdAt:ts,lastLoginAt:zo});return Xp&&Array.isArray(Xp)&&(Jc.providerData=Xp.map(Xc=>Object.assign({},Xc))),Go&&(Jc._redirectEventId=Go),Jc}static _fromIdTokenResponse(h,p,_=!1){return(0,g.Z)(function*(){const S=new Dt;S.updateFromServerResponse(p);const R=new kt({uid:p.localId,auth:h,stsTokenManager:S,isAnonymous:_});return yield sn(R),R})()}}const L=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(p,_){var S=this;return(0,g.Z)(function*(){S.storage[p]=_})()}_get(p){var _=this;return(0,g.Z)(function*(){const S=_.storage[p];return void 0===S?null:S})()}_remove(p){var _=this;return(0,g.Z)(function*(){delete _.storage[p]})()}_addListener(p,_){}_removeListener(p,_){}}return y.type="NONE",y})();function z(y,h,p){return`firebase:${y}:${h}:${p}`}class fe{constructor(h,p,_){this.persistence=h,this.auth=p,this.userKey=_;const{config:S,name:R}=this.auth;this.fullUserKey=z(this.userKey,S.apiKey,R),this.fullPersistenceKey=z("persistence",S.apiKey,R),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,g.Z)(function*(){const p=yield h.persistence._get(h.fullUserKey);return p?kt._fromJSON(h.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var p=this;return(0,g.Z)(function*(){if(p.persistence===h)return;const _=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=h,_?p.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,p,_="authUser"){return(0,g.Z)(function*(){if(!p.length)return new fe(ft(L),h,_);const S=(yield Promise.all(p.map(function(){var Xe=(0,g.Z)(function*(Et){if(yield Et._isAvailable())return Et});return function(Et){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let R=S[0]||ft(L);const q=z(_,h.config.apiKey,h.name);let oe=null;for(const Xe of p)try{const Et=yield Xe._get(q);if(Et){const pt=kt._fromJSON(h,Et);Xe!==R&&(oe=pt),R=Xe;break}}catch{}const Oe=S.filter(Xe=>Xe._shouldAllowMigration);return R._shouldAllowMigration&&Oe.length?(R=Oe[0],oe&&(yield R._set(q,oe.toJSON())),yield Promise.all(p.map(function(){var Xe=(0,g.Z)(function*(Et){if(Et!==R)try{yield Et._remove(q)}catch{}});return function(Et){return Xe.apply(this,arguments)}}())),new fe(R,h,_)):new fe(R,h,_)})()}}function Q(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Dn(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(it(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Jn(h))return"Blackberry";if(jt(h))return"Webos";if(Ft(h))return"Safari";if((h.includes("chrome/")||zt(h))&&!h.includes("edge/"))return"Chrome";if(yt(h))return"Android";{const _=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function it(y=(0,O.z$)()){return/firefox\//i.test(y)}function Ft(y=(0,O.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function zt(y=(0,O.z$)()){return/crios\//i.test(y)}function Dn(y=(0,O.z$)()){return/iemobile/i.test(y)}function yt(y=(0,O.z$)()){return/android/i.test(y)}function Jn(y=(0,O.z$)()){return/blackberry/i.test(y)}function jt(y=(0,O.z$)()){return/webos/i.test(y)}function zn(y=(0,O.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Ch(y=(0,O.z$)()){return zn(y)||yt(y)||jt(y)||Jn(y)||/windows phone/i.test(y)||Dn(y)}function Ja(y,h=[]){let p;switch(y){case"Browser":p=Q((0,O.z$)());break;case"Worker":p=`${Q((0,O.z$)())}-${y}`;break;default:p=y}const _=h.length?h.join(","):"FirebaseCore-web";return`${p}/JsCore/${X.SDK_VERSION}/${_}`}class cc{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,p){const _=R=>new Promise((q,oe)=>{try{q(h(R))}catch(Oe){oe(Oe)}});_.onAbort=p,this.queue.push(_);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(h){var p=this;return(0,g.Z)(function*(){if(p.auth.currentUser===h)return;const _=[];try{for(const S of p.queue)yield S(h),S.onAbort&&_.push(S.onAbort)}catch(S){_.reverse();for(const R of _)try{R()}catch{}throw p.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class Fl{constructor(h,p,_){this.app=h,this.heartbeatServiceProvider=p,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ll(this),this.idTokenSubscription=new Ll(this),this.beforeStateQueue=new cc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=le,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(h,p){var _=this;return p&&(this._popupRedirectResolver=ft(p)),this._initializationPromise=this.queue((0,g.Z)(function*(){var S,R;if(!_._deleted&&(_.persistenceManager=yield fe.create(_,h),!_._deleted)){if(null!==(S=_._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(p),_.lastNotifiedUid=(null===(R=_.currentUser)||void 0===R?void 0:R.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,g.Z)(function*(){if(h._deleted)return;const p=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||p){if(h.currentUser&&p&&h.currentUser.uid===p.uid)return h._currentUser._assign(p),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(p,!0)}})()}initializeCurrentUser(h){var p=this;return(0,g.Z)(function*(){var _;const S=yield p.assertedPersistence.getCurrentUser();let R=S,q=!1;if(h&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const oe=null===(_=p.redirectUser)||void 0===_?void 0:_._redirectEventId,Oe=R?._redirectEventId,Xe=yield p.tryRedirectSignIn(h);(!oe||oe===Oe)&&Xe?.user&&(R=Xe.user,q=!0)}if(!R)return p.directlySetCurrentUser(null);if(!R._redirectEventId){if(q)try{yield p.beforeStateQueue.runMiddleware(R)}catch(oe){R=S,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(oe))}return R?p.reloadAndSetCurrentUserOrClear(R):p.directlySetCurrentUser(null)}return V(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===R._redirectEventId?p.directlySetCurrentUser(R):p.reloadAndSetCurrentUserOrClear(R)})()}tryRedirectSignIn(h){var p=this;return(0,g.Z)(function*(){let _=null;try{_=yield p._popupRedirectResolver._completeRedirectFn(p,h,!0)}catch{yield p._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(h){var p=this;return(0,g.Z)(function*(){try{yield sn(h)}catch(_){if("auth/network-request-failed"!==_?.code)return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Be(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,g.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var p=this;return(0,g.Z)(function*(){const _=h?(0,O.m9)(h):null;return _&&V(_.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(_&&_._clone(p))})()}_updateCurrentUser(h,p=!1){var _=this;return(0,g.Z)(function*(){if(!_._deleted)return h&&V(_.tenantId===h.tenantId,_,"tenant-id-mismatch"),p||(yield _.beforeStateQueue.runMiddleware(h)),_.queue((0,g.Z)(function*(){yield _.directlySetCurrentUser(h),_.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,g.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var p=this;return this.queue((0,g.Z)(function*(){yield p.assertedPersistence.setPersistence(ft(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new O.LL("auth","Firebase",h())}onAuthStateChanged(h,p,_){return this.registerStateListener(this.authStateSubscription,h,p,_)}beforeAuthStateChanged(h,p){return this.beforeStateQueue.pushCallback(h,p)}onIdTokenChanged(h,p,_){return this.registerStateListener(this.idTokenSubscription,h,p,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,p){var _=this;return(0,g.Z)(function*(){const S=yield _.getOrInitRedirectPersistenceManager(p);return null===h?S.removeCurrentUser():S.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var p=this;return(0,g.Z)(function*(){if(!p.redirectPersistenceManager){const _=h&&ft(h)||p._popupRedirectResolver;V(_,p,"argument-error"),p.redirectPersistenceManager=yield fe.create(p,[ft(_._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(h){var p=this;return(0,g.Z)(function*(){var _,S;return p._isInitialized&&(yield p.queue((0,g.Z)(function*(){}))),(null===(_=p._currentUser)||void 0===_?void 0:_._redirectEventId)===h?p._currentUser:(null===(S=p.redirectUser)||void 0===S?void 0:S._redirectEventId)===h?p.redirectUser:null})()}_persistUserIfCurrent(h){var p=this;return(0,g.Z)(function*(){if(h===p.currentUser)return p.queue((0,g.Z)(function*(){return p.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(p=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,p,_,S){if(this._deleted)return()=>{};const R="function"==typeof p?p:p.next.bind(p),q=this._isInitialized?Promise.resolve():this._initializationPromise;return V(q,this,"internal-error"),q.then(()=>R(this.currentUser)),"function"==typeof p?h.addObserver(p,_,S):h.addObserver(p)}directlySetCurrentUser(h){var p=this;return(0,g.Z)(function*(){p.currentUser&&p.currentUser!==h&&p._currentUser._stopProactiveRefresh(),h&&p.isProactiveRefreshEnabled&&h._startProactiveRefresh(),p.currentUser=h,h?yield p.assertedPersistence.setCurrentUser(h):yield p.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Ja(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,g.Z)(function*(){var p;const _={"X-Client-Version":h.clientVersion};h.app.options.appId&&(_["X-Firebase-gmpid"]=h.app.options.appId);const S=yield null===(p=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return S&&(_["X-Firebase-Client"]=S),_})()}}function bn(y){return(0,O.m9)(y)}class Ll{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,O.ne)(p=>this.observer=p)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ea(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function Kt(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class Fn{constructor(h,p){this.providerId=h,this.signInMethod=p}toJSON(){return ye("not implemented")}_getIdTokenResponse(h){return ye("not implemented")}_linkToIdToken(h,p){return ye("not implemented")}_getReauthenticationResolver(h){return ye("not implemented")}}function Un(y,h){return fr.apply(this,arguments)}function fr(){return(fr=(0,g.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:resetPassword",et(y,h))})).apply(this,arguments)}function ei(y,h){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,g.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function hn(){return(hn=(0,g.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:update",et(y,h))})).apply(this,arguments)}function zi(){return(zi=(0,g.Z)(function*(y,h){return wn(y,"POST","/v1/accounts:signInWithPassword",et(y,h))})).apply(this,arguments)}function Bn(y,h){return pi.apply(this,arguments)}function pi(){return(pi=(0,g.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:sendOobCode",et(y,h))})).apply(this,arguments)}function fo(){return(fo=(0,g.Z)(function*(y,h){return Bn(y,h)})).apply(this,arguments)}function Lt(){return(Lt=(0,g.Z)(function*(y,h){return Bn(y,h)})).apply(this,arguments)}function gs(){return(gs=(0,g.Z)(function*(y,h){return Bn(y,h)})).apply(this,arguments)}function gi(){return(gi=(0,g.Z)(function*(y,h){return Bn(y,h)})).apply(this,arguments)}function po(){return(po=(0,g.Z)(function*(y,h){return wn(y,"POST","/v1/accounts:signInWithEmailLink",et(y,h))})).apply(this,arguments)}function mi(){return(mi=(0,g.Z)(function*(y,h){return wn(y,"POST","/v1/accounts:signInWithEmailLink",et(y,h))})).apply(this,arguments)}class ms extends Fn{constructor(h,p,_,S=null){super("password",_),this._email=h,this._password=p,this._tenantId=S}static _fromEmailAndPassword(h,p){return new ms(h,p,"password")}static _fromEmailAndCode(h,p,_=null){return new ms(h,p,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h;if(p?.email&&p?.password){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(h){var p=this;return(0,g.Z)(function*(){switch(p.signInMethod){case"password":return function Sr(y,h){return zi.apply(this,arguments)}(h,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function pr(y,h){return po.apply(this,arguments)}(h,{email:p._email,oobCode:p._password});default:we(h,"internal-error")}})()}_linkToIdToken(h,p){var _=this;return(0,g.Z)(function*(){switch(_.signInMethod){case"password":return ei(h,{idToken:p,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function Vs(y,h){return mi.apply(this,arguments)}(h,{idToken:p,email:_._email,oobCode:_._password});default:we(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function qi(y,h){return un.apply(this,arguments)}function un(){return(un=(0,g.Z)(function*(y,h){return wn(y,"POST","/v1/accounts:signInWithIdp",et(y,h))})).apply(this,arguments)}class ti extends Fn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const p=new ti(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(p.idToken=h.idToken),h.accessToken&&(p.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(p.nonce=h.nonce),h.pendingToken&&(p.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(p.accessToken=h.oauthToken,p.secret=h.oauthTokenSecret):we("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:S}=p,R=(0,te._T)(p,["providerId","signInMethod"]);if(!_||!S)return null;const q=new ti(_,S);return q.idToken=R.idToken||void 0,q.accessToken=R.accessToken||void 0,q.secret=R.secret,q.nonce=R.nonce,q.pendingToken=R.pendingToken||null,q}_getIdTokenResponse(h){return qi(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,qi(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,qi(h,p)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),h.postBody=(0,O.xO)(p)}return h}}function go(){return(go=(0,g.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:sendVerificationCode",et(y,h))})).apply(this,arguments)}function Ar(){return(Ar=(0,g.Z)(function*(y,h){return wn(y,"POST","/v1/accounts:signInWithPhoneNumber",et(y,h))})).apply(this,arguments)}function Ul(){return(Ul=(0,g.Z)(function*(y,h){const p=yield wn(y,"POST","/v1/accounts:signInWithPhoneNumber",et(y,h));if(p.temporaryProof)throw Cr(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Br={USER_NOT_FOUND:"user-not-found"};function na(){return(na=(0,g.Z)(function*(y,h){return wn(y,"POST","/v1/accounts:signInWithPhoneNumber",et(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Br)})).apply(this,arguments)}class vi extends Fn{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,p){return new vi({verificationId:h,verificationCode:p})}static _fromTokenResponse(h,p){return new vi({phoneNumber:h,temporaryProof:p})}_getIdTokenResponse(h){return function Us(y,h){return Ar.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,p){return function gr(y,h){return Ul.apply(this,arguments)}(h,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function yi(y,h){return na.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:p,verificationId:_,verificationCode:S}=this.params;return h&&p?{temporaryProof:h,phoneNumber:p}:{sessionInfo:_,code:S}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:p,verificationCode:_,phoneNumber:S,temporaryProof:R}=h;return _||p||S||R?new vi({verificationId:p,verificationCode:_,phoneNumber:S,temporaryProof:R}):null}}class ra{constructor(h){var p,_,S,R,q,oe;const Oe=(0,O.zd)((0,O.pd)(h)),Xe=null!==(p=Oe.apiKey)&&void 0!==p?p:null,Et=null!==(_=Oe.oobCode)&&void 0!==_?_:null,pt=function fc(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Oe.mode)&&void 0!==S?S:null);V(Xe&&Et&&pt,"argument-error"),this.apiKey=Xe,this.operation=pt,this.code=Et,this.continueUrl=null!==(R=Oe.continueUrl)&&void 0!==R?R:null,this.languageCode=null!==(q=Oe.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(oe=Oe.tenantId)&&void 0!==oe?oe:null}static parseLink(h){const p=function jr(y){const h=(0,O.zd)((0,O.pd)(y)).link,p=h?(0,O.zd)((0,O.pd)(h)).deep_link_id:null,_=(0,O.zd)((0,O.pd)(y)).deep_link_id;return(_?(0,O.zd)((0,O.pd)(_)).link:null)||_||p||h||y}(h);try{return new ra(p)}catch{return null}}}let pc=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,_){return ms._fromEmailAndPassword(p,_)}static credentialWithLink(p,_){const S=ra.parseLink(_);return V(S,"argument-error"),ms._fromEmailAndCode(p,S.code,S.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Wi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class mo extends Wi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class ia extends mo{static credentialFromJSON(h){const p="string"==typeof h?JSON.parse(h):h;return V("providerId"in p&&"signInMethod"in p,"argument-error"),ti._fromParams(p)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return V(h.idToken||h.accessToken,"argument-error"),ti._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return ia.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return ia.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:p,oauthAccessToken:_,oauthTokenSecret:S,pendingToken:R,nonce:q,providerId:oe}=h;if(!_&&!S&&!p&&!R||!oe)return null;try{return new ia(oe)._credential({idToken:p,accessToken:_,nonce:q,pendingToken:R})}catch{return null}}}let gc=(()=>{class y extends mo{constructor(){super("facebook.com")}static credential(p){return ti._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Sh=(()=>{class y extends mo{constructor(){super("google.com"),this.addScope("profile")}static credential(p,_){return ti._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:S}=p;if(!_&&!S)return null;try{return y.credential(_,S)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),Ah=(()=>{class y extends mo{constructor(){super("github.com")}static credential(p){return ti._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class yo extends Fn{constructor(h,p){super(h,h),this.pendingToken=p}_getIdTokenResponse(h){return qi(h,this.buildRequest())}_linkToIdToken(h,p){const _=this.buildRequest();return _.idToken=p,qi(h,_)}_getReauthenticationResolver(h){const p=this.buildRequest();return p.autoCreate=!1,qi(h,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const p="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:S,pendingToken:R}=p;return _&&S&&R&&_===S?new yo(_,R):null}static _create(h,p){return new yo(h,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ai extends Wi{constructor(h){V(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return Ai.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return Ai.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const p=yo.fromJSON(h);return V(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:p,providerId:_}=h;if(!p||!_)return null;try{return yo._create(_,p)}catch{return null}}}let Ap=(()=>{class y extends mo{constructor(){super("twitter.com")}static credential(p,_){return ti._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:_})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:_,oauthTokenSecret:S}=p;if(!_||!S)return null;try{return y.credential(_,S)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Xa(y,h){return mc.apply(this,arguments)}function mc(){return(mc=(0,g.Z)(function*(y,h){return wn(y,"POST","/v1/accounts:signUp",et(y,h))})).apply(this,arguments)}class Mr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,p,_,S=!1){return(0,g.Z)(function*(){const R=yield kt._fromIdTokenResponse(h,_,S),q=yc(_);return new Mr({user:R,providerId:q,_tokenResponse:_,operationType:p})})()}static _forOperation(h,p,_){return(0,g.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const S=yc(_);return new Mr({user:h,providerId:S,_tokenResponse:_,operationType:p})})()}}function yc(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Mh(){return(Mh=(0,g.Z)(function*(y){var h;const p=bn(y);if(yield p._initializationPromise,null!==(h=p.currentUser)&&void 0!==h&&h.isAnonymous)return new Mr({user:p.currentUser,providerId:null,operationType:"signIn"});const _=yield Xa(p,{returnSecureToken:!0}),S=yield Mr._fromIdTokenResponse(p,"signIn",_,!0);return yield p._updateCurrentUser(S.user),S})).apply(this,arguments)}class eu extends O.ZR{constructor(h,p,_,S){var R;super(p.code,p.message),this.operationType=_,this.user=S,Object.setPrototypeOf(this,eu.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:p.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,p,_,S){return new eu(h,p,_,S)}}function js(y,h,p,_){return("reauthenticate"===h?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?eu._fromErrorAndOperation(y,R,h,_):R})}function $s(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function vo(){return vo=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);yield Hs(!0,p,h);const{providerUserInfo:_}=yield function Ur(y,h){return gt.apply(this,arguments)}(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[h]}),S=$s(_||[]);return p.providerData=p.providerData.filter(R=>S.has(R.providerId)),S.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p}),vo.apply(this,arguments)}function nu(y,h){return _o.apply(this,arguments)}function _o(){return(_o=(0,g.Z)(function*(y,h,p=!1){const _=yield xn(y,h._linkToIdToken(y.auth,yield y.getIdToken()),p);return Mr._forOperation(y,"link",_)})).apply(this,arguments)}function Hs(y,h,p){return sa.apply(this,arguments)}function sa(){return(sa=(0,g.Z)(function*(y,h,p){yield sn(h);const S=!1===y?"provider-already-linked":"no-such-provider";V($s(h.providerData).has(p)===y,h.auth,S)})).apply(this,arguments)}function jl(y,h){return wo.apply(this,arguments)}function wo(){return(wo=(0,g.Z)(function*(y,h,p=!1){const{auth:_}=y,S="reauthenticate";try{const R=yield xn(y,js(_,S,h,y),p);V(R.idToken,_,"internal-error");const q=wt(R.idToken);V(q,_,"internal-error");const{sub:oe}=q;return V(y.uid===oe,_,"user-mismatch"),Mr._forOperation(y,S,R)}catch(R){throw"auth/user-not-found"===R?.code&&we(_,"user-mismatch"),R}})).apply(this,arguments)}function Eo(y,h){return $r.apply(this,arguments)}function $r(){return($r=(0,g.Z)(function*(y,h,p=!1){const _="signIn",S=yield js(y,_,h),R=yield Mr._fromIdTokenResponse(y,_,S);return p||(yield y._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Rn(y,h){return ru.apply(this,arguments)}function ru(){return(ru=(0,g.Z)(function*(y,h){return Eo(bn(y),h)})).apply(this,arguments)}function Ln(y,h){return Io.apply(this,arguments)}function Io(){return(Io=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y);return yield Hs(!1,p,h.providerId),nu(p,h)})).apply(this,arguments)}function Gs(y,h){return jn.apply(this,arguments)}function jn(){return(jn=(0,g.Z)(function*(y,h){return jl((0,O.m9)(y),h)})).apply(this,arguments)}function Do(){return(Do=(0,g.Z)(function*(y,h){return wn(y,"POST","/v1/accounts:signInWithCustomToken",et(y,h))})).apply(this,arguments)}function Xn(){return Xn=(0,g.Z)(function*(y,h){const p=bn(y),_=yield function vc(y,h){return Do.apply(this,arguments)}(p,{token:h,returnSecureToken:!0}),S=yield Mr._fromIdTokenResponse(p,"signIn",_);return yield p._updateCurrentUser(S.user),S}),Xn.apply(this,arguments)}class oa{constructor(h,p){this.factorId=h,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(h,p){return"phoneInfo"in p?bo._fromServerResponse(h,p):we(h,"internal-error")}}class bo extends oa{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,p){return new bo(p)}}function iu(y,h,p){var _;V((null===(_=p.url)||void 0===_?void 0:_.length)>0,y,"invalid-continue-uri"),V(typeof p.dynamicLinkDomain>"u"||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=p.url,h.dynamicLinkDomain=p.dynamicLinkDomain,h.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(V(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=p.iOS.bundleId),p.android&&(V(p.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=p.android.installApp,h.androidMinimumVersionCode=p.android.minimumVersion,h.androidPackageName=p.android.packageName)}function aa(){return aa=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),S={requestType:"PASSWORD_RESET",email:h};p&&iu(_,S,p),yield function Ls(y,h){return Lt.apply(this,arguments)}(_,S)}),aa.apply(this,arguments)}function Tt(){return(Tt=(0,g.Z)(function*(y,h,p){yield Un((0,O.m9)(y),{oobCode:h,newPassword:p})})).apply(this,arguments)}function $l(){return $l=(0,g.Z)(function*(y,h){yield function Nt(y,h){return hn.apply(this,arguments)}((0,O.m9)(y),{oobCode:h})}),$l.apply(this,arguments)}function ou(y,h){return _c.apply(this,arguments)}function _c(){return(_c=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),_=yield Un(p,{oobCode:h}),S=_.requestType;switch(V(S,p,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(_.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(_.mfaInfo,p,"internal-error");default:V(_.email,p,"internal-error")}let R=null;return _.mfaInfo&&(R=oa._fromServerResponse(bn(p),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:R},operation:S}})).apply(this,arguments)}function au(){return(au=(0,g.Z)(function*(y,h){const{data:p}=yield ou((0,O.m9)(y),h);return p.email})).apply(this,arguments)}function Ec(){return(Ec=(0,g.Z)(function*(y,h,p){const _=bn(y),S=yield Xa(_,{returnSecureToken:!0,email:h,password:p}),R=yield Mr._fromIdTokenResponse(_,"signIn",S);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}function Ic(){return Ic=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),S={requestType:"EMAIL_SIGNIN",email:h};V(p.handleCodeInApp,_,"argument-error"),p&&iu(_,S,p),yield function dc(y,h){return gs.apply(this,arguments)}(_,S)}),Ic.apply(this,arguments)}function ca(){return(ca=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),S=pc.credentialWithLink(h,p||ue());return V(S._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),Rn(_,S)})).apply(this,arguments)}function Hr(){return(Hr=(0,g.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:createAuthUri",et(y,h))})).apply(this,arguments)}function lu(){return lu=(0,g.Z)(function*(y,h){const _={identifier:h,continueUri:ge()?ue():"http://localhost"},{signinMethods:S}=yield function uu(y,h){return Hr.apply(this,arguments)}((0,O.m9)(y),_);return S||[]}),lu.apply(this,arguments)}function Dc(){return Dc=(0,g.Z)(function*(y,h){const p=(0,O.m9)(y),S={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&iu(p.auth,S,h);const{email:R}=yield function Cn(y,h){return fo.apply(this,arguments)}(p.auth,S);R!==y.email&&(yield y.reload())}),Dc.apply(this,arguments)}function Wn(){return Wn=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};p&&iu(_.auth,R,p);const{email:q}=yield function hc(y,h){return gi.apply(this,arguments)}(_.auth,R);q!==y.email&&(yield y.reload())}),Wn.apply(this,arguments)}function ys(){return(ys=(0,g.Z)(function*(y,h){return xt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Mi(){return Mi=(0,g.Z)(function*(y,{displayName:h,photoURL:p}){if(void 0===h&&void 0===p)return;const _=(0,O.m9)(y),R={idToken:yield _.getIdToken(),displayName:h,photoUrl:p,returnSecureToken:!0},q=yield xn(_,function Gr(y,h){return ys.apply(this,arguments)}(_.auth,R));_.displayName=q.displayName||null,_.photoURL=q.photoUrl||null;const oe=_.providerData.find(({providerId:Oe})=>"password"===Oe);oe&&(oe.displayName=_.displayName,oe.photoURL=_.photoURL),yield _._updateTokensIfNecessary(q)}),Mi.apply(this,arguments)}function ql(y,h,p){return bc.apply(this,arguments)}function bc(){return(bc=(0,g.Z)(function*(y,h,p){const{auth:_}=y,R={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(R.email=h),p&&(R.password=p);const q=yield xn(y,ei(_,R));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class Ki{constructor(h,p,_={}){this.isNewUser=h,this.providerId=p,this.profile=_}}class Wl extends Ki{constructor(h,p,_,S){super(h,p,_),this.username=S}}class Tc extends Ki{constructor(h,p){super(h,"facebook.com",p)}}class Zl extends Wl{constructor(h,p){super(h,"github.com",p,"string"==typeof p?.login?p?.login:null)}}class Rh extends Ki{constructor(h,p){super(h,"google.com",p)}}class hu extends Wl{constructor(h,p,_){super(h,"twitter.com",p,_)}}function Nh(y){const{user:h,_tokenResponse:p}=y;return h.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Cc(y){var h,p;if(!y)return null;const{providerId:_}=y,S=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},R=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!_&&y?.idToken){const q=null===(p=null===(h=wt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===p?void 0:p.sign_in_provider;if(q)return new Ki(R,"anonymous"!==q&&"custom"!==q?q:null)}if(!_)return null;switch(_){case"facebook.com":return new Tc(R,S);case"github.com":return new Zl(R,S);case"google.com":return new Rh(R,S);case"twitter.com":return new hu(R,S,y.screenName||null);case"custom":case"anonymous":return new Ki(R,null);default:return new Ki(R,_,S)}}(p)}class To{constructor(h,p,_){this.type=h,this.credential=p,this.auth=_}static _fromIdtoken(h,p){return new To("enroll",h,p)}static _fromMfaPendingCredential(h){return new To("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var p,_;if(h?.multiFactorSession){if(null!==(p=h.multiFactorSession)&&void 0!==p&&p.pendingCredential)return To._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return To._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Ac{constructor(h,p,_){this.session=h,this.hints=p,this.signInResolver=_}static _fromError(h,p){const _=bn(h),S=p.customData._serverResponse,R=(S.mfaInfo||[]).map(oe=>oa._fromServerResponse(_,oe));V(S.mfaPendingCredential,_,"internal-error");const q=To._fromMfaPendingCredential(S.mfaPendingCredential);return new Ac(q,R,function(){var oe=(0,g.Z)(function*(Oe){const Xe=yield Oe._process(_,q);delete S.mfaInfo,delete S.mfaPendingCredential;const Et=Object.assign(Object.assign({},S),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(p.operationType){case"signIn":const pt=yield Mr._fromIdTokenResponse(_,p.operationType,Et);return yield _._updateCurrentUser(pt.user),pt;case"reauthenticate":return V(p.user,_,"internal-error"),Mr._forOperation(p.user,p.operationType,Et);default:we(_,"internal-error")}});return function(Oe){return oe.apply(this,arguments)}}())}resolveSignIn(h){var p=this;return(0,g.Z)(function*(){return p.signInResolver(h)})()}}class da{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(_=>oa._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new da(h)}getSession(){var h=this;return(0,g.Z)(function*(){return To._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,p){var _=this;return(0,g.Z)(function*(){const S=h,R=yield _.getSession(),q=yield xn(_.user,S._process(_.user.auth,R,p));return yield _.user._updateTokensIfNecessary(q),_.user.reload()})()}unenroll(h){var p=this;return(0,g.Z)(function*(){const _="string"==typeof h?h:h.uid,S=yield p.user.getIdToken();try{const R=yield xn(p.user,function Np(y,h){return xt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",et(y,h))}(p.user.auth,{idToken:S,mfaEnrollmentId:_}));p.enrolledFactors=p.enrolledFactors.filter(({uid:q})=>q!==_),yield p.user._updateTokensIfNecessary(R),yield p.user.reload()}catch(R){throw R}})()}}const Ws=new WeakMap,vs="__sak";class ha{constructor(h,p){this.storageRetriever=h,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(vs,"1"),this.storage.removeItem(vs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,p){return this.storage.setItem(h,JSON.stringify(p)),Promise.resolve()}_get(h){const p=this.storage.getItem(h);return Promise.resolve(p?JSON.parse(p):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const fu=(()=>{class y extends ha{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,_)=>this.onStorageEvent(p,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function fa(){const y=(0,O.z$)();return Ft(y)||zn(y)}()&&function Xo(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Ch(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const _ of Object.keys(this.listeners)){const S=this.storage.getItem(_),R=this.localCache[_];S!==R&&p(_,R,S)}}onStorageEvent(p,_=!1){if(!p.key)return void this.forAllChangedKeys((oe,Oe,Xe)=>{this.notifyListeners(oe,Xe)});const S=p.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(S);if(p.newValue!==oe)null!==p.newValue?this.storage.setItem(S,p.newValue):this.storage.removeItem(S);else if(this.localCache[S]===p.newValue&&!_)return}const R=()=>{const oe=this.storage.getItem(S);!_&&this.localCache[S]===oe||this.notifyListeners(S,oe)},q=this.storage.getItem(S);!function Jo(){return(0,O.w1)()&&10===document.documentMode}()||q===p.newValue||p.newValue===p.oldValue?R():setTimeout(R,10)}notifyListeners(p,_){this.localCache[p]=_;const S=this.listeners[p];if(S)for(const R of Array.from(S))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,_,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:_,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,_){var S=()=>super._set,R=this;return(0,g.Z)(function*(){yield S().call(R,p,_),R.localCache[p]=JSON.stringify(_)})()}_get(p){var _=()=>super._get,S=this;return(0,g.Z)(function*(){const R=yield _().call(S,p);return S.localCache[p]=JSON.stringify(R),R})()}_remove(p){var _=()=>super._remove,S=this;return(0,g.Z)(function*(){yield _().call(S,p),delete S.localCache[p]})()}}return y.type="LOCAL",y})(),Zs=(()=>{class y extends ha{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,_){}_removeListener(p,_){}}return y.type="SESSION",y})();let Ph=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const _=this.receivers.find(R=>R.isListeningto(p));if(_)return _;const S=new y(p);return this.receivers.push(S),S}isListeningto(p){return this.eventTarget===p}handleEvent(p){var _=this;return(0,g.Z)(function*(){const S=p,{eventId:R,eventType:q,data:oe}=S.data,Oe=_.handlersMap[q];if(!Oe?.size)return;S.ports[0].postMessage({status:"ack",eventId:R,eventType:q});const Xe=Array.from(Oe).map(function(){var pt=(0,g.Z)(function*(tr){return tr(S.origin,oe)});return function(tr){return pt.apply(this,arguments)}}()),Et=yield function Ql(y){return Promise.all(y.map(function(){var h=(0,g.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(_){return{fulfilled:!1,reason:_}}});return function(p){return h.apply(this,arguments)}}()))}(Xe);S.ports[0].postMessage({status:"done",eventId:R,eventType:q,response:Et})})()}_subscribe(p,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(_)}_unsubscribe(p,_){this.handlersMap[p]&&_&&this.handlersMap[p].delete(_),(!_||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ks(y="",h=10){let p="";for(let _=0;_<h;_++)p+=Math.floor(10*Math.random());return y+p}class pa{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,p,_=50){var S=this;return(0,g.Z)(function*(){const R=typeof MessageChannel<"u"?new MessageChannel:null;if(!R)throw new Error("connection_unavailable");let q,oe;return new Promise((Oe,Xe)=>{const Et=Ks("",20);R.port1.start();const pt=setTimeout(()=>{Xe(new Error("unsupported_event"))},_);oe={messageChannel:R,onMessage(tr){const Pr=tr;if(Pr.data.eventId===Et)switch(Pr.data.status){case"ack":clearTimeout(pt),q=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Oe(Pr.data.response);break;default:clearTimeout(pt),clearTimeout(q),Xe(new Error("invalid_response"))}}},S.handlers.add(oe),R.port1.addEventListener("message",oe.onMessage),S.target.postMessage({eventType:h,eventId:Et,data:p},[R.port2])}).finally(()=>{oe&&S.removeMessageHandler(oe)})})()}}function Tn(){return window}function Yi(){return typeof Tn().WorkerGlobalScope<"u"&&"function"==typeof Tn().importScripts}function Ao(){return(Ao=(0,g.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const pu="firebaseLocalStorageDb",gu=1,ws="firebaseLocalStorage",Mo="fbase_key";class xo{constructor(h){this.request=h}toPromise(){return new Promise((h,p)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function ya(y,h){return y.transaction([ws],h?"readwrite":"readonly").objectStore(ws)}function mu(){const y=indexedDB.open(pu,gu);return new Promise((h,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const _=y.result;try{_.createObjectStore(ws,{keyPath:Mo})}catch(S){p(S)}}),y.addEventListener("success",(0,g.Z)(function*(){const _=y.result;_.objectStoreNames.contains(ws)?h(_):(_.close(),yield function va(){const y=indexedDB.deleteDatabase(pu);return new xo(y).toPromise()}(),h(yield mu()))}))})}function mr(y,h,p){return _a.apply(this,arguments)}function _a(){return(_a=(0,g.Z)(function*(y,h,p){const _=ya(y,!0).put({[Mo]:h,value:p});return new xo(_).toPromise()})).apply(this,arguments)}function Es(){return(Es=(0,g.Z)(function*(y,h){const p=ya(y,!1).get(h),_=yield new xo(p).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function wa(y,h){const p=ya(y,!0).delete(h);return new xo(p).toPromise()}const Ys=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,g.Z)(function*(){return p.db||(p.db=yield mu()),p.db})()}_withRetries(p){var _=this;return(0,g.Z)(function*(){let S=0;for(;;)try{const R=yield _._openDb();return yield p(R)}catch(R){if(S++>3)throw R;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,g.Z)(function*(){return Yi()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,g.Z)(function*(){p.receiver=Ph._getInstance(function ma(){return Yi()?self:null}()),p.receiver._subscribe("keyChanged",function(){var _=(0,g.Z)(function*(S,R){return{keyProcessed:(yield p._poll()).includes(R.key)}});return function(S,R){return _.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var _=(0,g.Z)(function*(S,R){return["keyChanged"]});return function(S,R){return _.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,g.Z)(function*(){var _,S;if(p.activeServiceWorker=yield function Qi(){return Ao.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new pa(p.activeServiceWorker);const R=yield p.sender._send("ping",{},800);R&&null!==(_=R[0])&&void 0!==_&&_.fulfilled&&null!==(S=R[0])&&void 0!==S&&S.value.includes("keyChanged")&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var _=this;return(0,g.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function xc(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:p},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const p=yield mu();return yield mr(p,vs,"1"),yield wa(p,vs),!0}catch{}return!1})()}_withPendingWrite(p){var _=this;return(0,g.Z)(function*(){_.pendingWrites++;try{yield p()}finally{_.pendingWrites--}})()}_set(p,_){var S=this;return(0,g.Z)(function*(){return S._withPendingWrite((0,g.Z)(function*(){return yield S._withRetries(R=>mr(R,p,_)),S.localCache[p]=_,S.notifyServiceWorker(p)}))})()}_get(p){var _=this;return(0,g.Z)(function*(){const S=yield _._withRetries(R=>function Ro(y,h){return Es.apply(this,arguments)}(R,p));return _.localCache[p]=S,S})()}_remove(p){var _=this;return(0,g.Z)(function*(){return _._withPendingWrite((0,g.Z)(function*(){return yield _._withRetries(S=>wa(S,p)),delete _.localCache[p],_.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,g.Z)(function*(){const _=yield p._withRetries(q=>{const oe=ya(q,!1).getAll();return new xo(oe).toPromise()});if(!_)return[];if(0!==p.pendingWrites)return[];const S=[],R=new Set;for(const{fbase_key:q,value:oe}of _)R.add(q),JSON.stringify(p.localCache[q])!==JSON.stringify(oe)&&(p.notifyListeners(q,oe),S.push(q));for(const q of Object.keys(p.localCache))p.localCache[q]&&!R.has(q)&&(p.notifyListeners(q,null),S.push(q));return S})()}notifyListeners(p,_){this.localCache[p]=_;const S=this.listeners[p];if(S)for(const R of Array.from(S))R(_)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(_)}_removeListener(p,_){this.listeners[p]&&(this.listeners[p].delete(_),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function vu(){return(vu=(0,g.Z)(function*(y){return(yield xt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ri(y){return new Promise((h,p)=>{const _=document.createElement("script");_.setAttribute("src",y),_.onload=h,_.onerror=S=>{const R=ve("internal-error");R.customData=S,p(R)},_.type="text/javascript",_.charset="UTF-8",function Qs(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(_)})}function Xl(y){return`__${y}${Math.floor(1e6*Math.random())}`}const _i=1e12;class Op{constructor(h){this.auth=h,this.counter=_i,this._widgets=new Map}render(h,p){const _=this.counter;return this._widgets.set(_,new ed(h,this.auth.name,p||{})),this.counter++,_}reset(h){var p;const _=h||_i;null===(p=this._widgets.get(_))||void 0===p||p.delete(),this._widgets.delete(_)}getResponse(h){var p;return(null===(p=this._widgets.get(h||_i))||void 0===p?void 0:p.getResponse())||""}execute(h){var p=this;return(0,g.Z)(function*(){var _;return null===(_=p._widgets.get(h||_i))||void 0===_||_.execute(),""})()}}class ed{constructor(h,p,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof h?document.getElementById(h):h;V(S,"argument-error",{appName:p}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function wu(y){const h=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<y;_++)h.push(p.charAt(Math.floor(Math.random()*p.length)));return h.join("")}(50);const{callback:h,"expired-callback":p}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const td=Xl("rcb"),Nc=new Ke(3e4,6e4);class Xi{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=Tn().grecaptcha)||void 0===h||!h.render)}load(h,p=""){return V(function Da(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),h,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Tn().grecaptcha):new Promise((_,S)=>{const R=Tn().setTimeout(()=>{S(ve(h,"network-request-failed"))},Nc.get());Tn()[td]=()=>{Tn().clearTimeout(R),delete Tn()[td];const oe=Tn().grecaptcha;if(!oe)return void S(ve(h,"internal-error"));const Oe=oe.render;oe.render=(Xe,Et)=>{const pt=Oe(Xe,Et);return this.counter++,pt},this.hostLanguage=p,_(oe)},Ri(`https://www.google.com/recaptcha/api.js??${(0,O.xO)({onload:td,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(R),S(ve(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var p;return!(null===(p=Tn().grecaptcha)||void 0===p||!p.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Iu{load(h){return(0,g.Z)(function*(){return new Op(h)})()}clearedOneInstance(){}}const nd="recaptcha",kh={theme:"light",type:"image"};class ba{constructor(h,p=Object.assign({},kh),_){this.parameters=p,this.type=nd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bn(_),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof h?document.getElementById(h):h;V(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Iu:new Xi,this.validateStartingState()}verify(){var h=this;return(0,g.Z)(function*(){h.assertNotDestroyed();const p=yield h.render(),_=h.getAssertedRecaptcha();return _.getResponse(p)||new Promise(R=>{const q=oe=>{oe&&(h.tokenChangeListeners.delete(q),R(oe))};h.tokenChangeListeners.add(q),h.isInvisible&&_.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return p=>{if(this.tokenChangeListeners.forEach(_=>_(p)),"function"==typeof h)h(p);else if("string"==typeof h){const _=Tn()[h];"function"==typeof _&&_(p)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,g.Z)(function*(){if(yield h.init(),!h.widgetId){let p=h.container;if(!h.isInvisible){const _=document.createElement("div");p.appendChild(_),p=_}h.widgetId=h.getAssertedRecaptcha().render(p,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,g.Z)(function*(){V(ge()&&!Yi(),h.auth,"internal-error"),yield function Fh(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const p=yield function xi(y){return vu.apply(this,arguments)}(h.auth);V(p,h.auth,"internal-error"),h.parameters.sitekey=p})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class rd{constructor(h,p){this.verificationId=h,this.onConfirmation=p}confirm(h){const p=vi._fromVerification(this.verificationId,h);return this.onConfirmation(p)}}function id(){return(id=(0,g.Z)(function*(y,h,p){const _=bn(y),S=yield Pc(_,h,(0,O.m9)(p));return new rd(S,R=>Rn(_,R))})).apply(this,arguments)}function Oc(){return(Oc=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);yield Hs(!1,_,"phone");const S=yield Pc(_.auth,h,(0,O.m9)(p));return new rd(S,R=>Ln(_,R))})).apply(this,arguments)}function sd(){return(sd=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y),S=yield Pc(_.auth,h,(0,O.m9)(p));return new rd(S,R=>Gs(_,R))})).apply(this,arguments)}function Pc(y,h,p){return Du.apply(this,arguments)}function Du(){return Du=(0,g.Z)(function*(y,h,p){var _;const S=yield p.verify();try{let R;if(V("string"==typeof S,y,"argument-error"),V(p.type===nd,y,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const q=R.session;if("phoneNumber"in R)return V("enroll"===q.type,y,"internal-error"),(yield function Oh(y,h){return xt(y,"POST","/v2/accounts/mfaEnrollment:start",et(y,h))}(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{V("signin"===q.type,y,"internal-error");const oe=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return V(oe,y,"missing-multi-factor-info"),(yield function Ia(y,h){return xt(y,"POST","/v2/accounts/mfaSignIn:start",et(y,h))}(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield function Vl(y,h){return go.apply(this,arguments)}(y,{phoneNumber:R.phoneNumber,recaptchaToken:S});return q}}finally{p._reset()}}),Du.apply(this,arguments)}function Lh(){return(Lh=(0,g.Z)(function*(y,h){yield nu((0,O.m9)(y),h)})).apply(this,arguments)}let kc=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=bn(p)}verifyPhoneNumber(p,_){return Pc(this.auth,p,(0,O.m9)(_))}static credential(p,_){return vi._fromVerification(p,_)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:_,temporaryProof:S}=p;return _&&S?vi._fromTokenResponse(_,S):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function pn(y,h){return h?ft(h):(V(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Ta extends Fn{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return qi(h,this._buildIdpRequest())}_linkToIdToken(h,p){return qi(h,this._buildIdpRequest(p))}_getReauthenticationResolver(h){return qi(h,this._buildIdpRequest())}_buildIdpRequest(h){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(p.idToken=h),p}}function bu(y){return Eo(y.auth,new Ta(y),y.bypassAuthState)}function od(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),jl(p,new Ta(y),y.bypassAuthState)}function zr(y){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,g.Z)(function*(y){const{auth:h,user:p}=y;return V(p,h,"internal-error"),nu(p,new Ta(y),y.bypassAuthState)})).apply(this,arguments)}class Cu{constructor(h,p,_,S,R=!1){this.auth=h,this.resolver=_,this.user=S,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var h=this;return new Promise(function(){var p=(0,g.Z)(function*(_,S){h.pendingPromise={resolve:_,reject:S};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(_,S){return p.apply(this,arguments)}}())}onAuthEvent(h){var p=this;return(0,g.Z)(function*(){const{urlResponse:_,sessionId:S,postBody:R,tenantId:q,error:oe,type:Oe}=h;if(oe)return void p.reject(oe);const Xe={auth:p.auth,requestUri:_,sessionId:S,tenantId:q||void 0,postBody:R||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(Oe)(Xe))}catch(Et){p.reject(Et)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return bu;case"linkViaPopup":case"linkViaRedirect":return zr;case"reauthViaPopup":case"reauthViaRedirect":return od;default:we(this.auth,"internal-error")}}resolve(h){Ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const No=new Ke(2e3,1e4);function Tu(){return(Tu=(0,g.Z)(function*(y,h,p){const _=bn(y);Ne(y,h,Wi);const S=pn(_,p);return new Su(_,"signInViaPopup",h,S).executeNotNull()})).apply(this,arguments)}function Vh(){return(Vh=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);Ne(_.auth,h,Wi);const S=pn(_.auth,p);return new Su(_.auth,"reauthViaPopup",h,S,_).executeNotNull()})).apply(this,arguments)}function Rr(){return(Rr=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);Ne(_.auth,h,Wi);const S=pn(_.auth,p);return new Su(_.auth,"linkViaPopup",h,S,_).executeNotNull()})).apply(this,arguments)}let Su=(()=>{class y extends Cu{constructor(p,_,S,R,q){super(p,_,R,q),this.provider=S,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,g.Z)(function*(){const _=yield p.execute();return V(_,p.auth,"internal-error"),_})()}onExecution(){var p=this;return(0,g.Z)(function*(){Ve(1===p.filter.length,"Popup operations only handle one event");const _=Ks();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],_),p.authWindow.associatedEvent=_,p.resolver._originValidation(p.auth).catch(S=>{p.reject(S)}),p.resolver._isIframeWebStorageSupported(p.auth,S=>{S||p.reject(ve(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var _,S;this.pollId=null!==(S=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,No.get())};p()}}return y.currentPopupAction=null,y})();const Oi="pendingRedirect",Sa=new Map;class Uh extends Cu{constructor(h,p,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,p=this;return(0,g.Z)(function*(){let _=Sa.get(p.auth._key());if(!_){try{const R=(yield function ln(y,h){return Nr.apply(this,arguments)}(p.resolver,p.auth))?yield h().call(p):null;_=()=>Promise.resolve(R)}catch(S){_=()=>Promise.reject(S)}Sa.set(p.auth._key(),_)}return p.bypassAuthState||Sa.set(p.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var p=()=>super.onAuthEvent,_=this;return(0,g.Z)(function*(){if("signInViaRedirect"===h.type)return p().call(_,h);if("unknown"!==h.type){if(h.eventId){const S=yield _.auth._redirectUserForId(h.eventId);if(S)return _.user=S,p().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function Nr(){return(Nr=(0,g.Z)(function*(y,h){const p=qr(h),_=Is(y);if(!(yield _._isAvailable()))return!1;const S="true"===(yield _._get(p));return yield _._remove(p),S})).apply(this,arguments)}function ut(y,h){return or.apply(this,arguments)}function or(){return(or=(0,g.Z)(function*(y,h){return Is(y)._set(qr(h),"true")})).apply(this,arguments)}function ad(y,h){Sa.set(y._key(),h)}function Is(y){return ft(y._redirectPersistence)}function qr(y){return z(Oi,y.config.apiKey,y.name)}function Fc(y,h,p){return function Au(y,h,p){return D.apply(this,arguments)}(y,h,p)}function D(){return(D=(0,g.Z)(function*(y,h,p){const _=bn(y);Ne(y,h,Wi),yield _._initializationPromise;const S=pn(_,p);return yield ut(S,_),S._openRedirect(_,h,"signInViaRedirect")})).apply(this,arguments)}function C(y,h,p){return function M(y,h,p){return F.apply(this,arguments)}(y,h,p)}function F(){return(F=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);Ne(_.auth,h,Wi),yield _.auth._initializationPromise;const S=pn(_.auth,p);yield ut(S,_.auth);const R=yield St(_);return S._openRedirect(_.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function W(y,h,p){return function H(y,h,p){return Ce.apply(this,arguments)}(y,h,p)}function Ce(){return(Ce=(0,g.Z)(function*(y,h,p){const _=(0,O.m9)(y);Ne(_.auth,h,Wi),yield _.auth._initializationPromise;const S=pn(_.auth,p);yield Hs(!1,_,h.providerId),yield ut(S,_.auth);const R=yield St(_);return S._openRedirect(_.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function ct(){return(ct=(0,g.Z)(function*(y,h){return yield bn(y)._initializationPromise,ot(y,h,!1)})).apply(this,arguments)}function ot(y,h){return lt.apply(this,arguments)}function lt(){return(lt=(0,g.Z)(function*(y,h,p=!1){const _=bn(y),S=pn(_,h),q=yield new Uh(_,S,p).execute();return q&&!p&&(delete q.user._redirectEventId,yield _._persistUserIfCurrent(q.user),yield _._setRedirectUser(null,h)),q})).apply(this,arguments)}function St(y){return Or.apply(this,arguments)}function Or(){return(Or=(0,g.Z)(function*(y){const h=Ks(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Po{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let p=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(p=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Wr(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ko(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=h,p=!0)),p}sendToConsumer(h,p){var _;if(h.error&&!ko(h)){const S=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";p.onError(ve(this.auth,S))}else p.onAuthEvent(h)}isEventForConsumer(h,p){const _=null===p.eventId||!!h.eventId&&h.eventId===p.eventId;return p.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xs(h))}saveEventToCache(h){this.cachedEventUids.add(Xs(h)),this.lastProcessedEventTime=Date.now()}}function Xs(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function ko({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===h?.code}function ri(y){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,g.Z)(function*(y,h={}){return xt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const Pp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bh=/^https?/;function eo(){return(eo=(0,g.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield ri(y);for(const p of h)try{if(jh(p))return}catch{}we(y,"unauthorized-domain")})).apply(this,arguments)}function jh(y){const h=ue(),{protocol:p,hostname:_}=new URL(h);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===_?"chrome-extension:"===p&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===p&&q.hostname===_}if(!Bh.test(p))return!1;if(Pp.test(y))return _===y;const S=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(_)}const ii=new Ke(3e4,6e4);function ud(){const y=Tn().___jsl;if(y?.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let Nn=null;const $h=new Ke(5e3,15e3),Ei="__/auth/iframe",si="emulator/auth/iframe",Hh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},by=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $0(y){const h=y.config;V(h.authDomain,y,"auth-domain-config-required");const p=h.emulator?Ge(h,si):`https://${y.config.authDomain}/${Ei}`,_={apiKey:h.apiKey,appName:y.name,v:X.SDK_VERSION},S=by.get(y.config.apiHost);S&&(_.eid=S);const R=y._getFrameworks();return R.length&&(_.fw=R.join(",")),`${p}?${(0,O.xO)(_).slice(1)}`}function to(){return to=(0,g.Z)(function*(y){const h=yield function cd(y){return Nn=Nn||function kp(y){return new Promise((h,p)=>{var _,S,R;function q(){ud(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{ud(),p(ve(y,"network-request-failed"))},timeout:ii.get()})}if(null!==(S=null===(_=Tn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==S&&S.Iframe)h(gapi.iframes.getContext());else{if(null===(R=Tn().gapi)||void 0===R||!R.load){const oe=Xl("iframefcb");return Tn()[oe]=()=>{gapi.load?q():p(ve(y,"network-request-failed"))},Ri(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Oe=>p(Oe))}q()}}).catch(h=>{throw Nn=null,h})}(y),Nn}(y),p=Tn().gapi;return V(p,y,"internal-error"),h.open({where:document.body,url:$0(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hh,dontclear:!0},_=>new Promise(function(){var S=(0,g.Z)(function*(R,q){yield _.restyle({setHideOnLeave:!1});const oe=ve(y,"network-request-failed"),Oe=Tn().setTimeout(()=>{q(oe)},$h.get());function Xe(){Tn().clearTimeout(Oe),R(_)}_.ping(Xe).then(Xe,()=>{q(oe)})});return function(R,q){return S.apply(this,arguments)}}()))}),to.apply(this,arguments)}const yr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bs=500,Fp=600,xu="_blank",ld="http://localhost";class Pi{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Gh="__/auth/handler",Ot="emulator/auth/handler";function no(y,h,p,_,S,R){V(y.config.authDomain,y,"auth-domain-config-required"),V(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:_,v:X.SDK_VERSION,eventId:S};if(h instanceof Wi){h.setDefaultLanguage(y.languageCode),q.providerId=h.providerId||"",(0,O.xb)(h.getCustomParameters())||(q.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Oe,Xe]of Object.entries(R||{}))q[Oe]=Xe}if(h instanceof mo){const Oe=h.getScopes().filter(Xe=>""!==Xe);Oe.length>0&&(q.scopes=Oe.join(","))}y.tenantId&&(q.tid=y.tenantId);const oe=q;for(const Oe of Object.keys(oe))void 0===oe[Oe]&&delete oe[Oe];return`${function Sy({config:y}){return y.emulator?Ge(y,Ot):`https://${y.authDomain}/${Gh}`}(y)}?${(0,O.xO)(oe).slice(1)}`}const Lo="webStorageSupport",zh=class Ay{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Zs,this._completeRedirectFn=ot,this._overrideRedirectResult=ad}_openPopup(h,p,_,S){var R=this;return(0,g.Z)(function*(){var q;Ve(null===(q=R.eventManagers[h._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const oe=no(h,p,_,ue(),S);return function Cy(y,h,p,_=bs,S=Fp){const R=Math.max((window.screen.availHeight-S)/2,0).toString(),q=Math.max((window.screen.availWidth-_)/2,0).toString();let oe="";const Oe=Object.assign(Object.assign({},yr),{width:_.toString(),height:S.toString(),top:R,left:q}),Xe=(0,O.z$)().toLowerCase();p&&(oe=zt(Xe)?xu:p),it(Xe)&&(h=h||ld,Oe.scrollbars="yes");const Et=Object.entries(Oe).reduce((tr,[Pr,Wc])=>`${tr}${Pr}=${Wc},`,"");if(function hr(y=(0,O.z$)()){var h;return zn(y)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Xe)&&"_self"!==oe)return function Ty(y,h){const p=document.createElement("a");p.href=y,p.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(_)}(h||"",oe),new Pi(null);const pt=window.open(h||"",oe,Et);V(pt,y,"popup-blocked");try{pt.focus()}catch{}return new Pi(pt)}(h,oe,Ks())})()}_openRedirect(h,p,_,S){var R=this;return(0,g.Z)(function*(){return yield R._originValidation(h),function ga(y){Tn().location.href=y}(no(h,p,_,ue(),S)),new Promise(()=>{})})()}_initialize(h){const p=h._key();if(this.eventManagers[p]){const{manager:S,promise:R}=this.eventManagers[p];return S?Promise.resolve(S):(Ve(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(h);return this.eventManagers[p]={promise:_},_.catch(()=>{delete this.eventManagers[p]}),_}initAndGetManager(h){var p=this;return(0,g.Z)(function*(){const _=yield function Fo(y){return to.apply(this,arguments)}(h),S=new Po(h);return _.register("authEvent",R=>(V(R?.authEvent,h,"invalid-auth-event"),{status:S.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[h._key()]={manager:S},p.iframes[h._key()]=_,S})()}_isIframeWebStorageSupported(h,p){this.iframes[h._key()].send(Lo,{type:Lo},S=>{var R;const q=null===(R=S?.[0])||void 0===R?void 0:R[Lo];void 0!==q&&p(!!q),we(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Mu(y){return eo.apply(this,arguments)}(h)),this.originValidationPromises[p]}get _shouldInitProactively(){return Ch()||Ft()||zn()}};class Cs{constructor(h){this.factorId=h}_process(h,p,_){switch(p.type){case"enroll":return this._finalizeEnroll(h,p.credential,_);case"signin":return this._finalizeSignIn(h,p.credential);default:return ye("unexpected MultiFactorSessionType")}}}class dd extends Cs{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new dd(h)}_finalizeEnroll(h,p,_){return function Rp(y,h){return xt(y,"POST","/v2/accounts/mfaEnrollment:finalize",et(y,h))}(h,{idToken:p,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,p){return function Jl(y,h){return xt(y,"POST","/v2/accounts/mfaSignIn:finalize",et(y,h))}(h,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Zr=(()=>{class y{constructor(){}static assertion(p){return dd._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var Lc="@firebase/auth";class er{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var p=this;return(0,g.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const p=this.auth.onIdTokenChanged(_=>{h(_?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,p),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const p=this.internalListeners.get(h);p&&(this.internalListeners.delete(h),p(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Uo(){return window}(0,O.Pz)("authIdTokenMaxAge"),function Vo(y){(0,X._registerComponent)(new de.wA("auth",(h,{options:p})=>{const _=h.getProvider("app").getImmediate(),S=h.getProvider("heartbeat"),{apiKey:R,authDomain:q}=_.options;return((oe,Oe)=>{V(R&&!R.includes(":"),"invalid-api-key",{appName:oe.name}),V(!q?.includes(":"),"argument-error",{appName:oe.name});const Xe={apiKey:R,authDomain:q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ja(y)},Et=new Fl(oe,Oe,Xe);return function re(y,h){const p=h?.persistence||[],_=(Array.isArray(p)?p:[p]).map(ft);h?.errorMap&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(_,h?.popupRedirectResolver)}(Et,p),Et})(_,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,p,_)=>{h.getProvider("auth-internal").initialize()})),(0,X._registerComponent)(new de.wA("auth-internal",h=>{const p=bn(h.getProvider("auth").getImmediate());return new er(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,X.registerVersion)(Lc,"0.21.3",function On(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,X.registerVersion)(Lc,"0.21.3","esm2017")}("Browser");const Bp=2e3;function Ru(){return Ru=(0,g.Z)(function*(y,h,p){var _;const{BuildInfo:S}=Uo();Ve(h.sessionId,"AuthEvent did not contain a session ID");const R=yield function Vc(y){return Ma.apply(this,arguments)}(h.sessionId),q={};return zn()?q.ibi=S.packageName:yt()?q.apn=S.packageName:we(y,"operation-not-supported-in-this-environment"),S.displayName&&(q.appDisplayName=S.displayName),q.sessionId=R,no(y,p,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,q)}),Ru.apply(this,arguments)}function Vt(){return(Vt=(0,g.Z)(function*(y){const{BuildInfo:h}=Uo(),p={};zn()?p.iosBundleId=h.packageName:yt()?p.androidPackageName=h.packageName:we(y,"operation-not-supported-in-this-environment"),yield ri(y,p)})).apply(this,arguments)}function Ii(){return(Ii=(0,g.Z)(function*(y,h,p){const{cordova:_}=Uo();let S=()=>{};try{yield new Promise((R,q)=>{let oe=null;function Oe(){var pt;R();const tr=null===(pt=_.plugins.browsertab)||void 0===pt?void 0:pt.close;"function"==typeof tr&&tr(),"function"==typeof p?.close&&p.close()}function Xe(){oe||(oe=window.setTimeout(()=>{q(ve(y,"redirect-cancelled-by-user"))},Bp))}function Et(){"visible"===document?.visibilityState&&Xe()}h.addPassiveListener(Oe),document.addEventListener("resume",Xe,!1),yt()&&document.addEventListener("visibilitychange",Et,!1),S=()=>{h.removePassiveListener(Oe),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",Et,!1),oe&&window.clearTimeout(oe)}})}finally{S()}})).apply(this,arguments)}function Ma(){return(Ma=(0,g.Z)(function*(y){const h=function Kh(y){if(Ve(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),p=new Uint8Array(h);for(let _=0;_<y.length;_++)p[_]=y.charCodeAt(_);return p}(y),p=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(p)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Uc=20;class Ts extends Po{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(h)),super.onEvent(h)}initialized(){var h=this;return(0,g.Z)(function*(){yield h.initPromise})()}}function jp(y){return xa.apply(this,arguments)}function xa(){return(xa=(0,g.Z)(function*(y){const h=yield pd()._get(Yh(y));return h&&(yield pd()._remove(Yh(y))),h})).apply(this,arguments)}function $p(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<Uc;p++){const _=Math.floor(Math.random()*h.length);y.push(h.charAt(_))}return y.join("")}function pd(){return ft(fu)}function Yh(y){return z("authEvent",y.config.apiKey,y.name)}function jo(y){if(!y?.includes("?"))return{};const[h,...p]=y.split("?");return(0,O.zd)(p.join("?"))}const Jh=class Hp{constructor(){this._redirectPersistence=Zs,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ot,this._overrideRedirectResult=ad}_initialize(h){var p=this;return(0,g.Z)(function*(){const _=h._key();let S=p.eventManagers.get(_);return S||(S=new Ts(h),p.eventManagers.set(_,S),p.attachCallbackListeners(h,S)),S})()}_openPopup(h){we(h,"operation-not-supported-in-this-environment")}_openRedirect(h,p,_,S){var R=this;return(0,g.Z)(function*(){!function Ry(y){var h,p,_,S,R,q,oe,Oe,Xe,Et;const pt=Uo();V("function"==typeof(null===(h=pt?.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(p=pt?.BuildInfo)||void 0===p?void 0:p.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(R=null===(S=null===(_=pt?.cordova)||void 0===_?void 0:_.plugins)||void 0===S?void 0:S.browsertab)||void 0===R?void 0:R.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Oe=null===(oe=null===(q=pt?.cordova)||void 0===q?void 0:q.plugins)||void 0===oe?void 0:oe.browsertab)||void 0===Oe?void 0:Oe.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Et=null===(Xe=pt?.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===Et?void 0:Et.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const q=yield R._initialize(h);yield q.initialized(),q.resetRedirect(),function wi(){Sa.clear()}(),yield R._originValidation(h);const oe=function hd(y,h,p=null){return{type:h,eventId:p,urlResponse:null,sessionId:$p(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(h,_,S);yield function Bc(y,h){return pd()._set(Yh(y),h)}(h,oe);const Oe=yield function Zh(y,h,p){return Ru.apply(this,arguments)}(h,oe,p),Xe=yield function Aa(y){const{cordova:h}=Uo();return new Promise(p=>{h.plugins.browsertab.isAvailable(_=>{let S=null;_?h.plugins.browsertab.openUrl(y):S=h.InAppBrowser.open(y,function ho(y=(0,O.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(S)})})}(Oe);return function xy(y,h,p){return Ii.apply(this,arguments)}(h,q,Xe)})()}_isIframeWebStorageSupported(h,p){throw new Error("Method not implemented.")}_originValidation(h){const p=h._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Bo(y){return Vt.apply(this,arguments)}(h)),this.originValidationPromises[p]}attachCallbackListeners(h,p){const{universalLinks:_,handleOpenURL:S,BuildInfo:R}=Uo(),q=setTimeout((0,g.Z)(function*(){yield jp(h),p.onEvent(Gp())}),500),oe=function(){var Et=(0,g.Z)(function*(pt){clearTimeout(q);const tr=yield jp(h);let Pr=null;tr&&pt?.url&&(Pr=function fd(y,h){var p,_;const S=function Oy(y){const h=jo(y),p=h.link?decodeURIComponent(h.link):void 0,_=jo(p).link,S=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return jo(S).link||S||_||p||y}(h);if(S.includes("/__/auth/callback")){const R=jo(S),q=R.firebaseError?function Ny(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,oe=null===(_=null===(p=q?.code)||void 0===p?void 0:p.split("auth/"))||void 0===_?void 0:_[1],Oe=oe?ve(oe):null;return Oe?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Oe,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:S,postBody:null}}return null}(tr,pt.url)),p.onEvent(Pr||Gp())});return function(tr){return Et.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,oe);const Oe=S,Xe=`${R.packageName.toLowerCase()}://`;Uo().handleOpenURL=function(){var Et=(0,g.Z)(function*(pt){if(pt.toLowerCase().startsWith(Xe)&&oe({url:pt}),"function"==typeof Oe)try{Oe(pt)}catch(tr){console.error(tr)}});return function(pt){return Et.apply(this,arguments)}}()}};function Gp(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}const Ra=1e3;function ki(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function ky(y=(0,O.z$)()){return!("file:"!==ki()&&"ionic:"!==ki()&&"capacitor:"!==ki()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function Na(){try{const y=self.localStorage,h=Ks();if(y)return y.setItem(h,"1"),y.removeItem(h),!function Nu(y=(0,O.z$)()){return function $c(){return(0,O.w1)()&&11===document?.documentMode}()||function Ly(y=(0,O.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,O.hl)()}catch{return ro()&&(0,O.hl)()}return!1}function ro(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ou(){return(function md(){return"http:"===ki()||"https:"===ki()}()||(0,O.ru)()||ky())&&!function Fy(){return(0,O.b$)()||(0,O.UG)()}()&&Na()&&!ro()}function yd(){return ky()&&typeof document<"u"}function es(){return(es=(0,g.Z)(function*(){return!!yd()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},Ra);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Kr={LOCAL:"local",NONE:"none",SESSION:"session"},$o=V,vd="persistence";function Ho(y){return _d.apply(this,arguments)}function _d(){return(_d=(0,g.Z)(function*(y){yield y._initializationPromise;const h=qp(),p=z(vd,y.config.apiKey,y.name);h&&h.setItem(p,y._getPersistence())})).apply(this,arguments)}function qp(){var y;try{return(null===(y=function zp(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Wp=V;class Ss{constructor(){this.browserResolver=ft(zh),this.cordovaResolver=ft(Jh),this.underlyingResolver=null,this._redirectPersistence=Zs,this._completeRedirectFn=ot,this._overrideRedirectResult=ad}_initialize(h){var p=this;return(0,g.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,p,_,S){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,p,_,S)})()}_openRedirect(h,p,_,S){var R=this;return(0,g.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,p,_,S)})()}_isIframeWebStorageSupported(h,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,p)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return yd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Wp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,g.Z)(function*(){if(h.underlyingResolver)return;const p=yield function Hc(){return es.apply(this,arguments)}();h.underlyingResolver=p?h.cordovaResolver:h.browserResolver})()}}function Pa(y){return y.unwrap()}function Gc(y){return zc(y)}function zc(y){const{_tokenResponse:h}=y instanceof O.ZR?y.customData:y;if(!h)return null;if(!(y instanceof O.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return kc.credentialFromResult(y);const p=h.providerId;if(!p||p===se.PASSWORD)return null;let _;switch(p){case se.GOOGLE:_=Sh;break;case se.FACEBOOK:_=gc;break;case se.GITHUB:_=Ah;break;case se.TWITTER:_=Ap;break;default:const{oauthIdToken:S,oauthAccessToken:R,oauthTokenSecret:q,pendingToken:oe,nonce:Oe}=h;return R||q||S||oe?oe?p.startsWith("saml.")?yo._create(p,oe):ti._fromParams({providerId:p,signInMethod:p,pendingToken:oe,idToken:S,accessToken:R}):new ia(p).credential({idToken:S,accessToken:R,rawNonce:Oe}):null}return y instanceof O.ZR?_.credentialFromError(y):_.credentialFromResult(y)}function vr(y,h){return h.catch(p=>{throw p instanceof O.ZR&&function Fi(y,h){var p;const _=null===(p=h.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new tf(y,function sr(y,h){var p;const _=(0,O.m9)(y),S=h;return V(h.customData.operationType,_,"argument-error"),V(null===(p=S.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,_,"argument-error"),Ac._fromError(_,S)}(y,h));else if(_){const S=zc(h),R=h;S&&(R.credential=S,R.tenantId=_.tenantId||void 0,R.email=_.email||void 0,R.phoneNumber=_.phoneNumber||void 0)}}(y,p),p}).then(p=>{const S=p.user;return{operationType:p.operationType,credential:Gc(p),additionalUserInfo:Nh(p),user:io.getOrCreate(S)}})}function wd(y,h){return ef.apply(this,arguments)}function ef(){return(ef=(0,g.Z)(function*(y,h){const p=yield h;return{verificationId:p.verificationId,confirm:_=>vr(y,p.confirm(_))}})).apply(this,arguments)}class tf{constructor(h,p){this.resolver=p,this.auth=function Di(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return vr(Pa(this.auth),this.resolver.resolveSignIn(h))}}class io{constructor(h){this._delegate=h,this.multiFactor=function Mc(y){const h=(0,O.m9)(y);return Ws.has(h)||Ws.set(h,da._fromUser(h)),Ws.get(h)}(h)}static getOrCreate(h){return io.USER_MAP.has(h)||io.USER_MAP.set(h,new io(h)),io.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var p=this;return(0,g.Z)(function*(){return vr(p.auth,Ln(p._delegate,h))})()}linkWithPhoneNumber(h,p){var _=this;return(0,g.Z)(function*(){return wd(_.auth,function Dy(y,h,p){return Oc.apply(this,arguments)}(_._delegate,h,p))})()}linkWithPopup(h){var p=this;return(0,g.Z)(function*(){return vr(p.auth,function j0(y,h,p){return Rr.apply(this,arguments)}(p._delegate,h,Ss))})()}linkWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Ho(bn(p.auth)),W(p._delegate,h,Ss)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var p=this;return(0,g.Z)(function*(){return vr(p.auth,Gs(p._delegate,h))})()}reauthenticateWithPhoneNumber(h,p){return wd(this.auth,function Js(y,h,p){return sd.apply(this,arguments)}(this._delegate,h,p))}reauthenticateWithPopup(h){return vr(this.auth,function B0(y,h,p){return Vh.apply(this,arguments)}(this._delegate,h,Ss))}reauthenticateWithRedirect(h){var p=this;return(0,g.Z)(function*(){return yield Ho(bn(p.auth)),C(p._delegate,h,Ss)})()}sendEmailVerification(h){return function Gl(y,h){return Dc.apply(this,arguments)}(this._delegate,h)}unlink(h){var p=this;return(0,g.Z)(function*(){return yield function tu(y,h){return vo.apply(this,arguments)}(p._delegate,h),p})()}updateEmail(h){return function zl(y,h){return ql((0,O.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function la(y,h){return ql((0,O.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Ca(y,h){return Lh.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function qs(y,h){return Mi.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,p){return function du(y,h,p){return Wn.apply(this,arguments)}(this._delegate,h,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}io.USER_MAP=new WeakMap;const Pu=V;let qc=(()=>{class y{constructor(p,_){if(this.app=p,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=p.options;Pu(S,"invalid-api-key",{appName:p.name}),Pu(S,"invalid-api-key",{appName:p.name});const R=typeof window<"u"?Ss:void 0;this._delegate=_.initialize({options:{persistence:Zp(S,p.name),popupRedirectResolver:R}}),this._delegate._updateErrorMap(He),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?io.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,_){!function lc(y,h,p){const _=bn(y);V(_._canInitEmulator,_,"emulator-config-failed"),V(/^https?:\/\//.test(h),_,"invalid-emulator-scheme");const S=!!p?.disableWarnings,R=ea(h),{host:q,port:oe}=function ta(y){const h=ea(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!p)return{host:"",port:null};const _=p[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(_);if(S){const R=S[1];return{host:R,port:Kt(_.substr(R.length+1))}}{const[R,q]=_.split(":");return{host:R,port:Kt(q)}}}(h);_.config.emulator={url:`${R}//${q}${null===oe?"":`:${oe}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:q,port:oe,protocol:R.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function qn(){function y(){const h=document.createElement("p"),p=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,_)}applyActionCode(p){return function su(y,h){return $l.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return ou(this._delegate,p)}confirmPasswordReset(p,_){return function ua(y,h,p){return Tt.apply(this,arguments)}(this._delegate,p,_)}createUserWithEmailAndPassword(p,_){var S=this;return(0,g.Z)(function*(){return vr(S._delegate,function xh(y,h,p){return Ec.apply(this,arguments)}(S._delegate,p,_))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function cu(y,h){return lu.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Hl(y,h){return"EMAIL_SIGNIN"===ra.parseLink(h)?.operation}(0,p)}getRedirectResult(){var p=this;return(0,g.Z)(function*(){Pu(Ou(),p._delegate,"operation-not-supported-in-this-environment");const _=yield function nt(y,h){return ct.apply(this,arguments)}(p._delegate,Ss);return _?vr(p._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Py(y,h){bn(y)._logFramework(h)}(this._delegate,p)}onAuthStateChanged(p,_,S){const{next:R,error:q,complete:oe}=Ed(p,_,S);return this._delegate.onAuthStateChanged(R,q,oe)}onIdTokenChanged(p,_,S){const{next:R,error:q,complete:oe}=Ed(p,_,S);return this._delegate.onIdTokenChanged(R,q,oe)}sendSignInLinkToEmail(p,_){return function Yt(y,h,p){return Ic.apply(this,arguments)}(this._delegate,p,_)}sendPasswordResetEmail(p,_){return function Zi(y,h,p){return aa.apply(this,arguments)}(this._delegate,p,_||void 0)}setPersistence(p){var _=this;return(0,g.Z)(function*(){let S;switch(function Oa(y,h){$o(Object.values(Kr).includes(h),y,"invalid-persistence-type"),(0,O.b$)()?$o(h!==Kr.SESSION,y,"unsupported-persistence-type"):(0,O.UG)()?$o(h===Kr.NONE,y,"unsupported-persistence-type"):ro()?$o(h===Kr.NONE||h===Kr.LOCAL&&(0,O.hl)(),y,"unsupported-persistence-type"):$o(h===Kr.NONE||Na(),y,"unsupported-persistence-type")}(_._delegate,p),p){case Kr.SESSION:S=Zs;break;case Kr.LOCAL:S=(yield ft(Ys)._isAvailable())?Ys:fu;break;case Kr.NONE:S=L;break;default:return we("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return vr(this._delegate,function Bl(y){return Mh.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return vr(this._delegate,Rn(this._delegate,p))}signInWithCustomToken(p){return vr(this._delegate,function zs(y,h){return Xn.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,_){return vr(this._delegate,function he(y,h,p){return Rn((0,O.m9)(y),pc.credential(h,p))}(this._delegate,p,_))}signInWithEmailLink(p,_){return vr(this._delegate,function ir(y,h,p){return ca.apply(this,arguments)}(this._delegate,p,_))}signInWithPhoneNumber(p,_){return wd(this._delegate,function on(y,h,p){return id.apply(this,arguments)}(this._delegate,p,_))}signInWithPopup(p){var _=this;return(0,g.Z)(function*(){return Pu(Ou(),_._delegate,"operation-not-supported-in-this-environment"),vr(_._delegate,function Oo(y,h,p){return Tu.apply(this,arguments)}(_._delegate,p,Ss))})()}signInWithRedirect(p){var _=this;return(0,g.Z)(function*(){return Pu(Ou(),_._delegate,"operation-not-supported-in-this-environment"),yield Ho(_._delegate),Fc(_._delegate,p,Ss)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function wc(y,h){return au.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Kr,y})();function Ed(y,h,p){let _=y;"function"!=typeof y&&({next:_,error:h,complete:p}=y);const S=_;return{next:q=>S(q&&io.getOrCreate(q)),error:h,complete:p}}function Zp(y,h){const p=function Xh(y,h){const p=qp();if(!p)return[];const _=z(vd,y,h);switch(p.getItem(_)){case Kr.NONE:return[L];case Kr.LOCAL:return[Ys,Zs];case Kr.SESSION:return[Zs];default:return[]}}(y,h);if(typeof self<"u"&&!p.includes(Ys)&&p.push(Ys),typeof window<"u")for(const _ of[fu,Zs])p.includes(_)||p.push(_);return p.includes(L)||p.push(L),p}class Id{constructor(){this.providerId="phone",this._delegate=new kc(Pa(K.Z.auth()))}static credential(h,p){return kc.credential(h,p)}verifyPhoneNumber(h,p){return this._delegate.verifyPhoneNumber(h,p)}unwrap(){return this._delegate}}Id.PHONE_SIGN_IN_METHOD=kc.PHONE_SIGN_IN_METHOD,Id.PROVIDER_ID=kc.PROVIDER_ID;const Kp=V;class Yp{constructor(h,p,_=K.Z.app()){var S;Kp(null===(S=_.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new ba(h,p,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Qp(y){y.INTERNAL.registerComponent(new de.wA("auth-compat",h=>{const p=h.getProvider("app-compat").getImmediate(),_=h.getProvider("auth");return new qc(p,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Z_EMAIL_SIGNIN,PASSWORD_RESET:Z_PASSWORD_RESET,RECOVER_EMAIL:Z_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Z_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Z_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Z_VERIFY_EMAIL}},EmailAuthProvider:pc,FacebookAuthProvider:gc,GithubAuthProvider:Ah,GoogleAuthProvider:Sh,OAuthProvider:ia,SAMLAuthProvider:Ai,PhoneAuthProvider:Id,PhoneMultiFactorGenerator:Zr,RecaptchaVerifier:Yp,TwitterAuthProvider:Ap,Auth:qc,AuthCredential:Fn,Error:O.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.3.3")}(K.Z)},8766:(ht,Ie,P)=>{P.d(Ie,{Lj:()=>we,X3:()=>ke});var g=P(5861);const K=(V,ye)=>ye.some(Ve=>V instanceof Ve);let O,X;const de=new WeakMap,ae=new WeakMap,se=new WeakMap,j=new WeakMap,B=new WeakMap;let Ee={get(V,ye,Ve){if(V instanceof IDBTransaction){if("done"===ye)return ae.get(V);if("objectStoreNames"===ye)return V.objectStoreNames||se.get(V);if("store"===ye)return Ve.objectStoreNames[1]?void 0:Ve.objectStore(Ve.objectStoreNames[0])}return be(V[ye])},set:(V,ye,Ve)=>(V[ye]=Ve,!0),has:(V,ye)=>V instanceof IDBTransaction&&("done"===ye||"store"===ye)||ye in V};function le(V){return"function"==typeof V?function st(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function te(){return X||(X=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...ye){return V.apply(De(this),ye),be(de.get(this))}:function(...ye){return be(V.apply(De(this),ye))}:function(ye,...Ve){const ze=V.call(De(this),ye,...Ve);return se.set(ze,ye.sort?ye.sort():[ye]),be(ze)}}(V):(V instanceof IDBTransaction&&function Ue(V){if(ae.has(V))return;const ye=new Promise((Ve,ze)=>{const ft=()=>{V.removeEventListener("complete",Je),V.removeEventListener("error",re),V.removeEventListener("abort",re)},Je=()=>{Ve(),ft()},re=()=>{ze(V.error||new DOMException("AbortError","AbortError")),ft()};V.addEventListener("complete",Je),V.addEventListener("error",re),V.addEventListener("abort",re)});ae.set(V,ye)}(V),K(V,function ee(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,Ee):V)}function be(V){if(V instanceof IDBRequest)return function Z(V){const ye=new Promise((Ve,ze)=>{const ft=()=>{V.removeEventListener("success",Je),V.removeEventListener("error",re)},Je=()=>{Ve(be(V.result)),ft()},re=()=>{ze(V.error),ft()};V.addEventListener("success",Je),V.addEventListener("error",re)});return ye.then(Ve=>{Ve instanceof IDBCursor&&de.set(Ve,V)}).catch(()=>{}),B.set(ye,V),ye}(V);if(j.has(V))return j.get(V);const ye=le(V);return ye!==V&&(j.set(V,ye),B.set(ye,V)),ye}const De=V=>B.get(V);function ke(V,ye,{blocked:Ve,upgrade:ze,blocking:ft,terminated:Je}={}){const re=indexedDB.open(V,ye),ue=be(re);return ze&&re.addEventListener("upgradeneeded",ge=>{ze(be(re.result),ge.oldVersion,ge.newVersion,be(re.transaction))}),Ve&&re.addEventListener("blocked",()=>Ve()),ue.then(ge=>{Je&&ge.addEventListener("close",()=>Je()),ft&&ge.addEventListener("versionchange",()=>ft())}).catch(()=>{}),ue}function we(V,{blocked:ye}={}){const Ve=indexedDB.deleteDatabase(V);return ye&&Ve.addEventListener("blocked",()=>ye()),be(Ve).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],Te=["put","add","delete","clear"],Ne=new Map;function Re(V,ye){if(!(V instanceof IDBDatabase)||ye in V||"string"!=typeof ye)return;if(Ne.get(ye))return Ne.get(ye);const Ve=ye.replace(/FromIndex$/,""),ze=ye!==Ve,ft=Te.includes(Ve);if(!(Ve in(ze?IDBIndex:IDBObjectStore).prototype)||!ft&&!ve.includes(Ve))return;const Je=function(){var re=(0,g.Z)(function*(ue,...ge){const Se=this.transaction(ue,ft?"readwrite":"readonly");let Fe=Se.store;return ze&&(Fe=Fe.index(ge.shift())),(yield Promise.all([Fe[Ve](...ge),ft&&Se.done]))[0]});return function(ge){return re.apply(this,arguments)}}();return Ne.set(ye,Je),Je}!function He(V){Ee=V(Ee)}(V=>({...V,get:(ye,Ve,ze)=>Re(ye,Ve)||V.get(ye,Ve,ze),has:(ye,Ve)=>!!Re(ye,Ve)||V.has(ye,Ve)}))},5861:(ht,Ie,P)=>{function g(O,X,ee,te,de,ae,se){try{var j=O[ae](se),B=j.value}catch(Z){return void ee(Z)}j.done?X(B):Promise.resolve(B).then(te,de)}function K(O){return function(){var X=this,ee=arguments;return new Promise(function(te,de){var ae=O.apply(X,ee);function se(B){g(ae,te,de,se,j,"next",B)}function j(B){g(ae,te,de,se,j,"throw",B)}se(void 0)})}}P.d(Ie,{Z:()=>K})}},ht=>{ht(ht.s=4709)}]);